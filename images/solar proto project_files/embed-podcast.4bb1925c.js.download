(()=>{var e,t={1124:(e,t,n)=>{"use strict";n.d(t,{D1:()=>o,Le:()=>et,_8:()=>lt,OU:()=>s,J_:()=>a,rU:()=>i,KG:()=>it,zq:()=>ot,MD:()=>ut});var i,r,o,a,s,c,l=n(3205),d=n(8687),u=n(2279),_=n(9368);!function(e){e.KEY_SESSION_MESSAGE="message",e.KEY_SESSION_STATUSES_CHANGE="keystatuseschange",e.MEDIA_SOURCE_OPEN="sourceopen",e.MEDIA_SOURCE_CLOSE="sourceclose",e.SOURCE_BUFFER_UPDATE_END="updateend",e.MS_KEY_ADDED="mskeyadded",e.MS_KEY_ERROR="mskeyerror",e.MS_KEY_MESSAGE="mskeymessage",e.MS_NEEDKEY="msneedkey",e.WEBKIT_KEY_ADDED="webkitkeyadded",e.WEBKIT_KEY_ERROR="webkitkeyerror",e.WEBKIT_KEY_MESSAGE="webkitkeymessage",e.WEBKIT_NEEDKEY="webkitneedkey",e.V0_1B_KEY_ADDED="keyadded",e.V0_1B_KEY_ERROR="keyerror",e.V0_1B_KEY_MESSAGE="keymessage",e.V0_1B_NEEDKEY="needkey",e.MEDIA_CANPLAY="canplay",e.MEDIA_CANPLAYTHROUGH="canplaythrough",e.MEDIA_DURATIONCHANGE="durationchange",e.MEDIA_ENCRYPTED="encrypted",e.MEDIA_ENDED="ended",e.MEDIA_ERROR="error",e.MEDIA_LOADEDMETADATA="loadedmetadata",e.MEDIA_PAUSE="pause",e.MEDIA_PLAY="play",e.MEDIA_PLAYING="playing",e.MEDIA_SEEKING="seeking",e.MEDIA_TIMEUPDATE="timeupdate",e.MEDIA_WAITING="waiting",e.MEDIA_RATECHANGE="ratechange",e.INTERNAL_ENCRYPTED="__encrypted",e.INTERNAL_PLAYER_CANPLAY="__canplay",e.INTERNAL_PLAYER_CANPLAYTHROUGH="__canplaythrough",e.INTERNAL_MEDIA_REQUIRES_DURATION="__requiresduration",e.INTERNAL_PLAYER_LOADED_METADATA="__loadedmetadata",e.BUFFER_APPEND_ERROR="append_error",e.BUFFER_QUOTA_EXCEEDED="quota_exceeded",e.BUFFER_STALLED="stalled",e.BUFFER_SOURCE_OPEN="source_open",e.BUFFER_SOURCE_CLOSE="source_close",e.BUFFERING_START="buffering_start",e.BUFFERING_END="buffering_end",e.EME_LICENSE_REQUEST_ERROR="license_request_error",e.EME_LICENSE_REQUEST_CAPPED="license_request_capped",e.LIST_PLAYER_AUTOPLAY_FAILED="player_autoplay_failed",e.LIST_PLAYER_BEFORE_LIST_CHANGE="before_list_change",e.LIST_PLAYER_BEFORE_NEXT="before_next",e.LIST_PLAYER_BEFORE_PLAYER_LOAD="before_player_load",e.LIST_PLAYER_BEFORE_PREVIOUS="before_previous",e.LIST_PLAYER_BEFORE_TRACK_LOAD="before_track_load",e.LIST_PLAYER_BEFORE_VOLUME_CHANGE="before_volume_change",e.LIST_PLAYER_BUFFER_STALLED="stalled",e.LIST_PLAYER_BUFFERING_START="buffering_start",e.LIST_PLAYER_BUFFERING_END="buffering_end",e.LIST_PLAYER_CAPPED="capped",e.LIST_PLAYER_CLEARED="cleared",e.LIST_PLAYER_DURATION_CHANGED="duration_changed",e.LIST_PLAYER_ERROR="error",e.LIST_PLAYER_ERROR_SYNC="error_sync",e.LIST_PLAYER_LIST_CHANGED="list_change",e.LIST_PLAYER_LIST_ENDED="list_ended",e.LIST_PLAYER_LOAD_VIDEO="load_video",e.LIST_PLAYER_MAX_LIST_ERRORS_REACHED="max_list_errors_reached",e.LIST_PLAYER_PAUSED="paused",e.LIST_PLAYER_PLAYED_THRESHOLD_REACHED="played_threshold_reached",e.LIST_PLAYER_PLAYER_LOAD="player_load",e.LIST_PLAYER_PLAYING="playing",e.LIST_PLAYER_POSITION_CHANGED="position_changed",e.LIST_PLAYER_PROGRESS="progress",e.LIST_PLAYER_REPEAT_MODE_CHANGED="repeat_mode_changed",e.LIST_PLAYER_SHUFFLE_CHANGED="shuffle_changed",e.LIST_PLAYER_STOPPED="stopped",e.LIST_PLAYER_STOPPED_VIDEO="stopped_video",e.LIST_PLAYER_TRACKING_DATA_CREATED="tracking_data_created",e.LIST_PLAYER_TRACKING_DATA_FINALIZED="tracking_data_finalized",e.LIST_PLAYER_TRACK_ENDED="track_ended",e.LIST_PLAYER_TRACK_LOADED="track_loaded",e.LIST_PLAYER_TRACK_TIMEOUT="track_timeout",e.LIST_PLAYER_TRACK_UNPLAYABLE="track_unplayable",e.LIST_PLAYER_DATA_CREATED="tracking_data_created",e.LIST_PLAYER_DATA_FINALIZED="tracking_data_finalized",e.LIST_PLAYER_VOLUME_CHANGED="volume_changed",e.LIST_PLAYER_VIDEO_ELEMENT_APPENDED="video_element_appended",e.LIST_PLAYER_VIDEO_ELEMENT_REMOVED="video_element_removed",e.LIST_PLAYER_VIDEO_PROFILE_CHANGED="video_profile_changed",e.LIST_PLAYER_SEEK_HANDLED="list_player_seek_handled",e.LIST_PLAYER_DISPLAYED_CUES_CHANGED="displayed_cues_changed",e.LIST_PLAYER_PLAYBACK_SPEED_CHANGED="playback_speed_changed",e.LOGGER_ERROR="error",e.PLAYER_AUTOPLAY_FAILED="player_autoplay_failed",e.PLAYER_BEFORE_LOAD="before_load",e.PLAYER_BEFORE_STOP="before_stop",e.PLAYER_BEFORE_VOLUME_CHANGE="before_volume_change",e.PLAYER_BUFFER_STALLED="stalled",e.PLAYER_BUFFERING_START="buffering_start",e.PLAYER_BUFFERING_END="buffering_end",e.PLAYER_CAN_PRELOAD="can_preload",e.PLAYER_CAPPED="capped",e.PLAYER_DURATION_CHANGED="duration_changed",e.PLAYER_ENDED="ended",e.PLAYER_ENDED_VIDEO="ended_video",e.PLAYER_ERROR="error",e.PLAYER_WARNING="warning",e.PLAYER_FIRST_BYTES="first_bytes",e.PLAYER_KEY_RECEIVED="key",e.PLAYER_LOAD="load",e.PLAYER_LOAD_VIDEO="load_video",e.PLAYER_LOADING_FAILED="loading_failed",e.PLAYER_PAUSED="paused",e.PLAYER_PLAY="play",e.PLAYER_PLAYING="playing",e.PLAYER_POSITION_CHANGED="position_changed",e.PLAYER_PRELOADING_ERROR="preloading_error",e.PLAYER_PROGRESS="progress",e.PLAYER_STALLED="stalled",e.PLAYER_STOPPED="stopped",e.PLAYER_STOPPED_VIDEO="stopped_video",e.PLAYER_PLAYED_THRESHOLD_REACHED="played_threshold_reached",e.PLAYER_TIMEOUT="timeout",e.PLAYER_PLAYBACK_START="playback_start",e.PLAYER_TRACKING_DATA_CREATED="tracking_data_created",e.PLAYER_TRACKING_DATA_FINALIZED="tracking_data_finalized",e.PLAYER_VIDEO_ELEMENT_APPENDED="video_element_appended",e.PLAYER_VIDEO_ELEMENT_REMOVED="video_element_removed",e.PLAYER_VIDEO_PROFILE_CHANGED="video_profile_changed",e.PLAYER_DISPLAYED_CUES_CHANGED="displayed_cues_changed",e.PLAYER_SEEKING="seeking",e.PLAYER_FRAGMENT_FETCHED="fragment_fetched",e.PLAYER_FRAGMENT_FETCH_ERROR="fragment_fetch_error",e.PLAYER_VIDEO_MANIFEST_RESOLVED="video_manifest_resolved",e.PLAYER_VIDEO_MANIFEST_RESOLVE_FAILED="video_manifest_resolve_failed",e.PLAYER_PLAYBACK_SPEED_CHANGED="playback_speed_changed",e.PLAYER_MANAGER_READY="ready",e.TRACKER_PLAYBACK_START="playback_start",e.TRACKER_PLAYED_THRESHOLD_REACHED="played_threshold_reached",e.TRACKER_TRACKING_DATA_CREATED="tracking_data_created",e.TRACKER_TRACKING_DATA_FINALIZED="tracking_data_finalized",e.VIDEO_MANIFEST_RESOLVED="video_manifest_resolved",e.VIDEO_MANIFEST_RESOLVE_FAILED="video_manifest_resolve_failed",e.ABR_MANAGER_BITRATE_CHANGE="bitrate_change"}(i||(i={})),function(e){e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready",e.PLAYREADY_HARDWARE="com.microsoft.playready.hardware",e.FAIRPLAY="com.apple.fps.1_0",e.INVALID_SPOTIFY_KEY="com.spotify.invalid"}(r||(r={})),function(e){e.CAPPING_USER_IS_CAPPED="CAPPING_USER_IS_CAPPED",e.EME_API_NOT_SUPPORTED="EME_API_NOT_SUPPORTED",e.EME_MEDIA_KEYS_NOT_SUPPORTED="EME_MEDIA_KEYS_NOT_SUPPORTED",e.EME_MEDIA_KEY_SESSION_NOT_SUPPORTED="EME_MEDIA_KEY_SESSION_NOT_SUPPORTED",e.EME_NO_SUPPORTED_KEYSYSTEM="EME_NO_SUPPORTED_KEYSYSTEM",e.EME_PLAYER_MEDIA_KEYS_SETTING_FAILED="EME_PLAYER_MEDIA_KEYS_SETTING_FAILED",e.EME_ERROR_UNKNOWN="EME_ERROR_UNKNOWN",e.EME_LICENSE_REQUEST_EMPTY_RESPONSE="EME_LICENSE_REQUEST_EMPTY_RESPONSE",e.EME_LICENSE_REQUEST_FAILED_WITH_STATUS="EME_LICENSE_REQUEST_FAILED_WITH_STATUS",e.EME_LICENSE_REQUEST_WIDEVINE_ERROR="EME_LICENSE_REQUEST_WIDEVINE_ERROR",e.EME_LICENSE_UPDATE_FAILED="EME_LICENSE_UPDATE_FAILED",e.EME_HEADER_KEY_VALUE_MISMATCH="EME_HEADER_KEY_VALUE_MISMATCH",e.EME_HEADER_MISSING_CHALLENGE="EME_HEADER_MISSING_CHALLENGE",e.EME_INIT_DATA_MALFORMED="EME_INIT_DATA_MALFORMED",e.EME_CANNOT_SET_CERTIFICATE_FOR_PLATFORM="EME_CANNOT_SET_CERTIFICATE_FOR_PLATFORM",e.EME_MEDIA_KEY_SESSION_V0_1B_ERROR="EME_MEDIA_KEY_SESSION_V0_1B_ERROR",e.EME_MEDIA_KEY_SESSION_SAFARI_ERROR="EME_MEDIA_KEY_SESSION_SAFARI_ERROR",e.EME_NO_SUPPORTED_CONFIGURATION="EME_NO_SUPPORTED_CONFIGURATION",e.EME_NOT_SUPPORTED_ERROR="EME_NOT_SUPPORTED_ERROR",e.EME_INVALID_STATE_ERROR="EME_INVALID_STATE_ERROR",e.EME_UNKNOWN_ERROR="EME_UNKNOWN_ERROR",e.DISALLOW_PROTECTED_TRACK_ERROR="DISALLOW_PROTECTED_TRACK_ERROR",e.FILE_FORMAT_NOT_SUPPORTED="FILE_FORMAT_NOT_SUPPORTED",e.FILE_MALFORMED_SEEKTABLE="FILE_MALFORMED_SEEKTABLE",e.FILE_MALFORMED_PSSH="FILE_MALFORMED_PSSH",e.FILE_NOT_RESOLVED="FILE_NOT_RESOLVED",e.FRAGMENT_ONLINE_REQUEST_FAILED_WITH_ZERO="FRAGMENT_ONLINE_REQUEST_FAILED_WITH_ZERO",e.FRAGMENT_OFFLINE_REQUEST_FAILED_WITH_ZERO="FRAGMENT_OFFLINE_REQUEST_FAILED_WITH_ZERO",e.FRAGMENT_REQUEST_FAILED_WITH_ZERO="FRAGMENT_REQUEST_FAILED_WITH_ZERO",e.FRAGMENT_REQUEST_FAILED_WITH_STATUS="FRAGMENT_REQUEST_FAILED_WITH_STATUS",e.FRAGMENT_REQUEST_EMPTY_RESPONSE="FRAGMENT_REQUEST_EMPTY_RESPONSE",e.FRAGMENT_REQUEST_UNEXPECTED_LENGTH="FRAGMENT_REQUEST_UNEXPECTED_LENGTH",e.PLAYER_ATTEMPTED_VOLUME_OUT_OF_RANGE="PLAYER_ATTEMPTED_VOLUME_OUT_OF_RANGE",e.PLAYER_BUFFER_QUOTA_EXCEEDED="PLAYER_BUFFER_QUOTA_EXCEEDED",e.PLAYER_CANNOT_FIND_PLAYABLE_URI="PLAYER_CANNOT_FIND_PLAYABLE_URI",e.PLAYER_INVALID_INTERNAL_STATE="PLAYER_INVALID_INTERNAL_STATE",e.PLAYER_MEDIA_ERROR="PLAYER_MEDIA_ERROR",e.PLAYER_PLAYBACK_ERROR="PLAYER_PLAYBACK_ERROR",e.MEDIA_ABORTED="MEDIA_ABORTED",e.MEDIA_DECODING_ERROR="MEDIA_DECODING_ERROR",e.MEDIA_NETWORK_ERROR="MEDIA_NETWORK_ERROR",e.MEDIA_NOT_SUPPORTED="MEDIA_NOT_SUPPORTED",e.LICENSE_RESOLVE_INVALID_RESPONSE="LICENSE_RESOLVE_INVALID_RESPONSE",e.LICENSE_RESOLVER_CANT_RESOLVE_URL="LICENSE_RESOLVER_CANT_RESOLVE_URL",e.LICENSE_RESOLVER_DEPRECATED_VERSION="LICENSE_RESOLVER_DEPRECATED_VERSION",e.LIST_PLAYER_NO_TRACK_PLAYER="LIST_PLAYER_NO_TRACK_PLAYER",e.LIST_PLAYER_NO_LIST="LIST_PLAYER_NO_LIST",e.LIST_PLAYER_INVALID_ARGUMENT="LIST_PLAYER_INVALID_ARGUMENT",e.LIST_PLAYER_FORBIDDEN="LIST_PLAYER_FORBIDDEN",e.STORAGE_ERROR="STORAGE_ERROR",e.STORAGE_FAILED_WITH_STATUS="STORAGE_FAILED_WITH_STATUS",e.STORAGE_RETURNED_NO_TRACKS="STORAGE_RETURNED_NO_TRACKS",e.STORAGE_TRACK_MANIFEST_FAILED="STORAGE_TRACK_MANIFEST_FAILED",e.STORAGE_TRACK_MANIFEST_EMPTY="STORAGE_TRACK_MANIFEST_EMPTY",e.STORAGE_VIDEO_MANIFEST_FAILED="STORAGE_VIDEO_MANIFEST_FAILED",e.TRACK_DATA_ALREADY_FINALIZED="TRACK_DATA_ALREADY_FINALIZED",e.TSV_SENDING_FAILED="TSV_SENDING_FAILED",e.PLAYBACK_STATS_SENDING_FAILED="PLAYBACK_STATS_SENDING_FAILED",e.PLAYBACK_START_SENDING_FAILED="PLAYBACK_START_SENDING_FAILED",e.UNKNOWN="UNKNOWN"}(o||(o={})),function(e){e.SUCCESS="RESULT_SUCCESS",e.INVALID="RESULT_INVALID",e.FORBIDDEN="RESULT_FORBIDDEN",e.OUT_OF_BOUNDS="RESULT_OUT_OF_BOUNDS",e.NO_LIST="RESULT_NO_LIST",e.NO_TRACK="RESULT_NO_TRACK",e.LIST_END="RESULT_LIST_END",e.INVALID_TRACK="RESULT_INVALID_TRACK",e.CANCELLED="CANCELLED",e.NO_TRACK_PLAYER="NO_TRACK_PLAYER"}(a||(a={})),function(e){e.MP3="MP3",e.MP4="MP4",e.MP4_DUAL="MP4_DUAL",e.MP4_CBCS="MP4_CBCS",e.MP4_FLAC="MP4_FLAC",e.MANIFEST_ID="MANIFEST_ID"}(s||(s={})),function(e){e.FRAGMENT_FETCHED="fragment_fetched",e.FRAGMENT_FETCH_ERROR="fragment_fetch_error",e.VIDEO_PROFILE_CHANGED="video_profile",e.SUBTITLE_LANGUAGES_LOADED="subtitle_languages_loaded"}(c||(c={}));class p extends Error{constructor(e,t){super(t),this.unrecoverable=!1,this.listPlayerIgnore=!1,this.debug={},this.code=e,this.message=t,this.name="PlaybackError"}static fatal(e,t){const n=new p(e,t);return n.unrecoverable=!0,n}}var h=n(8465);class f extends Error{constructor(e=o.EME_ERROR_UNKNOWN,t){super(t),this.status=-1,this.licenseServer="",this.shouldRefreshEndpoint=!1,this.unrecoverable=!1,this.debug={},this.code=e,this.message=t,this.name="EMEError"}static fatal(e=o.EME_ERROR_UNKNOWN,t){const n=new f(e,t);return n.unrecoverable=!0,n}}class E extends Error{constructor(e,t){super(t),this.name="CappingError",this.message=t,this.code=e}}function m(e){const t=document.createEvent("Event");t.initEvent("encrypted",!1,!1),t.initDataType="cenc",t.initData=e.initData,t.fromPolyfill=!0,this.dispatchEvent(t)}class g extends u.B{constructor(e){super(i.KEY_SESSION_MESSAGE,null),this.messageType="license-request",this.message=e}}class y extends u.vp{constructor(e){super(),this._nativeKeySession=null,this._lastUpdateDeferred=(0,h.$)(),this._lastGenerateDeferred=(0,h.$)(),this.addEventListener=this.addListener,this.removeEventListener=this.removeListener,this._nativeMediaKeys=e,this._onKeyMessage=this._onKeyMessage.bind(this),this._onKeyAdded=this._onKeyAdded.bind(this),this._onKeyError=this._onKeyError.bind(this)}_attach(){const e=this._nativeKeySession;e&&(e.addEventListener(i.MS_KEY_ADDED,this._onKeyAdded),e.addEventListener(i.MS_KEY_ERROR,this._onKeyError),e.addEventListener(i.MS_KEY_MESSAGE,this._onKeyMessage))}_detach(){const e=this._nativeKeySession;e&&(e.removeEventListener(i.MS_KEY_ADDED,this._onKeyAdded),e.removeEventListener(i.MS_KEY_ERROR,this._onKeyError),e.removeEventListener(i.MS_KEY_MESSAGE,this._onKeyMessage))}_onKeyMessage(e){e.message&&e.message.buffer&&(this.emitEvent(new g(e.message.buffer)),this._lastGenerateDeferred&&(this._lastGenerateDeferred.resolve(!0),this._lastGenerateDeferred=null))}_onKeyAdded(){this._lastUpdateDeferred&&(this._lastUpdateDeferred.resolve(!0),this._lastUpdateDeferred=null),this._lastGenerateDeferred&&(this._lastGenerateDeferred.resolve(!0),this._lastGenerateDeferred=null),this.emit(i.KEY_SESSION_STATUSES_CHANGE,null)}_onKeyError(){const e=this._nativeKeySession&&this._nativeKeySession.error;this._lastGenerateDeferred&&(this._lastGenerateDeferred.reject(e),this._lastGenerateDeferred=null),this._lastUpdateDeferred&&(this._lastUpdateDeferred.reject(e),this._lastUpdateDeferred=null),this.emit(i.KEY_SESSION_STATUSES_CHANGE,null)}generateRequest(e,t){return new Promise(((e,n)=>{this._lastGenerateDeferred&&(this._lastGenerateDeferred.resolve=e,this._lastGenerateDeferred.reject=n),this._nativeKeySession=this._nativeMediaKeys.createSession("audio/mp4",new Uint8Array(t),null),this._attach()}))}update(e){return new Promise(((t,n)=>{this._lastGenerateDeferred&&(this._lastGenerateDeferred.resolve=t,this._lastGenerateDeferred.reject=n),this._nativeKeySession&&this._nativeKeySession.update(new Uint8Array(e))}))}close(){return new Promise((e=>{this._nativeKeySession&&this._nativeKeySession.close(),this._detach(),e(!0)}))}}class v{constructor(e){this._lastBoundSetter=null,this.shouldRefreshPerTrack=!0,this._nativeMediaKeys=new MSMediaKeys(e)}attach(e){return new Promise((t=>{if(e.readyState>=1)return e.msSetMediaKeys(this._nativeMediaKeys),void t();const n=()=>{e.removeEventListener(i.MEDIA_LOADEDMETADATA,n),this._lastBoundSetter=null,e.msSetMediaKeys(this._nativeMediaKeys)};this._lastBoundSetter=n,e.addEventListener(i.MEDIA_LOADEDMETADATA,n),e.addEventListener(i.MS_NEEDKEY,m),t()}))}detach(e){this._lastBoundSetter&&(e.removeEventListener(i.MS_NEEDKEY,m),e.removeEventListener(i.MEDIA_LOADEDMETADATA,this._lastBoundSetter),this._lastBoundSetter=null)}setServerCertificate(){return Promise.reject(new f(o.EME_CANNOT_SET_CERTIFICATE_FOR_PLATFORM,"Cannot set server certificate on this platform."))}createSession(){return new y(this._nativeMediaKeys)}}function S(e){const t=this.mediaKeys;return t&&t!==e&&t.detach(this),delete this.mediaKeys,this.mediaKeys=e,e&&e.attach(this),Promise.resolve()}class R{constructor(e,t){if(this._configuration=null,this.keySystem=e,!this._checkConfig(t))throw new f(o.EME_NO_SUPPORTED_CONFIGURATION,"No supported configurations")}_checkConfig(e){var t,n;const i=this.keySystem;for(const r of e){const e={initDataTypes:r.initDataTypes,audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",sessionTypes:["temporary"],label:r.label};let o;if(r.audioCapabilities&&r.audioCapabilities.length&&e.audioCapabilities){o=!1;for(const n of r.audioCapabilities){const r=null===(t=n.contentType)||void 0===t?void 0:t.split(";")[0];MSMediaKeys.isTypeSupported(i,r)&&(e.audioCapabilities.push(n),o=!0)}}if(r.videoCapabilities&&r.videoCapabilities.length&&e.videoCapabilities){o=!1;for(const t of r.videoCapabilities){const r=null===(n=t.contentType)||void 0===n?void 0:n.split(";")[0];MSMediaKeys.isTypeSupported(i,r)&&(e.videoCapabilities.push(t),o=!0)}}if(o)return this._configuration=e,!0}return!1}getConfiguration(){return this._configuration}createMediaKeys(){return new Promise((e=>{e(new v(this.keySystem))}))}}const A=d.P.forTag("eme_polyfill.v0_1b");class T extends u.vp{constructor(e,t,n){super(),this._mediaElement=null,this._lastUpdateDeferred=null,this._lastGenerateResolver=null,this.sessionId=null,this._keySystem=e,this._mediaElement=t,this._prefix=n,this.addEventListener=this.addListener,this.removeEventListener=this.removeListener}_addPrefix(e){return this._prefix?this._prefix+e.replace(/\b[a-z]/,(function(e){return e.toUpperCase()})):e}generateComplete(e){this.emitEvent(new g(e)),this._lastGenerateResolver&&(this._lastGenerateResolver.resolve(!0),this._lastGenerateResolver=null)}updateComplete(){this._lastUpdateDeferred&&(this._lastUpdateDeferred.resolve(!0),this._lastUpdateDeferred=null),this.emit(i.KEY_SESSION_STATUSES_CHANGE,null)}handleErrorEvent(e){const t=new f(o.EME_MEDIA_KEY_SESSION_V0_1B_ERROR,"MediaKeySession v0.1b Error");t.debug.errorCode=e.errorCode,t.debug.systemCode=e.systemCode,!e.sessionId&&this._lastGenerateResolver?(this._lastGenerateResolver.reject(t),this._lastGenerateResolver=null):e.sessionId&&this._lastUpdateDeferred?(this._lastUpdateDeferred.reject(t),this._lastUpdateDeferred=null):this.emit(i.KEY_SESSION_STATUSES_CHANGE,null)}generateRequest(e,t){return this._mediaElement?new Promise(((e,n)=>{this._lastGenerateResolver={resolve:e,reject:n};try{this._mediaElement[this._addPrefix("generateKeyRequest")](this._keySystem,new Uint8Array(t))}catch(i){n(i),this._lastGenerateResolver=null}})):Promise.reject(new ReferenceError("InvalidState: Media keys are not attached."))}update(e){if(!this._mediaElement)return Promise.reject(new ReferenceError("InvalidState: Media keys are not attached."));if(this._lastUpdateDeferred){const t=this.update.bind(this,e);return this._lastUpdateDeferred.promise.then(t,t)}const t=(0,h.$)();this._lastUpdateDeferred=t;try{this._mediaElement[this._addPrefix("addKey")](this._keySystem,new Uint8Array(e),null,this.sessionId)}catch(n){t.reject(n),this._lastUpdateDeferred=null}return t.promise}close(){if(this.sessionId&&this._mediaElement)try{this._mediaElement[this._addPrefix("cancelKeyRequest")](this._keySystem,this.sessionId)}catch(e){A.warn("Could not close keysession",e)}return Promise.resolve(!0)}}class b{constructor(e,t=""){this._mediaElement=null,this._waitingForSessionIds=[],this._sessionMap={},this.shouldRefreshPerTrack=!0,this._keySystem=e,this._prefix=t,this._onKeyMessage=this._onKeyMessage.bind(this),this._onKeyAdded=this._onKeyAdded.bind(this),this._onKeyError=this._onKeyError.bind(this)}attach(e){this._mediaElement=e;const t=this._prefix;e.addEventListener(t+i.V0_1B_NEEDKEY,m);const n=e.addEventListener.bind(e);n(t+i.V0_1B_KEY_ADDED,this._onKeyAdded),n(t+i.V0_1B_KEY_ERROR,this._onKeyError),n(t+i.V0_1B_KEY_MESSAGE,this._onKeyMessage)}detach(e){this._mediaElement=null;const t=this._prefix;e.removeEventListener(t+i.V0_1B_NEEDKEY,m);const n=e.removeEventListener.bind(e);n(t+i.V0_1B_KEY_ADDED,this._onKeyAdded),n(t+i.V0_1B_KEY_ERROR,this._onKeyError),n(t+i.V0_1B_KEY_MESSAGE,this._onKeyMessage)}_getSession(e){const t=this._sessionMap[e];if(t)return t;const n=this._waitingForSessionIds.shift();return n?(n.sessionId=e,this._sessionMap[e]=n,n):null}_onKeyMessage(e){const t=this._getSession(e.sessionId);t?t.generateComplete(e.message):A.warn("Got keymessage without session.")}_onKeyAdded(e){const t=this._getSession(e.sessionId);t?t.updateComplete():A.warn("Got keyadded without session.")}_onKeyError(e){const t=this._getSession(e.sessionId);t?t.handleErrorEvent(e):A.warn("Got keyerror without session.")}setServerCertificate(){return Promise.reject(new f(o.EME_CANNOT_SET_CERTIFICATE_FOR_PLATFORM,"Cannot set server certificate on this platform."))}createSession(){const e=new T(this._keySystem,this._mediaElement,this._prefix);return this._waitingForSessionIds.push(e),e}}function L(e){const t=this.mediaKeys;return t&&t!==e&&t.detach(this),delete this.mediaKeys,this.mediaKeys=e,e&&e.attach(this),Promise.resolve()}class I{constructor(e,t,n){if(this._configuration=null,this.keySystem=e,this._prefix=n,!this._checkConfig(t))throw new f(o.EME_NO_SUPPORTED_CONFIGURATION,"No supported configurations")}_checkConfig(e){var t,n;const i=this.keySystem,r=document.createElement("video");for(const o of e){const e={initDataTypes:o.initDataTypes,audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",sessionTypes:["temporary"],label:o.label};let a=!1;if(o.audioCapabilities&&o.audioCapabilities.length&&e.audioCapabilities){a=!1;for(const n of o.audioCapabilities){const o=null===(t=n.contentType)||void 0===t?void 0:t.split(";")[0];o&&r.canPlayType(o,i)&&(e.audioCapabilities.push(n),a=!0)}}if(o.videoCapabilities&&o.videoCapabilities.length&&e.videoCapabilities){a=!1;for(const t of o.videoCapabilities){const o=null===(n=t.contentType)||void 0===n?void 0:n.split(";")[0];o&&r.canPlayType(o,i)&&(e.videoCapabilities.push(t),a=!0)}}if(a)return this._configuration=e,!0}return!1}getConfiguration(){return this._configuration}createMediaKeys(){return new Promise((e=>{e(new b(this.keySystem,this._prefix))}))}}function P(e){navigator.requestMediaKeySystemAccess=function(t,n){return new Promise((i=>{i(new I(t,n,e))}))};const t=HTMLMediaElement.prototype;delete t.mediaKeys,t.setMediaKeys=L}const C=d.P.forTag("eme_polyfill.safari");class O extends u.vp{constructor(e,t){super(),this._attached=!1,this._nativeKeySession=null,this._lastGenerateResolver=(0,h.$)(),this._lastUpdateResolver=(0,h.$)(),this.addEventListener=this.addListener,this.removeEventListener=this.removeListener,this._nativeMediaKeys=e,this._serverCertificate=t,this._onKeyMessage=this._onKeyMessage.bind(this),this._onKeyAdded=this._onKeyAdded.bind(this),this._onKeyError=this._onKeyError.bind(this)}_attach(){if(this._attached)return;const e=this._nativeKeySession;e?(e.addEventListener(i.WEBKIT_KEY_MESSAGE,this._onKeyMessage),e.addEventListener(i.WEBKIT_KEY_ADDED,this._onKeyAdded),e.addEventListener(i.WEBKIT_KEY_ERROR,this._onKeyError)):C.warn("Tried to attach with no WebKitMediaKeySession")}_detach(){if(!this._attached)return;const e=this._nativeKeySession;e?(e.removeEventListener(i.WEBKIT_KEY_MESSAGE,this._onKeyMessage),e.removeEventListener(i.WEBKIT_KEY_ADDED,this._onKeyAdded),e.removeEventListener(i.WEBKIT_KEY_ERROR,this._onKeyError)):C.warn("Tried to detach with no WebKitMediaKeySession")}_onKeyMessage(e){e.message&&e.message.buffer&&(this.emitEvent(new g(e.message.buffer)),this._lastGenerateResolver&&(this._lastGenerateResolver.resolve(!0),this._lastGenerateResolver=null))}_onKeyAdded(){this._lastUpdateResolver&&(this._lastUpdateResolver.resolve(!0),this._lastUpdateResolver=null),this.emit(i.KEY_SESSION_STATUSES_CHANGE,null)}_onKeyError(){const e=this._nativeKeySession&&this._nativeKeySession.error,t=new f(o.EME_MEDIA_KEY_SESSION_SAFARI_ERROR,e&&e.message||"MediaKeySession Safari Error");e&&(t.debug.errorCode=e.code,t.debug.systemCode=e.systemCode),this._lastGenerateResolver?(this._lastGenerateResolver.reject(t),this._lastGenerateResolver=null):this._lastUpdateResolver&&(this._lastUpdateResolver.reject(t),this._lastUpdateResolver=null)}_rebuildInitData(e){const t=new Uint8Array(e);if(new DataView(t.buffer).getUint32(0,!0)+4!==t.byteLength)throw new f(o.EME_INIT_DATA_MALFORMED,"Malformed init data");const n=function(e){const t=Math.floor(e.byteLength/2),n=new Uint16Array(t),i=new DataView(e.buffer);for(let r=0;r<t;r++)n[r]=i.getUint16(2*r,!0);return String.fromCharCode.apply(null,n)}(t.slice(4)),i=n.match(/^skd:\/\/([0-9a-fA-F]+)/);if(!(null==i?void 0:i[1]))throw new f(o.EME_INIT_DATA_MALFORMED,"Invalid content ID");const r=i[1],a=new Uint8Array(function(e){const t=new Uint8Array(2*e.length),n=new DataView(t.buffer),i=e.split("");for(let r=0,o=i.length;r<o;r++){const e=i[r].charCodeAt(0);n.setUint16(2*r,e,!0)}return t.buffer}(r)),s=this._serverCertificate,c=new Uint8Array(t.byteLength+4+a.byteLength+4+s.byteLength);let l=0;c.set(t,l),l+=t.byteLength;const d=new DataView(c.buffer);return d.setUint32(l,a.byteLength,!0),l+=4,c.set(a,l),l+=a.byteLength,d.setUint32(l,s.byteLength,!0),l+=4,c.set(s,l),c}generateRequest(e,t){return new Promise(((e,n)=>{this._lastGenerateResolver={resolve:e,reject:n};try{const e=this._rebuildInitData(t);this._nativeKeySession=this._nativeMediaKeys.createSession("video/mp4",new Uint8Array(e),null),this._attach()}catch(i){this._lastGenerateResolver=null,n(i)}}))}update(e){const t=(0,h.$)();if(this._lastUpdateResolver=t,!this._nativeKeySession)return C.warn("Tried to update with no WebKitMediaKeySession"),t.promise;try{this._nativeKeySession.update(new Uint8Array(e))}catch(n){t.reject(n)}return t.promise}close(){return new Promise((e=>{this._detach(),e(!0)}))}}class D{constructor(e){this._lastBoundSetter=null,this._serverCertificate=null,this.shouldRefreshPerTrack=!0,this._nativeMediaKeys=new WebKitMediaKeys(e)}attach(e){return new Promise((t=>{if(e.readyState>=1)return e.webkitSetMediaKeys(this._nativeMediaKeys),void t();const n=()=>{e.removeEventListener(i.MEDIA_LOADEDMETADATA,n),this._lastBoundSetter=null,e.webkitSetMediaKeys(this._nativeMediaKeys)};this._lastBoundSetter=n,e.addEventListener(i.MEDIA_LOADEDMETADATA,n),e.addEventListener(i.WEBKIT_NEEDKEY,m),t()}))}detach(e){e.removeEventListener(i.WEBKIT_NEEDKEY,m),this._lastBoundSetter&&(e.removeEventListener(i.MEDIA_LOADEDMETADATA,this._lastBoundSetter),this._lastBoundSetter=null)}setServerCertificate(e){return this._serverCertificate=new Uint8Array(e),Promise.resolve(!0)}createSession(){if(!this._serverCertificate)throw new f(o.EME_INVALID_STATE_ERROR,"The server certificate is not available");return new O(this._nativeMediaKeys,this._serverCertificate)}}class k{constructor(e,t){this.keySystem=e;const n=this._checkConfig(t);if(!n)throw new f(o.EME_NO_SUPPORTED_CONFIGURATION,"No supported configurations");this._configuration=n}_checkConfig(e){const t=this.keySystem;let n=!1;for(const i of e){const e={initDataTypes:i.initDataTypes,audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",sessionTypes:["temporary"]};if(i.audioCapabilities)for(const r of i.audioCapabilities){if(!r.contentType)continue;const i=r.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(t,i)&&(e.audioCapabilities.push(r),n=!0)}if(i.videoCapabilities)for(const r of i.videoCapabilities){if(!r.contentType)continue;const i=r.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(t,i)&&(e.videoCapabilities.push(r),n=!0)}if(n)return e}return null}getConfiguration(){return this._configuration}createMediaKeys(){return new Promise((e=>{e(new D(this.keySystem))}))}}function w(e){const t=this.mediaKeys;return t&&t!==e&&t.detach(this),delete this.mediaKeys,this.mediaKeys=e,e?e.attach(this):Promise.resolve()}const N=d.P.forTag("eme_polyfills.tester");function M(){return"undefined"!=typeof navigator&&(null===navigator||void 0===navigator?void 0:navigator.requestMediaKeySystemAccess)&&"undefined"==typeof WebKitMediaKeys&&"undefined"!=typeof MediaKeySystemAccess&&(null===MediaKeySystemAccess||void 0===MediaKeySystemAccess?void 0:MediaKeySystemAccess.prototype.getConfiguration)?(N.log("Using native EME implementation."),"native"):"undefined"!=typeof HTMLMediaElement&&(null===HTMLMediaElement||void 0===HTMLMediaElement?void 0:HTMLMediaElement.prototype.webkitGenerateKeyRequest)?(N.log('Detected "webkit" Prefixed EME v0.1b. Polyfilling.'),P("webkit"),"v0.1b-webkit"):"undefined"!=typeof HTMLMediaElement&&(null===HTMLMediaElement||void 0===HTMLMediaElement?void 0:HTMLMediaElement.prototype.generateKeyRequest)?(N.log("Detected Unprefixed EME v0.1b. Polyfilling."),P(),"v0.1b"):"undefined"!=typeof MSMediaKeys?(N.log("Detected MS IE EME. Polyfilling."),function(){navigator.requestMediaKeySystemAccess=function(e,t){return new Promise((n=>{n(new R(e,t))}))};const e=HTMLMediaElement.prototype;delete e.mediaKeys,e.setMediaKeys=S}(),"ms-ie"):"function"==typeof WebKitMediaKeys?(N.log("Detected Safari EME. Polyfilling."),function(){navigator.requestMediaKeySystemAccess=function(e,t){return new Promise((n=>{n(new k(e,t))}))};const e=HTMLMediaElement.prototype;delete e.mediaKeys,e.setMediaKeys=w}(),"safari"):(N.warn("Detected no EME APIs."),null)}const U={[r.WIDEVINE]:{commonName:"widevine",licenseServer:"https://@webgate/widevine-license",withCertificate:!0,pssh_field:{audio:"pssh_widevine",video:"encryption_data"}},[r.PLAYREADY]:{commonName:"playready",licenseServer:"https://@webgate/playready-license",withCertificate:!1,pssh_field:{audio:"pssh_playready",video:"encryption_data"}},[r.PLAYREADY_HARDWARE]:{commonName:"playready",licenseServer:"https://@webgate/playready-license",withCertificate:!1,pssh_field:{audio:"pssh_playready",video:"encryption_data"}},[r.FAIRPLAY]:{commonName:"fairplay",licenseServer:"https://@webgate/fairplay-license",withCertificate:!0,pssh_field:{audio:"pssh_fairplay",video:"asset_id"}},[r.INVALID_SPOTIFY_KEY]:{commonName:"spotify-invalid",licenseServer:"https://@webgate",withCertificate:!1,pssh_field:{audio:"pssh_invalid",video:"encryption_data"}}},x=[{label:"video-sw-decode",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/webm; codecs="opus"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="flac"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[{contentType:'video/webm; codecs="vp9"',robustness:"SW_SECURE_DECODE"},{contentType:'video/webm; codecs="vp8"',robustness:"SW_SECURE_DECODE"},{contentType:'video/mp4; codecs="avc1.4d401f"',robustness:"SW_SECURE_DECODE"},{contentType:'video/mp2t; codecs="avc1.4d401f"',robustness:"SW_SECURE_DECODE"}],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"video-sw-crypto",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/webm; codecs="opus"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="flac"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[{contentType:'video/webm; codecs="vp9"',robustness:"SW_SECURE_CRYPTO"},{contentType:'video/webm; codecs="vp8"',robustness:"SW_SECURE_CRYPTO"},{contentType:'video/mp4; codecs="avc1.4d401f"',robustness:"SW_SECURE_CRYPTO"},{contentType:'video/mp2t; codecs="avc1.4d401f"',robustness:"SW_SECURE_CRYPTO"}],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"video-no-robustness",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/webm; codecs="opus"',robustness:""},{contentType:'audio/mp4; codecs="flac"',robustness:""},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:""}],videoCapabilities:[{contentType:'video/webm; codecs="vp9"',robustness:""},{contentType:'video/webm; codecs="vp8"',robustness:""},{contentType:'video/mp4; codecs="avc1.4d401f"',robustness:""},{contentType:'video/mp2t; codecs="avc1.4d401f"',robustness:""}],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"audio-flac-sw-crypto",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="flac"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"audio-flac-no-robustness",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="flac"',robustness:""},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:""}],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"audio-sw-crypto",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"audio-no-robustness",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:""}],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]}];function F(e,t){var n,i;for(const r of e){const e={audioCapabilities:[],videoCapabilities:[]};let o,a=!1;if(null===(n=r.audioCapabilities)||void 0===n?void 0:n.length){a=!1;for(const n of r.audioCapabilities)o=n.contentType,o&&t(o)&&(e.audioCapabilities.push(n),a=!0)}if(null===(i=r.videoCapabilities)||void 0===i?void 0:i.length){a=!1;for(const n of r.videoCapabilities)o=n.contentType,o&&t(o)&&(e.videoCapabilities.push(n),a=!0)}if(a)return e}return null}const Y=/([^;]+)(?:;\s?codecs="(.*)")?/,B=d.P.forTag("playback.eme_manager"),K={EMPTY:"-no-robustness",SW_CRYPTO:"-sw-crypto",SW_DECODE:"-sw-decode",HW_CRYPTO:"-hw-crypto",HW_DECODE:"-hw-decode",HW_ALL:"-hw-all"};function H(e,t){var n;const i=[],r=new RegExp(`codecs="(${t.join("|")})"`);for(const o of e)r.test(null!==(n=o.contentType)&&void 0!==n?n:"")||i.push(o);return i.length?i:null}function G(e,{audio:t,video:n}){var i,r,o,a;if(!(null==t?void 0:t.length)&&!(null==n?void 0:n.length))return e;let{audioCapabilities:s,videoCapabilities:c}=e;return(null==t?void 0:t.length)&&(null===(i=e.audioCapabilities)||void 0===i?void 0:i.length)&&(s=null!==(r=H(e.audioCapabilities,t))&&void 0!==r?r:void 0,!s)||(null==n?void 0:n.length)&&(null===(o=e.videoCapabilities)||void 0===o?void 0:o.length)&&(c=null!==(a=H(e.videoCapabilities,n))&&void 0!==a?a:void 0,!c)?null:Object.assign(Object.assign({},e),{audioCapabilities:s,videoCapabilities:c})}class V extends u.vp{constructor(e){var t;super(),this._unauthServerCertificateBase="",this._disallowCodecs={},this._keySystemDeferred=(0,h.$)(),this._configuration=(0,h.$)(),this._keySystemSettings=null,this._keySessions=[],this._configs=[],this._pendingCertificateRequest=null,this._certificate=null,this._transport=e.transport,this._emeImpl=e.emeImpl,this._noServerCertificate=!!e.noServerCertificate,this._precacheServerCertificate=null===(t=e.precacheServerCertificate)||void 0===t||t,this._unauthServerCertificateBase=e.unauthServerCertificateBase||"https://spclient.wg.spotify.com",this._configFilter=function(e){const t=["--ensure-no-match--"];if(null==e?void 0:e.length){let n=e.length;for(;n--;){const i=e[n];i&&K.hasOwnProperty(i)&&t.push(K[i])}}return new RegExp(`(${t.join("|")})$`)}(e.disallowRobustnessValues||[]),this._disallowCodecs=e.disallowCodecs,this._preferredKeySystems=e.preferredKeySystems||[r.WIDEVINE,r.PLAYREADY,r.PLAYREADY_HARDWARE,r.FAIRPLAY]}static create(e){return new Promise((t=>{const n=M();if(!n)throw f.fatal(o.EME_API_NOT_SUPPORTED,"Platform does not support navigator.requestMediaKeySystemAccess");t(new V(Object.assign(Object.assign({},e),{emeImpl:n})).init())}))}_prepareConfiguration(e){const t=e.getConfiguration();B.info("KeySystem configured as ",t.label),t.audioCapabilities&&t.audioCapabilities.length||this._appendProbableMediaCapabilities(e.keySystem,t);const n={keySystem:e.keySystem,keySystemImpl:this._emeImpl,audioFormats:this._parseCapabilities(t.audioCapabilities),videoFormats:this._parseCapabilities(t.videoCapabilities)};return this._keySystemSettings=U[e.keySystem],this._configuration.resolve(n),n}_parseCapabilities(e){var t;if(!e)return[];const n=[];for(const i of e){if(!(null==i?void 0:i.contentType))continue;const[,e,r]=null!==(t=i.contentType.match(Y))&&void 0!==t?t:[];e&&n.push({contentType:i.contentType,mimeType:e,codec:null!=r?r:""})}return n}_appendProbableMediaCapabilities(e,t){const n=F(this._configs,(t=>(-1===t.indexOf("webm")||e!==r.PLAYREADY&&e!==r.PLAYREADY_HARDWARE)&&!!MediaSource.isTypeSupported(t)));n&&(t.audioCapabilities=n.audioCapabilities,t.videoCapabilities=n.videoCapabilities)}_trySetServerCertificate(e,t){const n=this._certificate;return(n&&n.expiry>Date.now()?Promise.resolve(n):this._requestServerCertificate(e)).then((e=>t.setServerCertificate(e.contents))).then((()=>this)).catch((e=>(B.warn("Error from setting server certificate",e),this)))}_cacheServerCertificate(e){let t="";switch(e){case r.FAIRPLAY:t="fairplay";break;case r.WIDEVINE:t="widevine";break;default:return Promise.resolve(this)}return this._requestServerCertificate(`${this._unauthServerCertificateBase}/${t}-license`,!1).then((()=>this),(e=>(B.warn("Cannot precache server certificate",e),this)))}_requestServerCertificate(e,t=!0){if(this._pendingCertificateRequest)return this._pendingCertificateRequest;return this._transport.request(`${e}/v1/application-certificate`,{authorize:t,responseType:"arraybuffer",parseResponseHeaders:!0,retry:{condition:(e,t)=>e.getStatusFamily()===t.SERVER_ERROR}}).then((e=>{var t;if(!e.body)throw new TypeError("Response body is invalid");this._pendingCertificateRequest=null;let n=3600;const i=null===(t=e.headers)||void 0===t?void 0:t.get("cache-control");if(i){const e=i.match(/(?:^|,|\s)max-age=(\d+)(?:,|$)/);e&&e[1]&&(n=1e3*parseInt(e[1],10))}return this._certificate={expiry:Date.now()+(n-600),contents:e.body},this._certificate}))}_extractPlayReadyChallenge(e,t){var n;let r=null;const a=new Uint16Array(e),s=String.fromCharCode.apply(null,a);if(-1===s.indexOf("PlayReadyKeyMessage"))return B.info("Using unextracted PlayReady message."),e;const c=(new DOMParser).parseFromString(s,"application/xml"),l=c.getElementsByTagName("Challenge")[0],d=null===(n=null==l?void 0:l.childNodes[0])||void 0===n?void 0:n.nodeValue;if(d)try{r=atob(d);const e=c.getElementsByTagName("name"),t=c.getElementsByTagName("value");if(e.length!==t.length)throw new f(o.EME_HEADER_KEY_VALUE_MISMATCH,"Mismatched header <name>/<value> pair in key message")}catch(u){this.emit(i.EME_LICENSE_REQUEST_ERROR,{playId:t,error:u}),r=null}else this.emit(i.EME_LICENSE_REQUEST_ERROR,{playId:t,error:new f(o.EME_HEADER_KEY_VALUE_MISMATCH,"Mismatched header <name>/<value> pair in key message")});return r}_onMessage(e,t){e.timeMap.generate.end=Date.now();let n="message"in t?t.message:null;const i="messageType"in t?t.messageType:void 0;if(B.info("Got EME message event with type",i),n&&e.keySystem===r.PLAYREADY&&(n=this._extractPlayReadyChallenge(n,e.playId)),!n)return void B.info("Ignoring message event: no valid request payload");if(!e.licenseServer)return void B.info("Ignoring message event: no licenseServer url");e.timeMap.request.start=Date.now();let o=e.licenseServer;e.keySystem===r.FAIRPLAY&&(o=`${o}${-1!==o.indexOf("?")?"&":"?"}assetId=hex`),this._transport.request(o,{method:"POST",payload:n,responseType:"arraybuffer",retry:{condition:(e,t)=>400!==e.status&&402!==e.status&&403!==e.status&&(!e.body||e.getStatusFamily()!==t.SUCCESS)}}).then(this._handleLicenseResponse.bind(this,e))}_handleLicenseResponse(e,t){const n=t=>{t.playId=e.playId,e.licenseServer&&(t.licenseServer=e.licenseServer),this.emit(i.EME_LICENSE_REQUEST_ERROR,{playId:e.playId,error:t})};let r,a;if(e.timeMap.request.end=Date.now(),200!==t.status){try{if(t.body){const e=new Uint8Array(t.body),n=String.fromCharCode.apply(String,e);a=JSON.parse(n).errorMsg}}catch(s){}402===t.status?this.emit(i.EME_LICENSE_REQUEST_CAPPED,{playId:e.playId,error:new E(o.CAPPING_USER_IS_CAPPED,"User is capped.")}):400===t.status&&"widevine error"===a?(r=f.fatal(o.EME_LICENSE_REQUEST_WIDEVINE_ERROR,"Widevine license server failed to parse request."),r.status=t.status,r.shouldRefreshEndpoint=!0,n(r)):(r=new f(o.EME_LICENSE_REQUEST_FAILED_WITH_STATUS,`License request failed (${a||"unknown"})`),r.status=t.status,r.shouldRefreshEndpoint=400===t.status||403===t.status,n(r))}else{if(!t.body)return r=new f(o.EME_LICENSE_REQUEST_EMPTY_RESPONSE,"Empty license response body"),r.status=t.status,void n(r);try{e.timeMap.update.start=Date.now(),e.keySession.update(t.body).catch((e=>{n(new f(o.EME_LICENSE_UPDATE_FAILED,e.message||"License update failed."))})),B.info("KeySession updated.")}catch(c){n(new f(o.EME_LICENSE_UPDATE_FAILED,c.message||"License update failed."))}}}_selectKeySystem(e){const t=this._preferredKeySystems;for(let n=0,i=t.length;n<i;n++){const i=t[n];if(i&&i in e)return e[i]}return null}_testMediaKeys(e){return new Promise((t=>{t(e.createMediaKeys())})).then((t=>{if(!t)return Promise.reject(f.fatal(o.EME_MEDIA_KEYS_NOT_SUPPORTED,"Cannot create MediaKeys from KeySystemAccess"));e.keySystem===r.FAIRPLAY&&t.setServerCertificate(new ArrayBuffer(0));try{if(!t.createSession())throw new Error("")}catch(n){return Promise.reject(f.fatal(o.EME_MEDIA_KEY_SESSION_NOT_SUPPORTED,n.message||"Cannot create MediaKeySession from KeySystemAccess"))}return Promise.resolve(e)}),(e=>(B.error(e.name),Promise.reject(f.fatal(o.EME_MEDIA_KEYS_NOT_SUPPORTED,e.message||"Unknown error")))))}_saveSession(e){this._keySessions.push(e)}destroySessions(){const e=[],t=this._keySessions;for(const r of t)try{const t=r.keySession;if(!t)continue;r.onMessageListener&&t.removeEventListener(i.KEY_SESSION_MESSAGE,r.onMessageListener),r.onKeyStatusChangeListener&&t.removeEventListener(i.KEY_SESSION_STATUSES_CHANGE,r.onKeyStatusChangeListener);const n=Promise.resolve(t.close()).catch((e=>{B.warn("Failed to close KeySession",e)}));e.push(n),r.keySession=null,r.onMessageListener=null,r.onKeyStatusChangeListener=null,B.info("Closed KeySession")}catch(n){B.warn("Failed to close KeySession",n)}return this._keySessions=[],Promise.all(e)}init(){const e=this._keySystemDeferred,t={},n=[],i=[];for(let r of x)if(!r.label||!this._configFilter.test(r.label)){if(this._disallowCodecs){const e=G(r,this._disallowCodecs);if(!e)continue;r=e}i.push(r)}this._configs=i;for(const o in r){if(!Object.prototype.hasOwnProperty.call(r,o))continue;const e=o;n.push(navigator.requestMediaKeySystemAccess(r[e],i).then((e=>{t[e.keySystem]=e})).catch((()=>{})))}return Promise.all(n).then(this._selectKeySystem.bind(this,t)).then((e=>e?this._testMediaKeys(e):Promise.reject(new f(o.EME_NO_SUPPORTED_KEYSYSTEM,"No supported keysystem was found.")))).then((t=>(this._prepareConfiguration(t),e.resolve(t),this._precacheServerCertificate?this._cacheServerCertificate(t.keySystem):this))).catch((t=>{const n=t.code||o.EME_NO_SUPPORTED_KEYSYSTEM,i=t.message||"No supported keysystem";return e.reject(f.fatal(n,i)),e.promise.then((()=>this))}))}createMediaKeys(e){return this._keySystemDeferred.promise.then((e=>e.createMediaKeys())).then((t=>Promise.all([e.setMediaKeys(t),t]))).then((([t,n])=>{if(!e.mediaKeys)throw new f(o.EME_PLAYER_MEDIA_KEYS_SETTING_FAILED,"Failed to set MediaKeys on HTMLMediaElement");return this._configuration.promise.then((()=>{const e=this._keySystemSettings;return e&&!this._noServerCertificate&&e.withCertificate?this._trySetServerCertificate(e.licenseServer,n):this}))}))}removeMediaKeys(e){return Promise.resolve(e.setMediaKeys(null)).then((()=>this))}getKeySystemInfo(){return this._configuration.promise}getKeySystemImpl(){return this._emeImpl}createSessionWithParams(e){return new Promise(((t,n)=>{B.info("Creating KeySession",e.keySystem);const r=e.mediaKeys.createSession(),a={generate:{start:0,end:0},request:{start:0,end:0},update:{start:0,end:0}},s=this._keySystemSettings&&this._keySystemSettings.licenseServer||void 0,c=this._onMessage.bind(this,{keySystem:e.keySystem,keySession:r,licenseServer:e.licenseServer||s,playId:e.playId,timeMap:a});r.addEventListener(i.KEY_SESSION_MESSAGE,c);const l=()=>{B.info("KeyStatus change"),a.update.end=Date.now(),t({elapsed:{generate:Math.max(a.generate.end-a.generate.start,0),request:Math.max(a.request.end-a.request.start,0),update:Math.max(a.update.end-a.update.start,0)}})};return r.addEventListener(i.KEY_SESSION_STATUSES_CHANGE,l),this._saveSession({keySession:r,onMessageListener:c,onKeyStatusChangeListener:l}),B.info("Generating KeySession request",e.keySystem),a.generate.start=Date.now(),Promise.resolve(r.generateRequest(e.initDataType,e.initData.buffer)).catch((e=>{if(!e)return;let t;switch(e.name){case"NotSupportedError":t=o.EME_NOT_SUPPORTED_ERROR;break;case"InvalidStateError":t=o.EME_INVALID_STATE_ERROR;break;default:t=o.EME_UNKNOWN_ERROR}n(new f(t,e.message||"Unknown error message."))}))}))}}var j=n(1165);class W extends Error{constructor(e=o.STORAGE_ERROR,t="File Error"){super(t),this.canPlayNext=!0,this.debug={},this.code=e,this.message=t,this.name="FileError"}}class q extends Error{constructor(e,t,n,i={}){super(t),this.code=e,this.message=t,this.status=n,this.debug=i,this.name="FragmentError"}}class z{constructor(e){if(this._fallbackURLs=[],this._fragments=[],this._loaded=!1,this._mediaType="audio",this._resolvedURLs=[],this._segmentLength=0,this._duration=0,!e.fileId&&!e.resolvedURL)throw new TypeError("Missing: provide either fileId or resolvedURL");this._abrManager=e.abrManager,this._mediator=e.mediator,this._disableCache=e.disableCache,this._fileId=e.fileId,this._format=e.format,this._isAd=e.isAd||!1,this._keySystem=e.keySystem,this._keySystemSettings=U[this._keySystem],this._licenseEndpoint=e.licenseEndpoint,this._logData=e.logData||{displayTrack:"",playbackId:""},this._resolver=e.resolver,this._resolvedURL=e.resolvedURL,this._transport=e.transport,this._uri=e.uri}_parsePSSHBox(e){const t=j.DS.decode(e),n=new Uint8Array(t.length);for(let i=0,r=t.length;i<r;i++)n[i]=t.charCodeAt(i);return n}_parseAssetID(e){const t=j.DS.decode(e),n=new Array(t.length);for(let i=0,r=t.length;i<r;i++){const e=t.charCodeAt(i).toString(16);n[i]=1===e.length?`0${e}`:e}return n.join("")}getCalculatedDuration(){return this._duration}getFileId(){return this._fileId}getFormat(){return this._format||""}getFragmentLength(){return this._segmentLength}getInitFragment(){return this._initFragment}getInitParams(){const e={keySystem:this._keySystem,initDataType:this._protection,initData:this._psshBox,licenseServer:null};return Promise.resolve(e)}getKeySystem(){return this._keySystem}getLicenseEndpoint(){return this._licenseEndpoint}getLogData(){return this._logData||{}}getMediaType(){return this._mediaType}getResolvedURL(){return this._resolvedURL}getResolvedURLs(){return this._resolvedURLs}getHLSURL(){throw new W(o.FILE_NOT_RESOLVED,"Cannot return HLS Manifest URL: File not resolved.")}getURI(){return this._uri}isAd(){return this._isAd}isProtected(){return!!this._protection&&!!this._psshBox}setLogData(e){return this._logData=e,this}toLogJSON(){return{uri:this._uri,fileId:this._fileId,format:this._format||"",resolved_url:this._resolvedURL}}}function Q(e){const t=function(e){var t;const n=function(e){return e.map((e=>{if(e.byteEnd&&void 0!==e.byteStart){let t=""+(1+e.byteEnd-e.byteStart);return t+=`@${e.byteStart}`,`#EXTINF:${e.duration},\n#EXT-X-BYTERANGE:${t}\n${e.url}`}return`#EXTINF:${e.duration},\n${e.url}`})).join("\n")}(e.segments),i=e.assetID?`#EXT-X-KEY:METHOD=SAMPLE-AES,URI="skd://${e.assetID}",KEYFORMATVERSIONS="1",KEYFORMAT="com.apple.streamingkeydelivery"`:"";let r=e.map?`#EXT-X-MAP:URI="${e.map.url}"`:"";return(null===(t=e.map)||void 0===t?void 0:t.byteEnd)&&void 0!==e.map.byteStart&&(r+=`,BYTERANGE="${1+e.map.byteEnd}@${e.map.byteStart}"`),`#EXTM3U\n#EXT-X-VERSION:6\n#EXT-X-TARGETDURATION:${Math.floor(e.targetDuration)}\n#EXT-X-MEDIA-SEQUENCE:0\n#EXT-X-PLAYLIST-TYPE:VOD\n${r?`${i}\n${r}`:i}\n${n}\n#EXT-X-ENDLIST`}(e);return function(e){return`data:application/vnd.apple.mpegurl;base64,${j.DS.encode(e)}`}(t)}const Z=/avc1\.(([0-9a-f]{2})[0-9a-f]{2}([0-9a-f]{2}))/;function $(e,t){const n=e.toLowerCase().match(Z),i=t.toLowerCase().match(Z);if(!n||!i)return!1;const[,r,o,a]=n,[,s,c,l]=i;return r===s||"4d"===o&&"4d"===c&&parseInt(a,16)>=parseInt(l,16)}function X(e,t){return e.sort(((e,n)=>"video_bitrate"in e&&"video_bitrate"in n?t?e.video_resolution===n.video_resolution?e.video_bitrate-n.video_bitrate:e.video_resolution-n.video_resolution:e.video_bitrate-n.video_bitrate:e.max_bitrate-n.max_bitrate))}function J(e,t){return void 0!==t&&Array.isArray(e.encryption_indices)&&-1===e.encryption_indices.indexOf(t)}function ee(e,t){if(!t)return!1;return t(Object.assign({mimeType:e.mime_type},function(e){return"video_codec"in e}(e)?{type:"video",codec:e.video_codec,bitrate:e.video_bitrate,height:e.video_height,width:e.video_width}:{type:"audio",codec:e.audio_codec,bitrate:e.audio_bitrate}))}function te(e){return"audio_codec"in e?e.audio_codec:e.video_codec}function ne({codec:e,formats:t,profiles:n,encryptionIndex:i,disallowProfile:o,preferredKeySystem:a,preferredVideoResolution:s}){for(const c of t){const t=[];let l="spotify/unknown-mimetype",d="unknown-codec";for(const s of n){const n=te(s);!(e in s)||J(s,i)||a===r.FAIRPLAY&&"ts"!==s.file_type||ee(s,o)||(a!==r.FAIRPLAY||"ts"!==s.file_type?n===d&&s.mime_type===l?t.push(s):s.mime_type===c.mimeType&&(n===c.codec||"unknown-codec"===d&&$(c.codec,n))&&(l=s.mime_type,d=n,t.push(s)):t.push(s))}if(t.length)return X(t,s)}return[]}const ie=d.P.forTag("playback.video_content");function re(e){if(!e)return"";const t="audio_codec"in e?e.audio_codec:e.video_codec;return`${e.mime_type};codecs="${t}"`}const oe={method:"GET",responseType:"arraybuffer",timing:!0,retry:{condition:(e,t)=>{if(0===e.status)return!0;const n=e.getStatusFamily();return n===t.CONNECTION_ERROR||n===t.SERVER_ERROR}}};class ae extends z{constructor(e){super(e),this._assetId="",this._endTime=0,this._videoFormats=[],this._audioFormats=[],this._subtitleLanguages=[],this._videoProfile=null,this._videoProfiles=[],this._audioProfile=null,this._audioProfiles=[],this._baseURL="",this._initTemplate="",this._segmentTemplate="",this._subtitleTemplate="",this._initSegments={},this._initTemplate="",this._isAd=e.isAd||!1,this._mediaType="video",this._resolver=e.resolver,this._videoFormats=e.videoFormats,this._audioFormats=e.audioFormats,this._disallowProfile=e.disallowProfile,this._videoResolution=e.videoResolution,this._keySystem===r.FAIRPLAY&&this._audioFormats.unshift({mimeType:"audio/mp2t",codec:"mp4a.40.2"}),this._parseFragmentResponse=this._parseFragmentResponse.bind(this)}static create(e){return new ae(e)}_isQualityMatched(e,t,n){var i,r,o,a;if(this._videoResolution){const t=null!==(i=this._videoResolution.max)&&void 0!==i?i:Number.MAX_SAFE_INTEGER,a=null!==(r=this._videoResolution.min)&&void 0!==r?r:0;if(n){const n=null!==(o=this._videoResolution.start)&&void 0!==o?o:t;return e.video_resolution<=n}return e.video_resolution>=a&&e.video_resolution<=t}const s=null!==(a=null==t?void 0:t.max_bitrate)&&void 0!==a?a:0,c=this._abrManager.getBandwidthEstimate();return e.max_bitrate+s<c-1e5}_updateVariants(e){var t;const n=this._audioProfiles[0];this._audioProfile=null!=n?n:null;const i=this._videoProfiles,r=this._videoProfile;let o=null,a=i.length;if(a){for(;a--;){const t=i[a];if(t&&this._isQualityMatched(t,n,!!e)){o=t;break}}o||(o=i[0]),this._videoProfile=o,(null==r?void 0:r.id)!==o.id&&(null===(t=this._mediator)||void 0===t||t.emit(c.VIDEO_PROFILE_CHANGED,{profile:{type:"video",mimeType:o.mime_type,codec:o.video_codec,bitrate:o.video_bitrate,height:o.video_height,width:o.video_width}}))}}_constructFragmentURL(e,t,n){if(!t&&!n)throw new Error("Both audioProfile and videoProfile is null");return e.init?this._resolver.getInitSegmentURLs(this._baseURL,this._initTemplate,t,n):this._resolver.getSegmentURLs(this._baseURL,this._segmentTemplate,e.timeStart,t,n)}_fetchBufferData(e,t,n,i){return this._transport.request(e,Object.assign(Object.assign({},oe),{metadata:{timeStart:Date.now(),fragment:t,profile:n,loggingURL:i}})).then(this._parseFragmentResponse)}_fetchInitSegmentBuffers(e,t){const n=this._initFragment;if(!n)return Promise.reject(new W(o.FILE_NOT_RESOLVED,"Cannot fetch Init Segment buffers: File not resolved."));let i;try{i=this._constructFragmentURL(n,e,t)}catch(c){return Promise.reject(c)}const r=this._initSegments;let a=Promise.resolve(null);if(e){const t=r[e.id];(null==t?void 0:t.buffer.byteLength)?a=Promise.resolve(t):(null==i?void 0:i.audio)&&(a=this._fetchBufferData(i.audio,n,e,i.audioLogging).then((t=>(r[e.id]=t,t))))}let s=Promise.resolve(null);if(t){const e=r[t.id];(null==e?void 0:e.buffer.byteLength)?s=Promise.resolve(e):(null==i?void 0:i.video)&&(s=this._fetchBufferData(i.video,n,t,i.videoLogging).then((e=>(r[t.id]=e,e))))}return Promise.all([a,s]).then((([e,t])=>({audio:e,video:t})))}_fetchBufferForFragment(e,t,n){let i;try{i=this._constructFragmentURL(e,t,n)}catch(r){return Promise.reject(r)}return Promise.all([this._fetchInitSegmentBuffers(t,n),!e.init&&i.audio?this._fetchBufferData(i.audio,e,t,i.audioLogging):null,!e.init&&i.video?this._fetchBufferData(i.video,e,n,i.videoLogging):null]).then((([t,n,i])=>{var r,o;let a;return e.init?a={audio:null!==(r=t.audio)&&void 0!==r?r:void 0,video:null!==(o=t.video)&&void 0!==o?o:void 0}:(a={audio:null!=n?n:void 0,video:null!=i?i:void 0},e.cacheBufferSet&&(e.bufferSet=a),a.audio&&(null==t?void 0:t.audio)&&(a.audio.initBuffer=t.audio.buffer),a.video&&(null==t?void 0:t.video)&&(a.video.initBuffer=t.video.buffer)),a})).catch((e=>Promise.reject(e)))}_parseFragmentResponse(e){var t,n,i,r;const{fragment:a,profile:s,timeStart:l,loggingURL:d}=e.metadata,u=re(s),_=function(e){return e?"audio_bitrate"in e?e.audio_bitrate:e.video_bitrate:0}(s),p="video_resolution"in s?s.video_resolution:void 0,h=`${a.timeStart}-${a.timeEnd}`,f="video_resolution"in s?"video":"audio";switch(e.status){case 0:{const e=new q(o.FRAGMENT_REQUEST_FAILED_WITH_ZERO,"Request failed with status 0.",0,{time_range:h,mimetype:u,resolution:p,bitrate:_});return null===(t=this._mediator)||void 0===t||t.emit(c.FRAGMENT_FETCH_ERROR,{media_type:"video",segment_type:f,url:d,start_time:l,init:a.init,error:e}),Promise.reject(e)}case 200:case 206:{const t=e.body;if(!(null==t?void 0:t.byteLength)){const t=new q(o.FRAGMENT_REQUEST_EMPTY_RESPONSE,"Empty response for successful buffer.",e.status,{time_range:h,mimetype:u,resolution:p,bitrate:_});return null===(n=this._mediator)||void 0===n||n.emit(c.FRAGMENT_FETCH_ERROR,{media_type:"video",segment_type:f,url:d,start_time:l,init:a.init,error:t}),Promise.reject(t)}const r=t.byteLength;return this._abrManager.sample(r,Date.now()-l),this._updateVariants(),null===(i=this._mediator)||void 0===i||i.emit(c.FRAGMENT_FETCHED,{media_type:"video",segment_type:f,url:d,init:a.init,byte_length:r,start_time:l,end_time:Date.now()}),Promise.resolve({profileId:`${this._fileId}-${s.id}`,bufferURL:d,buffer:t,byteStart:0,byteEnd:r-1,mimetype:u,resolution:p,bitrate:_,bandwidth:8e3*r/e.timing.completed})}}const E=new q(o.FRAGMENT_REQUEST_FAILED_WITH_STATUS,`Buffer request failed with status ${e.status}`,e.status,{time_range:h,mimetype:u,resolution:p,bitrate:_});return null===(r=this._mediator)||void 0===r||r.emit(c.FRAGMENT_FETCH_ERROR,{media_type:"video",segment_type:f,url:d,init:a.init,start_time:l,error:E}),Promise.reject(E)}_getHLSURLForProfile(e){const t=this._duration,n=this._segmentLength,i=this._segmentTemplate,r=[];for(let o=0;o<t;o+=n){const a=o+n>t?t-o:n,s=i.replace("{{profile_id}}",e.id.toString(10)).replace("{{segment_timestamp}}",o.toString(10)).replace("{{file_type}}",e.file_type);r.push({duration:a,url:`${this._baseURL}${s}`})}return Q({assetID:this._assetId,targetDuration:n,segments:r})}_calculateFragments(e){this._duration=e.end_time_millis/1e3;const t=this._segmentLength;this._initFragment={init:!0,cacheBufferSet:!1,timeStart:-1,timeEnd:-1,byteRanges:{}};for(let n=0;n<this._duration;n+=t)this._fragments.push({cacheBufferSet:!n&&!this._disableCache,timeStart:n,timeEnd:n+t,byteRanges:{}})}setVideoResolution(e){this._videoResolution=Object.assign(Object.assign({},this._videoResolution),e),this._updateVariants()}getCurrentBitrate(){var e,t;return null!==(t=null===(e=this._videoProfile)||void 0===e?void 0:e.video_bitrate)&&void 0!==t?t:0}getBufferForFragment(e){var t;if(!e)return Promise.reject(new TypeError("No fragment provided"));const n=this._audioProfile,i=this._videoProfile;return e.bufferSet&&(!i||(null===(t=e.bufferSet.video)||void 0===t?void 0:t.resolution)&&e.bufferSet.video.resolution>=i.video_resolution)?Promise.resolve(e.bufferSet):this._fetchBufferForFragment(e,null!=n?n:void 0,null!=i?i:void 0)}clearCachedBuffers(){this._initFragment&&(this._initSegments={}),this._fragments.forEach((function(e){e.bufferSet=null}))}getDuration(){return this._endTime}getFragmentAfterTime(e){var t;if(!(null===(t=this._fragments)||void 0===t?void 0:t.length))return null;if(0===e||.01===e)return this._fragments[1];for(const n of this._fragments)if(n.timeStart>e)return n;return null}getFragmentForTime(e){var t;if(!(null===(t=this._fragments)||void 0===t?void 0:t.length))return null;if(0===e||.01===e)return this._fragments[0];for(const n of this._fragments)if(n.timeStart<=e&&n.timeEnd>=e)return n;return null}getSubtitleLanguages(){return this._subtitleLanguages}getSubtitles(){return this._subtitleLanguages.map((e=>({lang:e,url:this._subtitleTemplate.replace("{{language_code}}",e)})))}load(e={resolveLatency:0,manifestLatency:0}){if(this._loaded)return e.resolveLatency=0,e.manifestLatency=0,Promise.resolve(this);if(!this._fileId)throw new TypeError("Missing: provide either fileId or resolvedURL");const t=Date.now();return this._resolver.getManifest(this._fileId).then((n=>{var i,r,a;let s;e.resolveLatency=0,e.manifestLatency=Date.now()-t;const l=n.contents[0];if(!l)return s=new W(o.FILE_MALFORMED_SEEKTABLE,"Malformed seektable: no contents."),s.track=this.toLogJSON(),Promise.reject(s);let d;if(this._resolvedURLs=n.base_urls.slice(),this._baseURL=n.base_urls.shift()||"",this._resolvedURL=this._baseURL,this._fallbackURLs=n.base_urls,this._initTemplate=n.initialization_template,this._segmentTemplate=n.segment_template,this._segmentLength=l.segment_length,null===(i=l.encryption_infos)||void 0===i?void 0:i.length){const e=l.encryption_infos,t=this._keySystemSettings.commonName;let n;for(let i=0,r=e.length;i<r;i++){const r=e[i];if(r&&r.key_system===t){d=i,n=r[this._keySystemSettings.pssh_field.video];break}}if(!n)return s=new W(o.FILE_FORMAT_NOT_SUPPORTED,"KeySystem does not support the file format."),s.track=this.toLogJSON(),Promise.reject(s);switch(this._keySystemSettings.commonName){case"widevine":case"playready":this._protection="cenc";try{this._psshBox=this._parsePSSHBox(n)}catch(u){return s=new W(o.FILE_MALFORMED_PSSH,"Invalid PSSH value."),s.track=this.toLogJSON(),Promise.reject(s)}break;case"fairplay":this._protection="hls",this._psshBox=new Uint8Array([]);try{this._assetId=this._parseAssetID(n)}catch(u){return s=new W(o.FILE_MALFORMED_PSSH,"Invalid PSSH value."),s.track=this.toLogJSON(),Promise.reject(s)}break;default:return s=new W(o.FILE_FORMAT_NOT_SUPPORTED,"KeySystem does not support the file format."),s.track=this.toLogJSON(),Promise.reject(s)}}return this._endTime=n.end_time_millis,this._videoProfiles=ne({codec:"video_codec",formats:this._videoFormats,profiles:l.profiles,encryptionIndex:d,disallowProfile:this._disallowProfile,preferredKeySystem:this._keySystem,preferredVideoResolution:this._videoResolution}),this._audioProfiles=ne({codec:"audio_codec",formats:this._audioFormats,profiles:l.profiles,encryptionIndex:d,preferredKeySystem:this._keySystem}),this._updateVariants(!0),this._calculateFragments(n),this._subtitleLanguages=n.subtitle_language_codes||[],null===(r=this._mediator)||void 0===r||r.emit(c.SUBTITLE_LANGUAGES_LOADED,{languages:this._subtitleLanguages}),(null===(a=n.subtitle_base_urls)||void 0===a?void 0:a.length)&&n.subtitle_template?this._subtitleTemplate=`${n.subtitle_base_urls[0]}${n.subtitle_template}`:(ie.info("No subtitles available"),this._subtitleTemplate=""),this}))}adaptToBandwidth(){return this._updateVariants(),Promise.resolve(!0)}getResolveLatency(){}getPlayableCodecs(){var e,t;return[re(null!==(e=this._audioProfile)&&void 0!==e?e:void 0),re(null!==(t=this._videoProfile)&&void 0!==t?t:void 0)].filter((e=>!!e))}getAudioProfile(){return this._audioProfile}getVideoProfile(){return this._videoProfile}getVideoProfiles(){return this._videoProfiles}getHLSURL(){if(!this._resolvedURL)throw new W(o.FILE_NOT_RESOLVED,"Cannot return HLS Manifest URL: File not resolved.");const e=[],t=this._audioProfiles[0];t&&e.push(`#EXT-X-MEDIA:TYPE=AUDIO,GROUP-ID="audio",LANGUAGE="eng",NAME="English",AUTOSELECT=YES,URI="${this._getHLSURLForProfile(t)}"`);for(const i of this._videoProfiles)e.push(`#EXT-X-STREAM-INF:BANDWIDTH=${i.max_bitrate},RESOLUTION=${i.video_width}x${i.video_height},CODECS="${(null==t?void 0:t.audio_codec)?`mp4a.40.2, ${i.video_codec}`:i.video_codec}"${(null==t?void 0:t.audio_codec)?',AUDIO="audio"':""}\n${this._getHLSURLForProfile(i)}`);const n=`#EXTM3U\n${e.join("\n")}`;return`data:application/vnd.apple.mpegurl;base64,${j.DS.encode(n)}`}}var se;!function(e){e[e.MP3_256=3]="MP3_256",e[e.MP3_320=4]="MP3_320",e[e.MP3_160=5]="MP3_160",e[e.MP3_96=6]="MP3_96",e[e.MP4_128=10]="MP4_128",e[e.MP4_256=11]="MP4_256",e[e.MP4_128_DUAL=12]="MP4_128_DUAL",e[e.MP4_256_DUAL=13]="MP4_256_DUAL",e[e.MP4_128_CBCS=14]="MP4_128_CBCS",e[e.MP4_256_CBCS=15]="MP4_256_CBCS",e[e.MP4_FLAC=17]="MP4_FLAC"}(se||(se={}));const ce={[se.MP3_256]:"audio/mp3",[se.MP3_320]:"audio/mp3",[se.MP3_160]:"audio/mp3",[se.MP3_96]:"audio/mp3",[se.MP4_128]:'audio/mp4; codecs="mp4a.40.2"',[se.MP4_256]:'audio/mp4; codecs="mp4a.40.2"',[se.MP4_128_DUAL]:'audio/mp4; codecs="mp4a.40.2"',[se.MP4_256_DUAL]:'audio/mp4; codecs="mp4a.40.2"',[se.MP4_128_CBCS]:'audio/mp4; codecs="mp4a.40.2"',[se.MP4_256_CBCS]:'audio/mp4; codecs="mp4a.40.2"',[se.MP4_FLAC]:'audio/mp4; codecs="flac"'};class le extends z{constructor(e){if(super(e),this._lastResolveTimestamp=0,this._profileId=`${Date.now()}`,this._initBufferPromise=null,this._lastFetchedBuffer=null,this._bypassResolve=!!this._resolvedURL,this._emitWarning=e.emitWarning||function(){},this._mediaType="audio",this._noManifest=!!e.noManifest,this._preloadedManifest=e.preloadedManifest,this._resolver=e.resolver,this._segmentLength=0,this._fileFormat=e.fileFormat,this._fileFormat)this._audioCodec=ce[this._fileFormat];else switch(this._format){case s.MP3:this._audioCodec=ce[se.MP3_160];break;case s.MP4:case s.MP4_DUAL:case s.MP4_CBCS:this._audioCodec=ce[se.MP4_128];break;default:throw new TypeError(`Unknown audio format ${this._format}`)}this._fileId&&(this._profileId=this._fileId),this._parseFragmentResponse=this._parseFragmentResponse.bind(this)}static create(e){return new le(e)}_parseFragmentResponse(e){const{requestURL:t,fragment:n,byteRangeHeader:i,expectedLength:r}=e.metadata,a=`${n.timeStart}-${n.timeEnd}`;switch(e.status){case 0:{if(e.offline)return Promise.reject(new q(o.FRAGMENT_OFFLINE_REQUEST_FAILED_WITH_ZERO,"Request failed with status 0.",0,{time_range:a,byte_range:i}));const r=new q(o.FRAGMENT_ONLINE_REQUEST_FAILED_WITH_ZERO,"Request failed with status 0.",0);let s=!1;return this._resolvedURL!==t?s=!0:this._fallbackURLs.length&&this._resolvedURL===t&&(s=!0,this._resolvedURL=this._fallbackURLs.shift()),r.debug.has_fallback=s,s?(this._emitWarning(r,this.toLogJSON()),this.getBufferForFragment(n)):Promise.reject(r)}case 200:case 206:{const s=e.body;if(!s)return Promise.reject(new q(o.FRAGMENT_REQUEST_EMPTY_RESPONSE,"Empty response for successful buffer.",e.status,{time_range:a,byte_range:i}));if(s.byteLength!==r)return Promise.reject(new q(o.FRAGMENT_REQUEST_UNEXPECTED_LENGTH,"Received buffer of unexpected length.",e.status,{time_range:a,byte_range:i,received_length:s.byteLength,expected_length:r}));const c={audio:{profileId:this._profileId,bufferURL:t,byteStart:n.byteRanges.audio.start,byteEnd:n.byteRanges.audio.end,buffer:s,mimetype:this._audioCodec,bandwidth:8e3*s.byteLength/e.timing.completed}};if(n.cacheBufferSet&&s&&s.byteLength){n.bufferSet=c;const e=n.sliceInto;if(null==e?void 0:e.length)for(const t of e){const e=t.fragment;(null==e?void 0:e.cacheBufferSet)&&(e.bufferSet={audio:Object.assign(Object.assign({},c.audio),{buffer:s.slice(t.start,t.end),byteStart:e.byteRanges.audio.start,byteEnd:e.byteRanges.audio.end})})}}return this._abrManager.sample(s.byteLength,e.timing.completed),Promise.resolve(c)}case 403:return this.resolve().then((()=>this.getBufferForFragment(n)));default:{let r=!1;return this._resolvedURL!==t?r=!0:this._fallbackURLs.length&&this._resolvedURL===t&&(r=!0,this._resolvedURL=this._fallbackURLs.shift()),r?this.getBufferForFragment(n):Promise.reject(new q(o.FRAGMENT_REQUEST_FAILED_WITH_STATUS,`Buffer request failed with status ${e.status}`,e.status,{time_range:a,byte_range:i}))}}}_getInitBuffer(){var e,t;if(!this._initFragment)throw new W(o.FILE_NOT_RESOLVED,"Cannot return HLS Manifest URL: File not resolved.");return(null===(t=null===(e=this._initFragment.bufferSet)||void 0===e?void 0:e.audio)||void 0===t?void 0:t.buffer.byteLength)?Promise.resolve(this._initFragment.bufferSet.audio.buffer):(this._initBufferPromise||(this._initBufferPromise=this.getBufferForFragment(this._initFragment).then((e=>{var t;if(!(null===(t=e.audio)||void 0===t?void 0:t.buffer.byteLength))throw new Error("Empty initialization segment buffer");return e.audio.buffer}))),this._initBufferPromise)}_calculateFragments(e){let t=e.offset;this._initFragment={init:!0,cacheBufferSet:!this._disableCache,timeStart:0,timeEnd:0,byteRanges:{audio:{start:0,end:t-1}}};const n=e.segments,i=e.timescale,r=n.length,o=new Array(r);let a=0,s=0;for(let c=0,l=r;c<l;c++){const e=n[c];if(!(null==e?void 0:e.length))continue;const[r,l]=e,d=l/i,u={init:!1,cacheBufferSet:!c&&!this._disableCache,timeStart:a,timeEnd:a+d,byteRanges:{audio:{start:t,end:t+(r-1)}}};o[c]=u,t+=r,s+=l,a+=d,Math.floor(d)>this._segmentLength&&(this._segmentLength=Math.floor(d))}o[o.length-1].isLastFragment=!0,this._fragments=o,this._duration=s/i}_calculateFragmentsV1(e){let t=e.offset;this._initFragment={init:!0,cacheBufferSet:!this._disableCache,timeStart:0,timeEnd:0,byteRanges:{audio:{start:0,end:t-1}}};const n=e.references,i=e.timescale,r=n.length,o=new Array(r);let a=0,s=0;for(let c=0,l=r;c<l;c++){const e=n[c];if(!e)continue;const r=e.duration/i,l={init:!1,cacheBufferSet:!c&&!this._disableCache,timeStart:s,timeEnd:s+r,byteRanges:{audio:{start:t,end:t+(e.size-1)}}};o[c]=l,t+=e.size,a+=e.duration,s+=r,Math.floor(r)>this._segmentLength&&(this._segmentLength=Math.floor(r))}o[o.length-1].isLastFragment=!0,this._fragments=o,this._duration=a/i}_getManifest(e){if(this._noManifest)return e&&(e.manifestLatency=0),Promise.resolve(null);if(this._preloadedManifest)return e&&(e.manifestLatency=0),Promise.resolve(this._preloadedManifest);if(!this._fileId)throw new TypeError("Missing: fileId");const t=Date.now();return this._resolver.getManifest(this._fileId).then((function(n){return e&&(e.manifestLatency=Date.now()-t),n}))}getHLSURL(){var e,t;const n=this._resolvedURL,i=this._initFragment;if(!n||!i)throw new W(o.FILE_NOT_RESOLVED,"Cannot return HLS Manifest URL: File not resolved.");const r={url:n,byteStart:null===(e=i.byteRanges.audio)||void 0===e?void 0:e.start,byteEnd:null===(t=i.byteRanges.audio)||void 0===t?void 0:t.end},a=this._fragments.map((e=>{var t,i;return{url:n,duration:e.timeEnd-e.timeStart,byteStart:null===(t=e.byteRanges.audio)||void 0===t?void 0:t.start,byteEnd:null===(i=e.byteRanges.audio)||void 0===i?void 0:i.end}}));return Q({assetID:this._fileId,targetDuration:10,map:r,segments:a})}clearCachedBuffers(){this._headFragment&&delete this._headFragment,this._initFragment&&(this._initFragment.bufferSet=null),this._fragments[0]&&(this._fragments[0].bufferSet=null),this._lastFetchedBuffer=null}getPlayableCodecs(){return[this._audioCodec]}getFirstFragment(){var e;return null!==(e=this._fragments[0])&&void 0!==e?e:null}getHeadFragment(){const e=this._initFragment,t=this._fragments[0];if(!(null==e?void 0:e.byteRanges.audio)||!(null==t?void 0:t.byteRanges.audio))throw new W(o.FILE_NOT_RESOLVED,"Cannot return HLS Manifest URL: File not resolved.");return this._headFragment||(this._headFragment={init:!0,cacheBufferSet:!0,timeStart:0,timeEnd:0,byteRanges:{audio:{start:e.byteRanges.audio.start,end:t.byteRanges.audio.end}},sliceInto:[{fragment:e,start:0,end:t.byteRanges.audio.start},{fragment:t,start:t.byteRanges.audio.start,end:void 0}]}),this._headFragment}getFragmentAfterTime(e){var t,n;if(!(null===(t=this._fragments)||void 0===t?void 0:t.length))return null;if(0===e||.01===e)return null!==(n=this._fragments[1])&&void 0!==n?n:null;for(const i of this._fragments)if(i.timeStart>e)return i;return null}getFragmentForTime(e){var t,n;if(!(null===(t=this._fragments)||void 0===t?void 0:t.length))return null;if(0===e||.01===e)return null!==(n=this._fragments[0])&&void 0!==n?n:null;for(const i of this._fragments)if(i.timeStart<=e&&i.timeEnd>=e)return i;return null}getBufferForFragment(e){var t;if(!e)return Promise.reject(new Error("FIXME: error type?"));if((null===(t=this._lastFetchedBuffer)||void 0===t?void 0:t.fragment)===e)return Promise.resolve(this._lastFetchedBuffer.bufferSet);if(e.bufferSet)return Promise.resolve(e.bufferSet);if(!this._resolvedURL)return Promise.reject(new W(o.FILE_NOT_RESOLVED,"Cannot fetch buffer: No resolved URL"));const n=e.byteRanges.audio,i=`${n.start}-${n.end}`,r=n.end+1-n.start,a=this._resolvedURL,s=e.init?Promise.resolve(null):this._getInitBuffer();return Promise.all([s,this._transport.request(a,{method:"GET",responseType:"arraybuffer",headers:{Range:`bytes=${i}`},timing:!0,metadata:{requestURL:a,fragment:e,byteRangeHeader:i,expectedLength:r},retry:{condition:(e,t)=>{if(0===e.status)return e.offline;const n=e.getStatusFamily();return n===t.CONNECTION_ERROR||n===t.SERVER_ERROR||!(n!==t.SUCCESS||!e.body)&&e.body.byteLength!==r}}}).then(this._parseFragmentResponse)]).then((([t,n])=>(t&&n.audio&&(n.audio.initBuffer=t),this._lastFetchedBuffer={fragment:e,bufferSet:n},n)))}resolve(e){const t=this._fileId;if(this._bypassResolve)return e&&(e.resolveLatency=0),Promise.resolve({uri:this._resolvedURL,uris:[],protection:this._preloadedManifest||!this._noManifest?"cenc":void 0});if(!t)throw new TypeError("Missing: fileId is required to resolve content URL");clearTimeout(this._lastResolveToken);const n=()=>(this._lastResolveTimestamp=Date.now(),this._resolver.getCDNURL(t,this._fileFormat).then((t=>(e&&(e.resolveLatency=Date.now()-this._lastResolveTimestamp),t)))),i=Date.now()-this._lastResolveTimestamp;let r;return r=i<1001?new Promise(((e,t)=>{this._lastResolveToken=setTimeout((()=>{n().then(e,t)}),1001-i)})):n(),r.then((e=>{this._resolvedURLs=[];for(const t of e.uris){const e=t.split("?")[0];this._resolvedURLs.push(e)}return this._fallbackURLs=e.uris,this._resolvedURL=this._fallbackURLs.shift(),e})).catch((e=>(e&&(e.track=this.toLogJSON()),Promise.reject(e))))}load(e={resolveLatency:0,manifestLatency:0}){return this._loaded?(e.resolveLatency=0,e.manifestLatency=0,Promise.resolve(this)):Promise.all([this.resolve(e),this._getManifest(e)]).then((([e,t])=>{var n;if(this._loaded=!0,!e.protection||!t)return this;if(this._keySystem===r.INVALID_SPOTIFY_KEY)return this._protection=t.protection||"cenc",this._psshBox=new Uint8Array(0),this;let i;const a=this._keySystemSettings.pssh_field.audio;let s=function(e,t){return t.hasOwnProperty(e)}(a,t)?t[a]:null;if(!s&&"pssh_widevine"===a&&"pssh"in t&&(s=null!==(n=t.pssh)&&void 0!==n?n:null),!s)return i=new W(o.FILE_FORMAT_NOT_SUPPORTED,"KeySystem does not support the file format."),i.track=this.toLogJSON(),Promise.reject(i);if(this._protection=t.protection||"cenc",this._psshBox=this._parsePSSHBox(s),"segments"in t&&t.segments)this._calculateFragments(t);else{if(!("references"in t)||!t.references)return i=new W(o.FILE_MALFORMED_SEEKTABLE,"Malformed seektable."),i.track=this.toLogJSON(),Promise.reject(i);this._calculateFragmentsV1(t)}return this}))}adaptToBandwidth(){return Promise.resolve(!1)}}const de=d.P.forTag("playback.content_buffer");var ue;function _e(){}!function(e){e[e.AUDIO=10]="AUDIO",e[e.VIDEO=20]="VIDEO"}(ue||(ue={}));class pe extends u.vp{constructor(e,t=[],n={}){super(),this._mediaSource=null,this._sourceBuffers={},this._appendingFragments=[],this._currentInitSegments={},this._updateQueue=[],this._codecs=[],this._playId=0,this._lastBufferClearTime=Date.now(),this._codecs=t,this._tracker=e,this._disableBufferAbort=!!n.disableBufferAbort,this._onSourceOpen=this._onSourceOpen.bind(this),this._onSourceClose=this._onSourceClose.bind(this),this.dequeueUpdates=this.dequeueUpdates.bind(this),n.noInit||this._init()}static create(e,t=[],n={}){return new pe(e,t,n)}_init(){this._mediaSource=new MediaSource,this._mediaSource.addEventListener(i.MEDIA_SOURCE_OPEN,this._onSourceOpen),this._mediaSource.addEventListener(i.MEDIA_SOURCE_CLOSE,this._onSourceClose),this._sourceBuffers={},this._currentInitSegments={}}_onSourceOpen(){de.info("MediaSource opened.");const e=this._mediaSource;if(e&&0===e.sourceBuffers.length&&"open"===e.readyState){de.info("Creating source buffers for codecs",this._codecs);for(const e of this._codecs)this._addSourceBuffer(e)}this.dequeueUpdates(),this.emit(i.BUFFER_SOURCE_OPEN,null)}_onSourceClose(){de.info("MediaSource closed."),this._destroySourceBuffers(),this.emit(i.BUFFER_SOURCE_CLOSE,null)}_removeAppendingFragment(e){if(!e)return;const t=this._appendingFragments,n=t.indexOf(e);-1!==n&&t.splice(n,1)}_addSourceBuffer(e){if(this._mediaSource){const t=this._mediaSource.addSourceBuffer(e);t.addEventListener(i.SOURCE_BUFFER_UPDATE_END,this.dequeueUpdates),this._sourceBuffers[e]=t}}_trackBufferingProgress(e){e.audio&&e.audio.buffer&&this._tracker.trackBytesDownloaded(e.audio.buffer.byteLength),e.video&&e.video.buffer&&this._tracker.trackBytesDownloaded(e.video.buffer.byteLength)}_checkStalling(e,t,n){var r,o;const a=t.byteRanges.video?t.byteRanges.video.start:null!==(o=null===(r=t.byteRanges.audio)||void 0===r?void 0:r.start)&&void 0!==o?o:-1;var s;e>9e3&&this.emit(i.BUFFER_STALLED,{byteStart:a,timeStart:(s=t.timeStart,Math.ceil(1e3*s)),stallAmount:e-9e3,didTimeout:n})}_appendBufferData(e,t,n,r=Date.now()){this.emit(i.BUFFERING_END,null);const o=[];if(e.audio){const i=(0,h.$)();this.tryUpdate({playId:n,timestamp:r,fragment:t,type:"append",profileId:e.audio.profileId,buffer:e.audio.buffer,initBuffer:e.audio.initBuffer,codec:e.audio.mimetype,init:!!t.init,resolve:i.resolve}),o.push(i.promise),null!==e.audio.bandwidth&&this._tracker.trackBufferURL(e.audio.bufferURL||"",{bandwidth:e.audio.bandwidth||0})}if(e.video){const i=(0,h.$)();this.tryUpdate({playId:n,timestamp:r,fragment:t,type:"append",profileId:e.video.profileId,buffer:e.video.buffer,initBuffer:e.video.initBuffer,codec:e.video.mimetype,init:!!t.init,resolve:i.resolve}),o.push(i.promise),null!==e.video.bandwidth&&this._tracker.trackBufferURL(e.video.bufferURL||"",{bandwidth:e.video.bandwidth||0})}return Promise.all(o)}_appendUpdate(e){var t,n;const r=this._sourceBuffers[e.codec];if(!r||r.updating)return void this._updateQueue.push(e);let o=e.buffer;if(e.fragment.init&&this._currentInitSegments[e.codec]===e.profileId)return null===(t=e.resolve)||void 0===t||t.call(e,!0),void Promise.resolve().then(this.dequeueUpdates);if(e.initBuffer&&e.buffer&&this._currentInitSegments[e.codec]!==e.profileId){const t=new Uint8Array(e.initBuffer.byteLength+e.buffer.byteLength);t.set(new Uint8Array(e.initBuffer),0),t.set(new Uint8Array(e.buffer),e.initBuffer.byteLength),o=t.buffer}try{r.appendBuffer(o)}catch(s){let t=!1;return"QuotaExceededError"===s.name?(de.warn("Failed to append buffer: exceeded quota."),t=!0,this.emitSync(i.BUFFER_QUOTA_EXCEEDED,null)):de.warn("Failed to append buffer",s),void new Promise((e=>{t?setTimeout(e,500):e()})).then((()=>{this._removeAppendingFragment(e.fragment),this.dequeueUpdates()})).then((()=>{e.init&&this._updateQueue.push(e)}))}this._removeAppendingFragment(e.fragment);const a=o.byteLength>e.buffer.byteLength;(e.fragment.init||a)&&(this._currentInitSegments[e.codec]=e.profileId),null===(n=e.resolve)||void 0===n||n.call(e,!0),a?de.info(`Injected combined init segment and playable segment (${e.codec}, ${e.profileId})`):e.init&&de.info(`Injected individual init segment (${e.codec}, ${e.profileId})`)}_abortUpdate(e){"fragment"in e&&this._removeAppendingFragment(e.fragment),e.resolve&&e.resolve(!1),Promise.resolve().then(this.dequeueUpdates)}_processUpdate(e){"end"===e.type?this._endUpdate(e):"duration"===e.type?this._durationUpdate(e):"append"===e.type&&this._appendUpdate(e)}_isUpdating(){if(!this._mediaSource)return!1;const e=this._mediaSource.sourceBuffers;for(let t=0,n=e.length;t<n;t++){const n=e[t];if(n&&n.updating)return!0}return!1}_endUpdate(e){this._isUpdating()?this._updateQueue.push(e):this._mediaSource&&"open"===this._mediaSource.readyState&&(this._mediaSource.endOfStream(),e.resolve&&e.resolve(!0))}_durationUpdate(e){this._isUpdating()?this._updateQueue.push(e):(this._mediaSource&&(this._mediaSource.duration=e.duration),e.resolve&&e.resolve(!0))}_destroySourceBuffers(){const e=this._mediaSource;if(!e)return;const t=e.sourceBuffers;if(t.length)for(let i=0,r=t.length;i<r;i++){const r=t[i];if(r){r.removeEventListener("updateend",this.dequeueUpdates);try{e.removeSourceBuffer(r),de.info("Removed source buffer")}catch(n){de.warn("Failed to remove sourcebuffer",n)}}}this._sourceBuffers={},this._currentInitSegments={}}_endOfStream(){this._mediaSource&&"ended"!==this._mediaSource.readyState&&this.tryUpdate({playId:this._playId,timestamp:Date.now(),type:"end"})}dequeueUpdates(){const e=this._updateQueue.shift();e&&this.tryUpdate(e)}appendFragment(e,t,n=!1){if(-1!==this._appendingFragments.indexOf(t))return Promise.resolve([]);this._appendingFragments.push(t),this.emit(i.BUFFERING_START,null);const r=Date.now(),o=this._playId,a=e.toLogJSON();return e.getBufferForFragment(t).then((e=>(this._trackBufferingProgress(e),o!==this._playId?(de.info("Append fragment dropped: playId has changed."),[]):(n||this._checkStalling(Date.now()-r,t,!1),this._appendBufferData(e,t,o,r))))).catch((e=>(this._removeAppendingFragment(t),n||this._checkStalling(Date.now()-r,t,!0),this.emit(i.BUFFER_APPEND_ERROR,{error:e,canPlayNext:!0,track:a}),Promise.reject(e))))}abort(e=!1){if(this._lastBufferClearTime=Date.now(),this._appendingFragments=[],this._disableBufferAbort)return void de.info("MediaSource abort skipped; action disabled.");const t=this._mediaSource;if(t){const i=t.sourceBuffers;for(let r=0,o=i.length;r<o;r++){const o=i[r];if("open"===t.readyState&&o)try{o.abort();const t=o.buffered;if(e&&t.length){const e=t.start(0),n=t.end(t.length-1);o.remove(e,n),de.info("Cleared buffer range",e,n)}}catch(n){de.warn("ContentBuffer.clear failed.",n)}}}this._currentInitSegments={}}getMediaSource(){return this._mediaSource}tryUpdate(e){if(!e)return;if(e.playId!==this._playId)return de.info("Try update dropped: playId has changed"),void this._abortUpdate(e);if(e.timestamp<this._lastBufferClearTime)return de.info("Try update dropped: update is older than the last clear"),void this._abortUpdate(e);const t=this._mediaSource;t&&"open"!==t.readyState&&"ended"!==t.readyState?this._updateQueue.push(e):this._processUpdate(e)}destroy(){const e=this._mediaSource;e&&(de.info("Source destroyed"),e.removeEventListener("sourceopen",this._onSourceOpen),e.removeEventListener("sourceclose",this._onSourceClose),this._destroySourceBuffers(),this._mediaSource=null)}progress(e,t,n){const i=this._mediaSource;if(!i)return;const r="video"===e.getMediaType()?ue.VIDEO:ue.AUDIO;if("open"===i.readyState||"ended"===i.readyState){let o;const a=function(e,t){var n,i;const r=null===(i=null===(n=e.sourceBuffers)||void 0===n?void 0:n[0])||void 0===i?void 0:i.buffered;if(r){let e,n;for(let i=0;i<r.length;i++)if(e=r.start(i),n=r.end(i),e<=t&&t<=n)return{start:e,end:n}}return null}(i,n);if(a){if(n+r>i.duration)return void("open"===i.readyState&&this._endOfStream());const s=e.getFragmentLength();Math.ceil(n/s)>Math.floor(a.end/s)&&(o=e.getFragmentForTime(n),o&&this.appendFragment(e,o,t).catch(_e));const c=Math.floor(a.end-n);if(c>r)return;const l=Math.min(e.getFragmentLength(),r-c);if(l<1)return;const d=Math.floor(a.end+l);o=e.getFragmentForTime(d),o?this.appendFragment(e,o,t).catch(_e):this._endOfStream()}else if(o=e.getFragmentForTime(n),o){if(this.appendFragment(e,o,t).catch(_e),o.timeEnd<n+5){const n=e.getFragmentAfterTime(o.timeStart);n?this.appendFragment(e,n,t).catch(_e):this._endOfStream()}}else this._endOfStream()}}recreate(e){this.abort(),this.destroy(),this._codecs=e,this._init()}setDuration(e){this.tryUpdate({playId:this._playId,timestamp:Date.now(),type:"duration",duration:e})}setPlayId(e){this._playId=e}}class he{constructor(e){if(this._estimate=0,this._totalWeight=0,e<0)throw new TypeError("Halflife must be set to a positive value.");this._weightingDecrease=Math.exp(Math.log(.5)/e)}sample(e,t){const n=Math.pow(this._weightingDecrease,e),i=t*(1-n)+n*this._estimate;isNaN(i)||(this._estimate=i,this._totalWeight+=t)}getEstimate(){return this._estimate/1-Math.pow(this._weightingDecrease,this._totalWeight)}}class fe{constructor(e=4e5){this._totalBytes=0,this._overrideBitrate=0,this._currentBandwidth=e,this._short=new he(2),this._long=new he(5),this._init()}_init(){if("undefined"==typeof navigator)return;const e=navigator;e.connection&&e.connection.downlink&&(this._currentBandwidth=1e6*e.connection.downlink,this._onConnectionChange=this._onConnectionChange.bind(this),e.connection.addEventListener("change",this._onConnectionChange))}_onConnectionChange(e){const t=e.target.downlink||0;this._setBandwidth(t)}_setBandwidth(e){this._currentBandwidth=1e6*e}getBandwidthEstimate(){if(this._overrideBitrate)return this._overrideBitrate;if(this._totalBytes<128e3)return this._currentBandwidth;const e=this._short.getEstimate(),t=this._long.getEstimate();return Math.min(e,t)}sample(e,t){if(e<16e3)return;const n=t/1e3,i=8*e/n;this._totalBytes+=e,this._short.sample(n,i),this._long.sample(n,i)}overrideBitrate(e){this._overrideBitrate=e<=0?0:e}}var Ee;function me(e){for(;e.firstChild;)e.removeChild(e.lastChild)}function ge(e){const t=e;return{id:t.id,text:t.text}}!function(e){e.SHOWING="showing",e.HIDDEN="hidden"}(Ee||(Ee={}));const ye="visible",ve="hidden";class Se extends u.vp{constructor(e){super(),this._isVisible=!1,this._player=null,this._crossOrigin=null,this._currentVideoContent=null,this._unsubscribers=[],this._displayedCues=[],this._preferredLanguage=e.language.toLowerCase(),this._onEnter=this._onEnter.bind(this),this._onExit=this._onExit.bind(this),this._onLoadedMetadata=this._onLoadedMetadata.bind(this),this.setPlayer(e.player)}_subscribeToCueEvents(e){var t;const{track:n}=e;if(!n)throw new Error("No track");if(null===(t=n.cues)||void 0===t?void 0:t.length){n.mode=this._isVisible?Ee.SHOWING:Ee.HIDDEN,this._displayedCues=n.activeCues?Array.from(n.activeCues):[],this._emitDisplayedCues();for(let e=0;e<n.cues.length;e++){const t=n.cues[e];t&&(t.addEventListener("enter",this._onEnter),t.addEventListener("exit",this._onExit),this._unsubscribers.push((()=>{t.removeEventListener("enter",this._onEnter),t.removeEventListener("exit",this._onExit)})))}}else{const t=()=>{this._subscribeToCueEvents(e),e.removeEventListener("load",t)};e.addEventListener("load",t)}}_unsubscribeFromCueEvents(){this._unsubscribers.forEach((e=>e())),this._unsubscribers=[]}_onEnter(e){const t=e.target;this._displayedCues.indexOf(t)>-1||(this._displayedCues.push(t),this._emitDisplayedCues())}_onExit(e){const t=e.target,n=this._displayedCues.indexOf(t);n>-1&&(this._displayedCues.splice(n,1),this._emitDisplayedCues())}_emitDisplayedCues(){this.emit(i.PLAYER_DISPLAYED_CUES_CHANGED,{cues:this._displayedCues.map(ge)})}_updateVisibleState(){var e,t;const n=this.getActiveLanguage();if(!this._player)return;Array.from(null!==(t=null===(e=this._player)||void 0===e?void 0:e.querySelectorAll("track"))&&void 0!==t?t:[]).forEach((e=>{e.style.visibility=this._isVisible?ye:ve}));const i=this._player.textTracks;for(let r=0,o=i.length;r<o;r++){const e=i[r];e&&(e.mode=this._isVisible&&e.language.toLowerCase()===n?Ee.SHOWING:Ee.HIDDEN)}}_updateTextTracks(){const e=this._player;e&&(e.readyState>=1?this._onLoadedMetadata():this._currentVideoContent&&e.addEventListener(i.MEDIA_LOADEDMETADATA,this._onLoadedMetadata))}_onLoadedMetadata(){const e=this._player;if(!e)return;if(me(e),!this._currentVideoContent)return;e.crossOrigin="anonymous";const t=this.getActiveLanguage();for(const{lang:n,url:i}of this._currentVideoContent.getSubtitles()){const r=n.toLowerCase()===(null==t?void 0:t.toLowerCase()),o=document.createElement("track");o.label=`${n} subtitles`,o.kind="subtitles",o.srclang=n,o.src=i,o.default=r,o.style.visibility=this._isVisible?ye:ve,e.appendChild(o),r&&this._subscribeToCueEvents(o)}}getActiveLanguage(){var e;if(!this._player||!this._currentVideoContent)return;const t=null!==(e=this._currentVideoContent.getSubtitleLanguages().map((e=>e.toLowerCase())))&&void 0!==e?e:[];let n=null;for(const i of t)if(i===this._preferredLanguage){n=i;break}if(!n)for(const i of t)if(i.split("-")[0]===this._preferredLanguage.split("-")[0]){n=i;break}return null!=n?n:"en-us"}setVideoContent(e){this._unsubscribeFromCueEvents(),this._displayedCues=[],this._currentVideoContent=e,e||this.clear(),this._updateTextTracks()}setPlayer(e){var t;const n="VIDEO"===(null==e?void 0:e.tagName)?e:null;this._player!==n&&this.clear(),this._player=n||null,this._crossOrigin=null!==(t=null==n?void 0:n.crossOrigin)&&void 0!==t?t:null,this._updateTextTracks()}getAvailableLanguages(){var e,t;return null!==(t=null===(e=this._currentVideoContent)||void 0===e?void 0:e.getSubtitleLanguages())&&void 0!==t?t:[]}setLanguage(e){if(!e.length)throw new TypeError("Argument `code` must be a non-empty string. Hide subtitles using `hideSubtitles()`.");this._preferredLanguage=e.toLowerCase(),this._updateTextTracks()}hide(){this._isVisible=!1,this._updateVisibleState()}show(){this._isVisible=!0,this._updateVisibleState()}clear(){const e=this._player;e&&(this._unsubscribeFromCueEvents(),this._currentVideoContent=null,this._displayedCues=[],me(e),e.removeEventListener(i.MEDIA_LOADEDMETADATA,this._onLoadedMetadata),e.crossOrigin=this._crossOrigin)}visible(){return this._isVisible}}const Re=d.P.forTag("playback.player"),Ae=/^blob:/,Te={[s.MP4]:!0,[s.MP4_DUAL]:!0,[s.MP4_CBCS]:!0,[s.MP4_FLAC]:!0,[s.MP3]:!1,[s.MANIFEST_ID]:!1};function be(e,t){return e.toString().replace(/^data:.*$/,`data:${t||"unknown"}`)}function Le(e){return Math.ceil(1e3*e)}function Ie(e){return e/1e3}function Pe(e){return document.createElement(e)}class Ce extends u.vp{constructor(e){super(),this._cubicVolume=!1,this._player=null,this._emeManager=null,this._mediator=new u.vp,this._currentContent=null,this._upcomingContent=null,this._preloadingTracks={},this._playId=0,this._loaded=!1,this._licenseRequested=!1,this._playerActivated=!1,this._pauseToken=0,this._syntheticEndedToken=0,this._activeCodecs=[],this._playerVolume=1,this._playerSpeed=1,this._fatalOnNextError=!1,this._canPreloadEmitted=!1,this._lastTimeUpdatePostion=0,this._buffering=!1,this._preferredBitrate=0,this._disableLicensePrefetch=!1,this._disableBufferingBeforeLicense=!1,this._audioResolver=e.audioResolver,this._clearBufferOnSeek=!!e.clearBufferOnSeek,this._createPlayer=e.createPlayer||Pe,this._cubicVolume=e.cubicVolume,this._disableCache=!!e.disableCache,this._licenseURLResolver=e.licenseURLResolver,this._newBufferPerTrack=!!e.newBufferPerTrack,this._newElementPerTrack=!!e.newElementPerTrack,this._newMediaKeysPerTrack=!!e.newMediaKeysPerTrack,this._rebufferOnQuotaExceeded=!!e.rebufferOnQuotaExceeded,this._disableLicensePrefetch=!!e.disableLicensePrefetch,this._synthesizeEnded=!!e.synthesizeEnded,this._tracker=e.tracker,this._transport=e.transport,this._videoPlayerContainer=e.videoPlayerContainer,this._audioPlayerContainer=e.audioPlayerContainer,this._videoResolver=e.videoResolver,this._abrManager=new fe,this._emeManager=e.disallowProtectedTracks?null:e.emeManager||null,this._disallowProfile=e.disallowProfile,this._disableBufferingBeforeLicense=!!e.disableBufferingBeforeLicense,this._cache=new _.z6(e.trackCacheSize||2),this._subtitleManager=new Se({language:e.preferredSubtitleLanguage||navigator.language,player:this._player}),this._videoResolution=e.videoResolution,Re.info("Setting Player track cache to:",e.trackCacheSize||2),this._buffer=pe.create(this._tracker,void 0,{disableBufferAbort:!!e.disableBufferAbort,reinjectInitsOnAbort:!!e.reinjectInitsOnAbort,noInit:!0}),this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onTimeUpdate=this._onTimeUpdate.bind(this),this._onDurationChange=this._onDurationChange.bind(this),this._onPlay=this._onPlay.bind(this),this._onPlaying=this._onPlaying.bind(this),this._onPause=this._onPause.bind(this),this._onSeeking=this._onSeeking.bind(this),this._onEncrypted=this._onEncrypted.bind(this),this._onEnded=this._onEnded.bind(this),this._onError=this._onError.bind(this),this._onRequiresDuration=this._onRequiresDuration.bind(this),this._onQuotaExceeded=this._onQuotaExceeded.bind(this),this._onLoadedMetadata=this._onLoadedMetadata.bind(this),this._onWaiting=this._onWaiting.bind(this),this._onPlayedThresholdReached=this._onPlayedThresholdReached.bind(this),this._onSyntheticEnded=this._onSyntheticEnded.bind(this),this._onLicenseRequestCapped=this._onLicenseRequestCapped.bind(this),this._onLicenseRequestError=this._onLicenseRequestError.bind(this),this._onNavigatorOffline=this._onNavigatorOffline.bind(this),this._onBufferError=this._onBufferError.bind(this),this._emitWarning=this._emitWarning.bind(this),this._handleLoadingComplete=this._handleLoadingComplete.bind(this),this._onRateChange=this._onRateChange.bind(this),this._init()}static create(e){const t=Object.assign({},e);return V.create({transport:e.transport,disallowRobustnessValues:e.disallowRobustnessValues,disallowCodecs:e.disallowCodecs,noServerCertificate:e.noServerCertificate,precacheServerCertificate:e.precacheServerCertificate,unauthServerCertificateBase:e.unauthServerCertificateBase,preferredKeySystems:e.preferredKeySystems}).then((e=>{t.emeManager=e;const n=new Ce(t);return t.preinitMediaElement?n._preinitMediaElement():n})).catch((n=>{if(e.enableWithoutEME)return Ce.createWithOptions(t);throw n}))}static createWithOptions(e){return new Promise((t=>{const n=new Ce(e);t(e.preinitMediaElement?n._preinitMediaElement():n)}))}_init(){this._disableCache&&Re.info("Cache disabled."),this._transport.on(this._transport.EVENT_CONNECTION_OFFLINE,this._onNavigatorOffline),this.proxyEmitAllSync(this._tracker,{[i.TRACKER_TRACKING_DATA_CREATED]:i.PLAYER_TRACKING_DATA_CREATED,[i.TRACKER_TRACKING_DATA_FINALIZED]:i.PLAYER_TRACKING_DATA_FINALIZED,[i.TRACKER_PLAYBACK_START]:i.PLAYER_PLAYBACK_START}),this._tracker.on(i.TRACKER_PLAYED_THRESHOLD_REACHED,this._onPlayedThresholdReached),this._emeManager&&this._emeManager.addListeners({[i.EME_LICENSE_REQUEST_CAPPED]:this._onLicenseRequestCapped,[i.EME_LICENSE_REQUEST_ERROR]:this._onLicenseRequestError}),this._buffer.addListeners({[i.BUFFER_APPEND_ERROR]:this._onBufferError,[i.BUFFER_QUOTA_EXCEEDED]:this._onQuotaExceeded}),this.proxyEmitAll(this._buffer,{[i.BUFFER_STALLED]:i.PLAYER_BUFFER_STALLED,[i.BUFFERING_START]:i.PLAYER_BUFFERING_START,[i.BUFFERING_END]:i.PLAYER_BUFFERING_END}),this.proxyEmitAll(this._mediator,{[c.FRAGMENT_FETCHED]:i.PLAYER_FRAGMENT_FETCHED,[c.FRAGMENT_FETCH_ERROR]:i.PLAYER_FRAGMENT_FETCH_ERROR,[c.VIDEO_PROFILE_CHANGED]:i.PLAYER_VIDEO_PROFILE_CHANGED}),this.proxyEmitSync(this._subtitleManager,i.PLAYER_DISPLAYED_CUES_CHANGED,i.PLAYER_DISPLAYED_CUES_CHANGED),this.proxyEmitAll(this._videoResolver,{[i.VIDEO_MANIFEST_RESOLVED]:i.PLAYER_VIDEO_MANIFEST_RESOLVED,[i.VIDEO_MANIFEST_RESOLVE_FAILED]:i.PLAYER_VIDEO_MANIFEST_RESOLVE_FAILED})}_onRateChange(){this._player&&this.emit(i.PLAYER_PLAYBACK_SPEED_CHANGED,{playback_speed:this._player.playbackRate})}_onLicenseRequestError(e){if(e.data.playId!==this._playId)return;const t=this._currentContent;if(!t)return;const n=e.data.error;n.shouldRefreshEndpoint&&this._licenseURLResolver.remove(t.getKeySystem(),t.getMediaType()),this._emitError(n,!n.unrecoverable,t.toLogJSON())}_onLicenseRequestCapped(e){if(e.data.playId!==this._playId)return;this._currentContent&&(this.pause(),this.emit(i.PLAYER_CAPPED,null))}_shouldNextErrorBeFatal(){const e=this._currentContent;if(!e)return!1;if(e.isAd()||!e.isProtected())return!1;if(!this._player)return!1;const t=this._player.error;if(!(t&&t instanceof MediaError))return this._fatalOnNextError=!1,!1;switch(t.code){case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:case MediaError.MEDIA_ERR_DECODE:return!0;default:return!1}}_onNavigatorOffline(){this._tracker.trackNavigatorOffline()}_onBufferError(e){this._emitError(e.data.error,e.data.canPlayNext,e.data.track)}_addPlayerEvents(e){e.addEventListener(i.MEDIA_TIMEUPDATE,this._onTimeUpdate),e.addEventListener(i.MEDIA_PLAY,this._onPlay),e.addEventListener(i.MEDIA_PLAYING,this._onPlaying),e.addEventListener(i.MEDIA_PAUSE,this._onPause),e.addEventListener(i.MEDIA_SEEKING,this._onSeeking),e.addEventListener(i.MEDIA_ENCRYPTED,this._onEncrypted),e.addEventListener(i.MEDIA_ENDED,this._onEnded),e.addEventListener(i.MEDIA_ERROR,this._onError),e.addEventListener(i.MEDIA_LOADEDMETADATA,this._onLoadedMetadata),e.addEventListener(i.MEDIA_DURATIONCHANGE,this._onDurationChange),e.addEventListener(i.MEDIA_WAITING,this._onWaiting),e.addEventListener(i.MEDIA_CANPLAY,this._onCanPlay),e.addEventListener(i.MEDIA_CANPLAYTHROUGH,this._onCanPlayThrough),e.addEventListener(i.MEDIA_RATECHANGE,this._onRateChange),e.addEventListener(i.INTERNAL_MEDIA_REQUIRES_DURATION,this._onRequiresDuration)}_removePlayerEvents(e){e.removeEventListener(i.MEDIA_TIMEUPDATE,this._onTimeUpdate),e.removeEventListener(i.MEDIA_PLAY,this._onPlay),e.removeEventListener(i.MEDIA_PLAYING,this._onPlaying),e.removeEventListener(i.MEDIA_PAUSE,this._onPause),e.removeEventListener(i.MEDIA_SEEKING,this._onSeeking),e.removeEventListener(i.MEDIA_ENCRYPTED,this._onEncrypted),e.removeEventListener(i.MEDIA_ENDED,this._onEnded),e.removeEventListener(i.MEDIA_ERROR,this._onError),e.removeEventListener(i.MEDIA_WAITING,this._onWaiting),e.removeEventListener(i.MEDIA_CANPLAY,this._onCanPlay),e.removeEventListener(i.MEDIA_RATECHANGE,this._onRateChange),e.removeEventListener(i.MEDIA_CANPLAYTHROUGH,this._onCanPlayThrough),e.removeEventListener(i.MEDIA_LOADEDMETADATA,this._onLoadedMetadata),e.removeEventListener(i.MEDIA_DURATIONCHANGE,this._onDurationChange),e.removeEventListener(i.INTERNAL_MEDIA_REQUIRES_DURATION,this._onRequiresDuration)}_recreateMediaElement(e,t,n,r){if(t!==this._playId)return Re.info("Recreate player dropped: playId has changed."),Promise.resolve(!1);const o=this._player;if(o){if(!this._newElementPerTrack&&("AUDIO"!==o.tagName||"video"!==n)){let t=!0;for(const n of e)if('audio/mp2t;codecs="mp4a.40.2"'!==n&&!o.canPlayType(n)){t=!1;break}if(t)return Re.info("Reusing media element."),e.join(",")===this._activeCodecs.join(",")&&!this._newBufferPerTrack||r||(Re.info("Recreating buffer."),this._buffer.recreate(e),this._activeCodecs=e),Promise.resolve(!0)}this._removePlayerEvents(o),o.pause(),this._emeManager&&this._emeManager.removeMediaKeys(o).catch((function(e){Re.warn("Failed to remove media keys.",e)})),this._player=null;const t=this._getContainerElement(this._videoPlayerContainer);t&&o.parentNode===t&&(t.removeChild(o),this.emit(i.PLAYER_VIDEO_ELEMENT_REMOVED,null));const a=this._getContainerElement(this._audioPlayerContainer);a&&o.parentNode===a&&a.removeChild(o)}Re.info("Creating new media element.");const a=this._createPlayer(n),s=this._playerVolume;return a.volume=this._cubicVolume?s*s*s:s,a.autoplay=!1,a.loop=!1,"playsInline"in a&&(a.playsInline=!0),this._player=a,this._subtitleManager.setPlayer(a),this._playerActivated=!1,this._addPlayerEvents(a),r||this._buffer.recreate(e),this._activeCodecs=e,Promise.resolve(!0)}_getContainerElement(e){return"string"==typeof e?document.querySelector(e):e||null}_onDurationChange(){const e=this._playId,t=()=>{if(!this._player)return;if(e!==this._playId)return void Re.info("Duration changed drop: playId has changed.");const t=Le(this._player.duration),n=Le(this._player.currentTime);this._tracker.setActualDuration(t),this.emit(i.PLAYER_DURATION_CHANGED,{timestamp:Date.now(),position:n,duration:t})};this._loaded?t():this.once(i.PLAYER_LOAD,t)}_onPlay(){var e;if(!this._player||!this._currentContent)return;const t=Le(this._player.currentTime);this._tracker.trackPlay(t),this.emit(i.PLAYER_PLAY,{timestamp:Date.now(),position:t,logData:null!==(e=this._currentContent.getLogData())&&void 0!==e?e:null})}_onPlaying(){if(!this._player)return;this._playerActivated=!0;const e=this._currentContent,t=Le(this._player.currentTime);this._tracker.trackPlaying(t),this.emit(i.PLAYER_PLAYING,{timestamp:Date.now(),position:t,logData:e?e.getLogData():null})}_onPause(){if(!this._player)return;const e=Le(this._player.currentTime);this._tracker.trackPaused(e);const t=this._currentContent?this._currentContent.getLogData():null;this._pauseToken=setTimeout((()=>{clearTimeout(this._syntheticEndedToken),this.emit(i.PLAYER_PAUSED,{position:e,logData:t})}),10)}_onSeeking(){this.emit(i.PLAYER_SEEKING,null),this._buffer.abort(this._clearBufferOnSeek),this._lastTimeUpdatePostion=0,this._onTimeUpdate()}_onRequiresDuration(){this._currentContent&&this._currentContent.isProtected()&&this._player&&(this._player.duration=this._currentContent.getCalculatedDuration())}_onQuotaExceeded(){this._player&&this._rebufferOnQuotaExceeded&&(Re.info("Exceeded quota: rebuffering current track."),this._buffer.abort(!0),this._player.currentTime=this._player.currentTime,this._onTimeUpdate())}_onEncrypted(e){Re.info("Got Encrypted event");this._currentContent&&this.emitSync(i.INTERNAL_ENCRYPTED,{initData:e.initData,fromPolyfill:!!e.fromPolyfill})}_onEnded(){!this._currentContent||this._synthesizeEnded&&this._currentContent.isProtected()||(Re.info("Native ended emitted."),this._emitEnded())}_onSyntheticEnded(){this._synthesizeEnded&&this._currentContent&&this._currentContent.isProtected()&&(Re.info("Synthetic ended emitted."),this._emitEnded())}_onError(){var e;if(!this._player)return;const t=this._player,n=t.error;let i,r=!1;const a=this._currentContent;let s,c,l,d=!1;a&&(r=a.isProtected(),i=a.toLogJSON(),d=a.isAd(),a.clearCachedBuffers());let u=!0;const _=!a||d||!this._fatalOnNextError,h=n&&n.msExtendedCode?`0x${(n.msExtendedCode>>>0).toString(16).toUpperCase()}`:null,f=be(t.src,null!==(e=null==i?void 0:i.fileId)&&void 0!==e?e:"");if(n instanceof MediaError){switch(n.code){case MediaError.MEDIA_ERR_ABORTED:s=o.MEDIA_ABORTED,c="Media aborted.";break;case MediaError.MEDIA_ERR_NETWORK:s=o.MEDIA_NETWORK_ERROR,c="Network error.";break;case MediaError.MEDIA_ERR_DECODE:s=o.MEDIA_DECODING_ERROR,c="Media decoding error.",u=_;break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:s=o.MEDIA_NOT_SUPPORTED,c="Media not supported.",u=_;break;default:s=o.PLAYER_MEDIA_ERROR,c="Media error.",l=!0}c+=` (${n.message||h||f||n.toString()})`}else s=o.PLAYER_PLAYBACK_ERROR,c="Error message undefined",l=!0;this._buffer.abort(!0);const E=new p(s,c);u||(E.unrecoverable=!0),E.listPlayerIgnore=d,E.debug.src_url=f,E.debug.protected=r,E.debug.extendedCode=h,E.debug.rawExCode=n&&n.msExtendedCode||null,l&&n&&(E.debug.nativeCode=n.code||null,E.debug.errorData=n),this._emitError(E,u,i)}_onLoadedMetadata(){this.emitSync(i.INTERNAL_PLAYER_LOADED_METADATA,null)}_onCanPlay(){this._buffering=!1,this.emitSync(i.INTERNAL_PLAYER_CANPLAY,null),this.emit(i.PLAYER_FIRST_BYTES,null)}_onCanPlayThrough(){this.emitSync(i.INTERNAL_PLAYER_CANPLAYTHROUGH,null)}_onWaiting(){clearTimeout(this._syntheticEndedToken),this._player&&!this._player.seeking&&(this._buffering=!0,this._getBufferingLatency().then((e=>{this._tracker.trackMsStalled(e)})))}_onPlayedThresholdReached(e){this._currentContent&&this._player&&this.emit(i.PLAYER_PLAYED_THRESHOLD_REACHED,{played:e.data.played,threshold:e.data.threshold,position:Le(this._player.currentTime)})}_emitEnded(){this._currentContent&&"video"===this._currentContent.getMediaType()&&this.emit(i.PLAYER_ENDED_VIDEO,null),clearTimeout(this._pauseToken),this.emit(i.PLAYER_ENDED,null)}_emitError(e,t,n){Re.error("Player Error",e,n,t),this._tracker.setHadError(!0),!this._disableCache&&n&&n.fileId&&this._cache.remove(n.fileId),this.emit(i.PLAYER_ERROR,{playId:this._playId,error:e,track:n,canPlayNext:t,position:this._player?Le(this._player.currentTime):0})}_emitWarning(e,t){Re.error("Player Warning",e,t,!0),this._tracker.trackWarning(),this.emit(i.PLAYER_WARNING,{playId:this._playId,error:e,track:t,canPlayNext:!0,position:this._player?Le(this._player.currentTime):0})}_prepareMediaElement(e,t){return t===this._playId&&this._upcomingContent?this._recreateMediaElement(this._upcomingContent.getPlayableCodecs(),t,this._upcomingContent.getMediaType(),this._upcomingContent.getKeySystem()===r.FAIRPLAY).then((n=>{var i;if(!n||t!==this._playId)return Re.info("Loading content dropped after recreate: playId has changed."),Promise.resolve(!1);this._player.playbackRate=(null===(i=this._loadingOptions)||void 0===i?void 0:i.useDefaultPlaybackSpeed)?1:this._playerSpeed;const r=this._player;return"VIDEO"===(null==r?void 0:r.tagName)&&(e.poster?r.poster=e.poster:r.removeAttribute("poster")),r&&this._upcomingContent&&this._upcomingContent.isProtected()&&this._emeManager&&(!r.mediaKeys||r.mediaKeys.shouldRefreshPerTrack||this._newMediaKeysPerTrack)?(Re.info("Creating media keys"),this._emeManager.createMediaKeys(r).then((()=>!0)).catch((e=>(e.unrecoverable=!0,this._emitError(e,!1,this._upcomingContent?this._upcomingContent.toLogJSON():void 0),Promise.reject(e))))):Promise.resolve(!0)})):(Re.info("Loading content dropped: playId has changed."),Promise.resolve(!1))}_handleLoadingComplete(e){const t=this._currentContent&&this._currentContent.getMediaType(),n=this._getContainerElement("video"===t?this._videoPlayerContainer:this._audioPlayerContainer);return n&&this._player&&this._player.parentNode!==n&&(n.appendChild(this._player),"video"===t&&this.emit(i.PLAYER_VIDEO_ELEMENT_APPENDED,null)),this._upcomingContent=null,e}_handleLoadingError(e,t,n,r){if(this._upcomingContent=null,n!==this._playId)return Promise.resolve(!1);if(this._tracker.trackLoadFailed(),this.emit(i.PLAYER_LOADING_FAILED,{uri:e,logData:t.logData}),r){const n=r.track||{uri:e,fileId:t.fileId,format:t.format,deviceId:t.logData.deviceId};this._emitError(r,"StorageError"!==r.name||!!r.canPlayNext,n)}return Promise.reject(r)}_handleLoadedMetadata(e,t,n){if(e!==this._playId)return void Re.info("LoadedMetadata operations dropped: playId has changed.");this._loaded=!0;const r=this._player;if(!r)return;this._buffer.dequeueUpdates();const o=n.position>r.duration?0:n.position;this._lastTimeUpdatePostion=0,r.currentTime!==o&&(Re.info("Resetting initial position after metadata."),r.currentTime=o),this._tracker.trackLoadDone(Le(r.currentTime)),this.emitSync(i.PLAYER_LOAD,{autoplay:n.autoplay,position:Le(o),logData:t}),Promise.resolve().then((()=>{this._onTimeUpdate()}));let a=()=>{r.currentTime!==o&&(Re.info("Resetting initial position after playable."),r.currentTime=o)};n.autoplay&&!r.error&&(a=()=>{if(r.currentTime!==o&&(Re.info("Resetting initial position after playable."),r.currentTime=o),this._playId!==e)return void Re.info("Play trigger dropped; different playId");new Promise((e=>e(this._player&&this._player.play()))).catch((e=>{if(e){if("NotSupportedError"===e.name)return Promise.reject(e);if("NotAllowedError"===e.name)return this.emit(i.PLAYER_AUTOPLAY_FAILED,null),Promise.reject(e)}return this._player?this._player.play():Promise.resolve()})).catch((()=>{this._onPause()}))}),r.readyState>2?(Re.info("Ready to play, triggering play."),a()):(Re.info("Waiting to be playable."),this.once(i.INTERNAL_PLAYER_CANPLAY,a))}_handleCanPlayThrough(e){e===this._playId?this._tracker.trackCanPlayThrough():Re.info("CanPlayThrough operations dropped: playId has changed.")}_loadContent(e,t){if(t!==this._playId||!this._upcomingContent)return Re.info("Loading content dropped: playId has changed."),Promise.resolve(!1);if(!this._player)throw new p(o.PLAYER_INVALID_INTERNAL_STATE,"Cannot load content without an HTMLMediaElement");this._canPreloadEmitted=!1;const n=this._upcomingContent;this._upcomingContent=null,this._currentContent=n,this._subtitleManager.setVideoContent(n instanceof ae?n:null);const a=e.callback;a&&this.once(i.PLAYER_LOAD,(()=>{this._playId&&t===this._playId?a():Re.info("Load content event dropped: playId has changed.")})),this.once(i.INTERNAL_PLAYER_LOADED_METADATA,this._handleLoadedMetadata.bind(this,t,this._currentContent.getLogData(),e)),this.once(i.INTERNAL_PLAYER_CANPLAYTHROUGH,this._handleCanPlayThrough.bind(this,t));let s=e.position;const c=n.getCalculatedDuration();c&&s>c&&(s=e.position=0);try{this._player.currentTime=s}catch(d){Re.warn("Cannot set initial position before loading.",d)}const l=n.isProtected();return this._tracker.setProtected(l),n.getKeySystem()===r.FAIRPLAY?n instanceof le&&!l?Promise.resolve(this._loadUnprotectedTrack()):Promise.resolve(this._loadHLSProtectedTrack(e,t)):n instanceof ae?this._loadVideoTrack(e,t):l?this._loadProtectedTrack(e,t):Promise.resolve(this._loadUnprotectedTrack())}_getBufferingLatency(){return new Promise((e=>{if(!this._player)return void e(0);const t=Date.now();this._player.addEventListener("canplaythrough",(function n(){this.removeEventListener("canplaythrough",n),e(Date.now()-t)}))}))}_loadVideoTrack(e,t){if(!(this._player&&this._currentContent&&this._currentContent instanceof ae))return Promise.resolve(!1);const n=this._currentContent;Re.info("_loadVideoTrack");const r=()=>{this._currentContent&&this._currentContent.isProtected()&&this._requestLicense(t).then((()=>{this._playId===t&&(this._licenseRequested=!0,this._disableBufferingBeforeLicense&&this._onTimeUpdate())}))};this._disableLicensePrefetch?this.once(i.INTERNAL_ENCRYPTED,r):this._buffer.once(i.BUFFER_SOURCE_OPEN,r),this._player.src=URL.createObjectURL(this._buffer.getMediaSource());const o=n.getVideoProfile(),a=n.getAudioProfile();return a||o?(this._tracker.trackVideoLoadStart({bitrate:null==o?void 0:o.video_bitrate,audioProfile:null!=a?a:void 0,videoProfile:null!=o?o:void 0}),this._tracker.trackBufferLoadStart(),this._buffer.appendFragment(n,n.getInitFragment()).then((()=>this._buffer.setDuration(n.getCalculatedDuration()))).then(this._onAppendedHeadSegment(t))):Promise.resolve(!1)}_loadHLSProtectedTrack(e,t){if(Re.info("Load HLS Protected Track"),!this._player||!this._currentContent)return!1;const n=this._currentContent.getResolvedURL();if(!n)return!1;const r=e=>{e.data.fromPolyfill&&(this.removeListener(i.INTERNAL_ENCRYPTED,r),this._requestLicense(t,{initData:e.data.initData}))};return this.on(i.INTERNAL_ENCRYPTED,r),this._tracker.trackBufferLoadStart(),this._tracker.trackBufferURL(n,{bandwidth:0}),this._player.src=this._currentContent.getHLSURL(),this._player.load(),!0}_loadUnprotectedTrack(){if(!this._player||!this._currentContent)return!1;const e=this._currentContent.getResolvedURL();return!!e&&(Re.info("_loadUnprotectedTrack",this._currentContent.getURI()),this._tracker.trackBufferLoadStart(),this._tracker.trackBufferURL(e,{bandwidth:0}),this._player.src=e,this._player.load(),!0)}_onAppendedHeadSegment(e){return()=>e===this._playId&&(this._player&&this._player.spload&&this._player.spload(),Re.info("Head segment appended."),!0)}_loadProtectedTrack(e,t){if(!(this._currentContent&&this._player&&this._currentContent instanceof le))return Promise.resolve(!1);const n=this._currentContent;Re.info("_loadProtectedTrack",n.getURI());const r=()=>this._requestLicense(t).then((()=>{this._playId===t&&(this._licenseRequested=!0,this._disableBufferingBeforeLicense&&this._onTimeUpdate())}));this._disableLicensePrefetch?this.once(i.INTERNAL_ENCRYPTED,r):this._buffer.once(i.BUFFER_SOURCE_OPEN,r),this._player.src=URL.createObjectURL(this._buffer.getMediaSource()),this._tracker.trackBufferLoadStart();const o=n.getFragmentForTime(e.position);let a=null;return o===n.getFirstFragment()?(Re.info("Appending combined init and playable fragment."),a=this._buffer.appendFragment(n,n.getHeadFragment())):(Re.info("Appending split init and playable fragment."),a=this._buffer.appendFragment(n,o)),a.then(this._onAppendedHeadSegment(t)).then((()=>Promise.resolve(t===this._playId)))}_requestLicense(e,t={}){if(e!==this._playId){const e="Request license dropped: playId has changed.";return Re.info(e),Promise.resolve(!1)}if(!this._player||!this._currentContent||!this._emeManager)return Promise.resolve(!1);const n=Date.now(),r=this._player.mediaKeys,o=this._currentContent,a=o.getFileId(),s=o.getLogData(),c=o.toLogJSON(),l=o.getKeySystem(),d=o.getLicenseEndpoint();let u;if(d)u=Promise.resolve(d);else{if(!a)return Promise.reject(new TypeError("Missing: fileId or licenseEndpoint"));u=this._licenseURLResolver.get(l,o.getMediaType()).then((e=>e.replace(/\{contentId\}/,a)))}const _=this._emeManager,p=this._tracker;return p.setKeySystem(l),p.setKeySystemImpl(_.getKeySystemImpl()),Promise.all([u,o.getInitParams()]).then((([i,o])=>{p.setLicenseSessionLatency(Date.now()-n);const a=o.initDataType,s=t.initData||o.initData;if(r&&s&&a){const t=Object.assign(Object.assign({},o),{playId:e,initData:s,mediaKeys:r,licenseServer:i,initDataType:a});return _.createSessionWithParams(t)}return Promise.resolve(!1)})).then((t=>{if(e!==this._playId)return Re.info("License tracking dropped: playId has changed."),Promise.resolve(!1);"boolean"!=typeof t&&"elapsed"in t&&(p.setLicenseGenerationLatency(t.elapsed.generate),p.setLicenseRequestLatency(t.elapsed.request),p.setLicenseUpdateLatency(t.elapsed.update));const r=Date.now()-n;return p.setKeyLatency(r),this.emit(i.PLAYER_KEY_RECEIVED,{requestTime:r,logData:s}),Re.info("License updated."),Promise.resolve(!0)})).catch((t=>{if(!t||e!==this._playId)return Promise.resolve(!1);const n=!t||!("canPlayNext"in t)||t.canPlayNext;return this._emitError(t,n,c),Promise.reject(t)}))}_onTimeUpdate(){var e;if(!this._loaded||!(null===(e=this._player)||void 0===e?void 0:e.src)||!this._currentContent)return;const t=this._currentContent,n=this._player.seeking,o=this._player.currentTime,a="video"===t.getMediaType();if(t.isProtected()&&this._disableBufferingBeforeLicense&&!this._licenseRequested)return void Re.log("Dropping time update event: buffering before license disabled.");if(!n&&this._lastTimeUpdatePostion&&this._lastTimeUpdatePostion===o)return void Re.warn("Dropping duplicate time update.");this._lastTimeUpdatePostion=n?0:o,t.getKeySystem()!==r.FAIRPLAY&&(a||t.isProtected())&&this._buffer.progress(t,n,o);const s=this._player.duration,c=Le(o),l=t.getLogData();n?(this._tracker.trackPositionChanged(c),this.emit(i.PLAYER_POSITION_CHANGED,{position:c,logData:l})):(this._tracker.trackProgress(c,"getCurrentBitrate"in t?t.getCurrentBitrate():0),this.emit(i.PLAYER_PROGRESS,{timestamp:Date.now(),position:c,played:this._tracker.getMSPlayed(),interval:500,logData:l})),!this._canPreloadEmitted&&s-o<=10?(this._canPreloadEmitted=!0,this.emit(i.PLAYER_CAN_PRELOAD,null)):this._canPreloadEmitted=!1,clearTimeout(this._syntheticEndedToken),this._synthesizeEnded&&t.isProtected()&&this._isPlaying()&&(this._syntheticEndedToken=setTimeout(this._onSyntheticEnded,Le(s-o)))}_isPlaying(){return!!this._player&&!this._player.paused}_createAudioContent(e,t){const n={manifestLatency:0,resolveLatency:0};return(this._emeManager?this._emeManager.getKeySystemInfo():Promise.resolve({keySystem:r.INVALID_SPOTIFY_KEY})).then((i=>le.create({abrManager:this._abrManager,mediator:this._mediator,keySystem:i.keySystem,licenseEndpoint:t.licenseEndpoint,transport:this._transport,resolver:this._audioResolver,uri:e,fileId:t.fileId,fileFormat:t.fileFormat,format:t.format,isAd:t.isAd,resolvedURL:t.resolvedURL,noManifest:t.noManifest,preloadedManifest:t.preloadedManifest,logData:t.logData,disableCache:this._disableCache,emitWarning:this._emitWarning}).load(n))).then((e=>{const i=this._tracker;return i.setResolveLatency(n.resolveLatency),i.setManifestLatency(n.manifestLatency),e.isProtected()&&t.fileId&&!this._disableCache&&this._cache.set(t.fileId,e),e}))}_createVideoContent(e,t){const n={manifestLatency:0,resolveLatency:0},i=t.fileId;return(this._emeManager?this._emeManager.getKeySystemInfo():Promise.resolve({keySystem:r.INVALID_SPOTIFY_KEY,audioFormats:[],videoFormats:[]})).then((r=>ae.create({uri:e,abrManager:this._abrManager,mediator:this._mediator,resolver:this._videoResolver,keySystem:r.keySystem,licenseEndpoint:t.licenseEndpoint,fileId:i,format:s.MANIFEST_ID,isAd:t.isAd,transport:this._transport,videoFormats:r.videoFormats,videoResolution:this._videoResolution,audioFormats:r.audioFormats,disableCache:this._disableCache,disallowProfile:this._disallowProfile}).load(n))).then((e=>{const t=this._tracker;return t.setResolveLatency(n.resolveLatency),t.setManifestLatency(n.manifestLatency),e.isProtected()&&i&&!this._disableCache&&this._cache.set(i,e),e}))}_preinitMediaElement(){return this._player||!this._emeManager?Promise.resolve(this):this._emeManager.getKeySystemInfo().then((e=>{var t,n;const i=[];return(null===(t=e.audioFormats)||void 0===t?void 0:t[0])&&i.push(e.audioFormats[0].contentType),(null===(n=e.videoFormats)||void 0===n?void 0:n[0])&&i.push(e.videoFormats[0].contentType),!!i.length&&this._recreateMediaElement(i,this._playId,i.length>1?"video":"audio",e.keySystem!==r.FAIRPLAY)})).then((()=>this),(e=>(Re.warn("Cannot precreate media element:",null==e?void 0:e.message),this)))}getCodecInfo(){return{audiocodec:"mp3",bitrate:160}}getMediaSource(){return this._buffer.getMediaSource()}load(e,t,n){var r;const a=function(e,t){return t&&t.hasOwnProperty(e)}(t.uriProperty,e)?t.uriProperty:"uri",s=e[a];if(Re.info("load",s),!s)return Promise.reject(new p(o.PLAYER_CANNOT_FIND_PLAYABLE_URI,"Cannot find a playable URI."));if(!e.logData)return Promise.reject(new Error("Invalid track: logging info not specified"));this.stop(e.logData,e.mediaType),this._loaded=!1,this._licenseRequested=!1,this._buffering=!0,this._currentContent=null,this._subtitleManager.setVideoContent(null);const c=++this._playId,l=this._tracker;let d;l.trackLoadStart(s,e.fileId,c.toString(),e.logData,e.metadata),this.emit(i.PLAYER_BEFORE_LOAD,{track:e,options:t,logData:e.logData,uri:s,timestamp:Date.now()}),this._buffer.setPlayId(c),this._loadingOptions={position:Ie(t.position||0),autoplay:!("autoplay"in t)||t.autoplay,poster:e.poster,useDefaultPlaybackSpeed:!!(null===(r=e.options)||void 0===r?void 0:r.useDefaultPlaybackSpeed),callback:n},l.setPlayIntended(this._loadingOptions.autoplay),l.setPlayedThreshold(t.playedThreshold);const u=this._cache;if("video"===e.mediaType&&!this._emeManager)return Promise.reject(new p(o.DISALLOW_PROTECTED_TRACK_ERROR,"Protected tracks not supported"));const _="video"===e.mediaType?this._createVideoContent.bind(this,s,e):this._createAudioContent.bind(this,s,e,c);if(e.fileId){const t=e.fileId,n=this._preloadingTracks[t],i=this._disableCache?null:u.get(t);n?(Re.info("Waiting for preloading track.",t),d=n.then((e=>(Re.info("Preloading succeeded.",t),l.setResolveLatency(e.resolveLatency),l.setManifestLatency(e.manifestLatency),u.get(t))),(()=>(Re.info("Preloading failed, creating new track",t),_())))):i?(Re.info("Using cached track.",t,i),l.setMemoryCached(!0),d=Promise.resolve(i)):(Re.info("Creating new track from fileId",t),d=_())}else Re.info("Creating new track without fileId",e.resolvedURL),d=_();return d.then((t=>t.isProtected()&&!this._emeManager?Promise.reject(new p(o.DISALLOW_PROTECTED_TRACK_ERROR,"Protected tracks not supported")):(t.setLogData(e.logData),l.setCalculatedDuration(Le(t.getCalculatedDuration())),this._upcomingContent=t,Promise.resolve()))).then(this._prepareMediaElement.bind(this,this._loadingOptions,c)).then(this._loadContent.bind(this,this._loadingOptions,c)).then(this._handleLoadingComplete,this._handleLoadingError.bind(this,s,e,c))}preload(e){const t=!this._disableCache,n=e.uri,r=e.fileId,o=this._cache;if(!t||!r||!this._emeManager)return Promise.resolve(null);const a="video"===e.mediaType;if(!(Te[e.format]&&!a)||o.get(r))return Promise.resolve(null);const s=this._preloadingTracks,c=s[r];if(c)return c;Re.info("Preloading track",r);const l={manifestLatency:0,resolveLatency:0},d=this._emeManager.getKeySystemInfo().then((t=>le.create({abrManager:this._abrManager,keySystem:t.keySystem,licenseEndpoint:e.licenseEndpoint,transport:this._transport,resolver:this._audioResolver,uri:n,fileId:r,format:e.format,fileFormat:e.fileFormat,isAd:e.isAd,resolvedURL:e.resolvedURL,noManifest:e.noManifest,preloadedManifest:e.preloadedManifest,logData:e.logData,disableCache:this._disableCache,emitWarning:this._emitWarning}).load(l))).then((t=>Promise.all([t,"MP4_CBCS"!==e.format?t.getBufferForFragment(t.getHeadFragment()):null]))).then((([e])=>(o.set(r,e),delete s[r],Re.info("Cached",r),l))).catch((e=>(delete s[r],Re.warn("Preloading error",e),this.emit(i.PLAYER_PRELOADING_ERROR,{error:e,track:e.track||null,canPlayNext:!("canPlayNext"in e)||e.canPlayNext,preloading:!0}),Promise.reject(e))));return s[r]=d,d}togglePlay(){return this._isPlaying()?this.pause():this.resume()}setSubtitleLanguage(e){this._subtitleManager.setLanguage(e)}getSubtitleLanguages(){return this._subtitleManager.getAvailableLanguages()}getActiveSubtitleLanguage(){return this._subtitleManager.getActiveLanguage()}setVolume(e,t){if(!this.emitSync(i.PLAYER_BEFORE_VOLUME_CHANGE,{volume:e,options:t}).defaultPrevented){if(e<0||e>1)throw new p(o.PLAYER_ATTEMPTED_VOLUME_OUT_OF_RANGE,"Volume should be in range [0, 1]");this._playerVolume=e,this._player&&(this._player.volume=this._cubicVolume?e*e*e:e)}}getVolume(){return this._playerVolume}getPlayerState(){var e,t,n;const i=this._player,r=this._currentContent,o={src:(null==i?void 0:i.src)?be(i.src,null==r?void 0:r.getFileId()):void 0,height:(null==i?void 0:i.clientWidth)||0,width:(null==i?void 0:i.clientHeight)||0},a={};if(r){const[e,t]=r.getPlayableCodecs();a.audio_format=e,a.video_format=t,r instanceof ae&&i instanceof HTMLVideoElement&&(a.video_height=i.videoHeight,a.video_width=i.videoWidth,o.poster=i.poster)}return{playing:null!==(e=!(null==i?void 0:i.paused))&&void 0!==e&&e,position:i?Le(i.currentTime):0,duration:i?Le(i.duration):0,volume:null!==(t=this._playerVolume)&&void 0!==t?t:1,playback_speed:null!==(n=null==i?void 0:i.playbackRate)&&void 0!==n?n:0,buffering:this._buffering,media_type:(null==r?void 0:r.getMediaType())||null,media_info:a,player_element:o}}seek(e){if(!this._player)return;const t=this._playId,n=()=>{if(!this._player||t!==this._playId)return void Re.info("Seek dropped: playId has changed.");let n=Ie(e);n<0?n=0:n>=this._player.duration&&(n=this._player.duration),this._player.currentTime=n};this._loaded?n():this.once(i.PLAYER_LOAD,n),this._getBufferingLatency().then((e=>{this._tracker.trackSeekRebuffering(e)}))}pause(){return new Promise((e=>{this._player&&this._isPlaying()?e(this._player&&this._player.pause()):e()}))}resume(){return new Promise((e=>{this._player&&!this._isPlaying()?e(this._player&&this._player.play()):e()}))}stop(e,t){const n=[],r=e||{};this.emit(i.PLAYER_BEFORE_STOP,{timestamp:Date.now(),logData:r}),this._tracker.trackStopped(this._player?Le(this._player.currentTime):-1,e),this._buffer.abort(!0),this._emeManager&&n.push(this._emeManager.destroySessions());const o=this._player;if(o){this._subtitleManager.clear(),this._fatalOnNextError=this._shouldNextErrorBeFatal(),this._fatalOnNextError&&Re.warn("MediaError detected: next immediate media error will be fatal.");const e=o.src;Ae.test(e)&&URL.revokeObjectURL(e),o.removeAttribute("src"),o.load()}if(this._currentContent&&this._disableCache&&this._currentContent.clearCachedBuffers(),o&&this._currentContent&&"video"===this._currentContent.getMediaType()){const e=this._getContainerElement(this._videoPlayerContainer);e&&o.parentNode===e&&(this._newElementPerTrack||"video"!==t)&&(this._subtitleManager.setPlayer(null),e.removeChild(o),this.emit(i.PLAYER_VIDEO_ELEMENT_REMOVED,null))}else if(o&&this._currentContent&&"audio"===this._currentContent.getMediaType()){const e=this._getContainerElement(this._audioPlayerContainer);e&&o.parentNode===e&&(this._newElementPerTrack||"audio"!==t)&&e.removeChild(o)}return this.emit(i.PLAYER_STOPPED,null),Promise.all(n).then((()=>!0))}hideSubtitles(){this._subtitleManager.hide()}showSubtitles(){this._subtitleManager.show()}areSubtitlesShown(){return this._subtitleManager.visible()}getKeySystemInfo(){return this._emeManager?this._emeManager.getKeySystemInfo():Promise.resolve(null)}getVideoVariants(){if(!(this._currentContent&&this._currentContent instanceof ae))return[];const e=[],t=this._currentContent.getVideoProfiles();for(const n of t)e.push({width:n.video_width,height:n.video_height,bitrate:n.video_bitrate});return e}setPreferredBitrate(e){return"number"!=typeof e?Promise.resolve(a.INVALID):(this._preferredBitrate=e,this._currentContent&&"video"===this._currentContent.getMediaType()&&e>0&&this._buffer.abort(!0),this._abrManager.overrideBitrate(e),Promise.resolve(a.SUCCESS))}getCurrentBandwidth(){return this._abrManager.getBandwidthEstimate()}setBackgrounded(e){this._abrManager.overrideBitrate(e?1e-32:this._preferredBitrate)}setVideoResolution(e){this._videoResolution=Object.assign(Object.assign({},this._videoResolution),e),this._currentContent instanceof ae&&this._currentContent.setVideoResolution(this._videoResolution)}activateElement(){return!(this._playerActivated||!this._player||this._player.src)&&(this._player.load(),this._playerActivated=!0,!0)}getMediaConfig(){return void 0===this._mediaConfig?function(e,t){const n=t||document.createElement("video"),i=e=>{n.canPlayType("audio/mp3")&&(e.formats.audio.push("audio/mp3"),e.supports.unprotected_audio=!0)};if(e)return e.getKeySystemInfo().then((e=>{const t={supports:{protected_audio:!!e.audioFormats.length,unprotected_audio:!0,protected_video:!!e.videoFormats.length,unprotected_video:!0},formats:{audio:e.audioFormats.map((e=>e.contentType)),video:e.videoFormats.map((e=>e.contentType))}};return t.keysystem=e.keySystem,t.keysystem_impl=e.keySystemImpl,i(t),t}));const r=F([x[0]],(e=>"probably"===n.canPlayType(e.split(";")[0])));let o=[],a=[];r&&(o=r.audioCapabilities.map((e=>e.contentType)),a=r.videoCapabilities.map((e=>e.contentType)));const s={supports:{protected_audio:!1,unprotected_audio:!!o.length,protected_video:!1,unprotected_video:!!a.length},formats:{audio:o,video:a}};return i(s),Promise.resolve(s)}(this._emeManager,this._player).then((e=>(this._mediaConfig=e,this._mediaConfig))):Promise.resolve(this._mediaConfig)}setPlaybackSpeed(e){var t;return!(!Number.isFinite(e)||e<=0)&&(!(null===(t=this._loadingOptions)||void 0===t?void 0:t.useDefaultPlaybackSpeed)&&(this._playerSpeed=null!=e?e:1,this._player&&(this._player.playbackRate=this._playerSpeed),!0))}}var Oe=n(4792);class De extends Error{constructor(e,t){super(t),this.debug={},this.name="LoggingError",this.message=t,this.code=e}}const ke="7.13.1-0d586eb",we="7.13.1",Ne=d.P.forTag("playback.logger");class Me extends u.vp{constructor(e){super(),this._currentTrackingData=null,this._sequenceId=0,this._sequenceSessionStorage={},this._sessionId="0",this._transport=e.transport,this._logSender=e.logSender,this._player=e.player,this._init()}static create(e){return new Me(e)}_init(){const e=this._player;e.on(i.PLAYER_LOAD,this._onPlayerLoad.bind(this)),e.on(i.PLAYER_ERROR,this._onError.bind(this,!1)),e.on(i.PLAYER_WARNING,this._onError.bind(this,!0)),e.on(i.PLAYER_PRELOADING_ERROR,this._onError.bind(this,!1)),e.on(i.PLAYER_TRACKING_DATA_CREATED,this._onTrackingDataCreated.bind(this)),e.on(i.PLAYER_TRACKING_DATA_FINALIZED,this._onTrackingDataFinalized.bind(this)),e.on(i.PLAYER_PLAYBACK_START,this._onPlaybackStart.bind(this))}_emitError(e,t){this.emit(i.LOGGER_ERROR,{error:e,trackingData:t})}_onError(e,t){var n,i,r;const a=t.data,s=this._currentTrackingData;if(!s||s.noLog)return;const c=a.error,l=null!==(n=null==c?void 0:c.debug)&&void 0!==n?n:{};l.position="position"in a?a.position:0;const d={track:a.track||{},debug:l,preloading:"preloading"in a&&!!a.preloading,session_id:this._sessionId,playback_id:s.playbackId||null,player_play_id:"playId"in a?a.playId:null,http_status_code:null!==(i=null==c?void 0:c.status)&&void 0!==i?i:null,license_server:null!==(r=null==c?void 0:c.licenseServer)&&void 0!==r?r:null};this._logError(c.code||o.UNKNOWN,c,d,s,e)}_onPlayerLoad(e){const t=e.data.logData;if(t)if(t.impressionURLs)for(const n of t.impressionURLs)this._logImpression(n);else t.impressionURL&&this._logImpression(t.impressionURL)}_onPlaybackStart(e){const t=e.data.trackingData;t.noLog||t.noStats||this._logPlaybackStart(t)}_onTrackingDataCreated(e){const t=e.data.trackingData;t.noLog?this._currentTrackingData=null:(this._currentTrackingData=t,this._setSessionId(),t.noTSV||this._setSequenceId())}_setSessionId(){this._sessionId=this._transport.getInitTime().toString()}_setSequenceId(){this._sessionId&&(this._sequenceId=this._getSequenceId(this._sessionId))}_onTrackingDataFinalized(e){const t=e.data.trackingData;if(t.noLog)return;const n=this._sessionId!==this._transport.getInitTime().toString();if(n&&this._setSessionId(),t.playbackId&&!t.noTSV){if(n&&this._setSequenceId(),!t.playIntended&&!t.played)return void this._rollbackSequenceId(this._sessionId);this._logTrackStreamVerification(t)}t.noStats||this._logPlaybackStats(t)}_logTrackStreamVerification(e){const t={play_track:e.currentTrackUri,playback_id:e.playbackId,ms_played:e.msPlayed,session_id:this._sessionId,sequence_id:this._sequenceId,next_playback_id:e.nextPlaybackId};Ne.debug("Logged TrackStreamVerification",t),this._logSender.logTrackStreamVerification(t).catch((n=>{const i=new De(o.TSV_SENDING_FAILED,n.message||"Unknown reason.");this._logError(i.code,n,t,e,!1),this._emitError(i,e)}))}_logPlaybackStats(e){const t={play_track:e.currentTrackUri,file_id:e.fileId,playback_id:e.playbackId,internal_play_id:e.internalPlayId,memory_cached:e.memoryCached,persistent_cached:e.persistentCached,audio_format:e.audiocodec||"",video_format:e.videocodec||"",manifest_id:e.fileId,protected:!1,key_system:e.keySystem,key_system_impl:e.keySystemImpl,urls_json:JSON.stringify(e.urls),start_time:e.loadTime,end_time:e.stopTime,external_start_time:e.externalLoadTime,ms_play_latency:e.msPlayLatency,ms_init_latency:e.msInitLatency,ms_head_latency:e.msHeadLatency,ms_manifest_latency:e.msManifestLatency,ms_resolve_latency:e.msResolveLatency,ms_license_session_latency:e.msLicenseSessionLatency,ms_license_generation_latency:e.msLicenseGenerationLatency,ms_license_request_latency:e.msLicenseRequestLatency,ms_license_update_latency:e.msLicenseUpdateLatency,ms_played:e.msPlayed,ms_nominal_played:e.msPlayed,ms_file_duration:e.msFileDuration,ms_actual_duration:e.msActualDuration,ms_start_position:e.startPosition,ms_end_position:e.position,ms_seek_rebuffer:e.msSeekRebuffering,ms_seek_rebuffer_longest:e.maxMsSeekRebuffering,ms_stall_rebuffer:e.msStalled,ms_stall_rebuffer_longest:e.maxMsStalled,n_stalls:e.nStalls,n_seekback:e.nSeeksBackward,n_seekforward:e.nSeeksForward,start_bitrate:e.startBitrate||e.bitrate||0,audio_quality:e.audioQuality,time_weighted_bitrate:e.timeWeightedBitrate,reason_start:e.reasonStart,reason_end:e.reasonEnd,initially_paused:!e.playIntended,had_error:e.hadError,n_warnings:e.nWarnings,n_navigator_offline:e.nOffline,session_id:this._sessionId,sequence_id:this._sequenceId,client_id:e.clientId,correlation_id:e.correlationId};Ne.info("Logging PlaybackStats"),this._logSender.logJSSDKPlaybackStats(t).catch((n=>{const i=new De(o.PLAYBACK_STATS_SENDING_FAILED,n.message||"Unknown reason.");this._logError(i.code,n,t,e,!1),this._emitError(i,e)}))}_logPlaybackStart(e){const t={play_track:e.currentTrackUri,file_id:e.fileId,playback_id:e.playbackId,session_id:this._sessionId,ms_start_position:e.startPosition,initially_paused:!e.playIntended,client_id:e.clientId,correlation_id:e.correlationId};Ne.info("Logging PlaybackStart"),this._logSender.logJSSDKPlaybackStart(t).catch((n=>{const i=new De(o.PLAYBACK_START_SENDING_FAILED,n.message||"Unknown reason.");this._logError(i.code,n,t,e,!1),this._emitError(i,e)}))}_getSequenceId(e){let t=this._sequenceSessionStorage[e];return t||(t=0),t+1>=9007199254740991&&(t=0),this._sequenceSessionStorage[e]=t+1,t}_rollbackSequenceId(e){const t=this._sequenceSessionStorage[e];t&&(this._sequenceSessionStorage[e]=Math.max(t-1,0))}_logImpression(e){this._transport.request(e,{forget:!0}).catch((function(e){Ne.warn("Unable to send impression request",e)}))}_logError(e,t,n,i,r){let o="";t&&(o=t.stack||"",o||(o=t.toString()));const a={source:"playback",source_version:ke||Oe.eV.UNKNOWN,type:e||Oe.eV.UNKNOWN,message:t&&t.message||Oe.eV.EMPTY,stack:JSON.stringify(o),json_data:JSON.stringify(n||{}),json_data_version:"1.0.0",client_id:i.clientId,correlation_id:i.correlationId};r?this._logSender.logJSSDKWarning(a).catch((e=>Ne.warn("Failed to log warning",a,e))):this._logSender.logJSSDKError(a).catch((e=>Ne.warn("Failed to log error",a,e)))}}class Ue extends Error{constructor(e=o.STORAGE_ERROR,t="Storage Error"){super(t),this.status=-1,this.fileId="",this.debug={},this.canPlayNext=!0,this.code=e,this.message=t,this.name="StorageError"}}const xe=d.P.forTag("playback.storage_resolve");class Fe{constructor(e){this._transport=e}_parseResponse(e,t){var n;let i;if(200!==t.status)return i=new Ue(o.STORAGE_FAILED_WITH_STATUS,`Storage Resolve responded with ${t.status}`),i.status=t.status,i.fileId=e,Promise.reject(i);const r=t.body;if(!(null===(n=null==r?void 0:r.cdnurl)||void 0===n?void 0:n.length))return i=new Ue(o.STORAGE_RETURNED_NO_TRACKS,`Storage Resolve returned no tracks for fileId ${e}`),i.fileId=e,Promise.reject(i);const a={uri:r.cdnurl[0],uris:r.cdnurl,protection:"cenc"};return Promise.resolve(a)}getCDNURL(e,t){xe.info("Requesting CDN URL for ",e);const n="files/audio/interactive",i=`@webgate/storage-resolve/${t?`v2/${n}/${t}/${e}`:`${n}/${e}`}?version=10000000&product=9&platform=39&alt=json`;return this._transport.request(i,{responseType:"json",retry:{condition:(e,t)=>e.getStatusFamily()!==t.SUCCESS}}).then(this._parseResponse.bind(this,e))}getManifest(e){const t=`https://seektables.scdn.co/seektable/${e}.json`;return xe.info("Requesting JSON manifest for ",e),this._transport.request(t,{responseType:"json",retry:{condition:(e,t)=>e.getStatusFamily()!==t.SUCCESS}}).then((t=>{let n;return 200!==t.status?(n=new Ue(o.STORAGE_TRACK_MANIFEST_FAILED,`Track manifest request failed with status code ${t.status}`),n.debug.file_id=e,n.status=t.status,Promise.reject(n)):t.body?t.body:(n=new Ue(o.STORAGE_TRACK_MANIFEST_EMPTY,"Received empty manifest."),n.debug.file_id=e,n.status=t.status,Promise.reject(n))}))}}class Ye extends Error{constructor(e,t){super(t),this.debug={},this.name="TrackingError",this.message=t,this.code=e}}class Be{constructor(){this._version="1.0.0",this._list=new _.Su,this._map={}}clear(){this._list=new _.Su,this._map={}}track(e,t){let n=this._map[e];n||(n=new _.EG({url:e,segments:0,bandwidths:[]}),this._list.append(n),this._map[e]=n);const{value:i}=n;i&&(i.segments+=1,i.bandwidths.push(t.bandwidth))}toJSON(){const e=[];let t=this._list.first;for(;t;){const{value:n}=t;if(!n)continue;const{bandwidths:i}=n;let r=0,o=i.length;for(;o--;)r+=i[o];e.push({url:n.url,segments:n.segments,avg_bw:parseFloat((r/i.length).toFixed(7))}),t=t.next}return{version:this._version,urls:e}}}class Ke{constructor(){this._bitrates={},this._isFinalized=!1,this._needsEndSegment=!1,this._segments=[],this._cdnURLTracker=new Be,this.audiocodec=null,this.bandwidth=0,this.bitrate=0,this.audioQuality=void 0,this.bufferingPercentage=0,this.bufferLoadStartTime=0,this.urls={},this.currentTrackUri="",this.displayTrack="",this.externalLoadTime=0,this.fileId="",this.gaiaDevId="none",this.hadError=!1,this.internalPlayId="",this.isProtected=!1,this.keySystem="",this.keySystemImpl="",this.lastPlayPosition=-1,this.loadTime=0,this.localTimeMs=-1,this.maxContinuous=0,this.maxMsSeekRebuffering=0,this.maxMsStalled=0,this.memoryCached=!1,this.msActualDuration=0,this.msFileDuration=0,this.msHeadLatency=0,this.msInitLatency=0,this.msKeyLatency=0,this.msLicenseGenerationLatency=0,this.msLicenseRequestLatency=0,this.msLicenseSessionLatency=0,this.msLicenseUpdateLatency=0,this.msManifestLatency=0,this.msPlayed=0,this.msPlayedUnion=0,this.msPlayLatency=0,this.msResolveLatency=0,this.msSeekRebuffering=0,this.msSeeksBackward=0,this.msSeeksForward=0,this.nextPlaybackId="",this.nOffline=0,this.noLog=!1,this.noTSV=!1,this.noStats=!1,this.nWarnings=0,this.msStalled=0,this.nSeeksBackward=0,this.nSeeksForward=0,this.nStalls=0,this.persistentCached=!1,this.playbackId="",this.playContext="",this.played=!1,this.position=0,this.reasonEnd="unknown",this.reasonStart="unknown",this.referrer="unknown",this.referrerVendor="unknown",this.referrerVersion="unknown",this.sourceEnd="unknown",this.sourceStart="unknown",this.startPosition=0,this.stopTime=0,this.streamingRule="none",this.timeWeightedBitrate=0,this.totalBytes=0,this.playIntended=!1,this.videocodec=null,this.clientId="unknown",this.correlationId="unknown"}static create(){return new Ke}_calculateUnion(){const e=this._segments.slice(0);let t=0,n=0,i=0,r=0,o=0,a=0,s=this.maxContinuous;for(;o<e.length;o++)o%2!=0&&void 0!==e[o-1]&&"start"===e[o-1].type&&(a=e[o].time-e[o-1].time,s=a>s?a:s);for(this.maxContinuous=s,e.sort(((e,t)=>e.time-t.time));r<e.length;r++)"start"===e[r].type&&(0===n&&(i=r),++n),"end"===e[r].type&&(--n,0===n&&(t+=e[r].time-e[i].time));return t}_calculateWeightedBitrate(e){const t=this._bitrates;let n=0;for(const i in t)i&&t.hasOwnProperty(i)&&e>0&&(n+=parseInt(i,10)*t[i]/e);return Math.round(n)}registerVideoVariant(e){const t=e.bitrate;t&&(this._bitrates[t]=this._bitrates[t]||0,this.startBitrate||(this.startBitrate=t)),e.audioProfile&&e.audioProfile.audio_codec&&(this.audiocodec=e.audioProfile.audio_codec),e.videoProfile&&e.videoProfile.video_codec&&(this.videocodec=e.videoProfile.video_codec)}addStartSegment(){this._segments.push({type:"start",time:this.position}),this._needsEndSegment=!0}addEndSegment(){this._needsEndSegment&&(this._segments.push({type:"end",time:this.position}),this._needsEndSegment=!1)}addMSPlayed(e){if(e){if(e<0)throw new TypeError(`Cannot add negative msPlayed value: ${e}`);this.msPlayed+=e}}trackBitrate(e,t){const n=e||"dummy";this._bitrates[n]=this._bitrates[n]||0,this._bitrates[n]+=t}trackBufferURL(e,t){this._cdnURLTracker.track(e,t)}finalize(){if(this._isFinalized)throw new Ye(o.TRACK_DATA_ALREADY_FINALIZED,"TrackData already finalized.");return this.msPlayedUnion=this._calculateUnion(),this.nSeeksBackward||this.nSeeksForward||(this.msPlayed=this.maxContinuous=this.msPlayedUnion),this.timeWeightedBitrate=this._calculateWeightedBitrate(this.msPlayed),this.bufferingPercentage=this.msStalled/this.msPlayed,this.startBitrate||(this.startBitrate=this.bitrate),this.urls=this._cdnURLTracker.toJSON(),this._isFinalized=!0,!0}getURLsJSON(){var e,t;return null!==(t=null===(e=this._cdnURLTracker.toJSON().urls)||void 0===e?void 0:e.map((({url:e})=>e)))&&void 0!==t?t:[]}getPlaybackStats(){let e;switch(this.keySystem){case r.WIDEVINE:e="widevine";break;case r.PLAYREADY:case r.PLAYREADY_HARDWARE:e="playready";break;default:e="none"}return{ms_total_est:this.msActualDuration,ms_manifest_latency:this.msManifestLatency,ms_latency:this.msPlayLatency,start_offset_ms:this.startPosition,ms_initial_buffering:this.msPlayLatency,ms_seek_rebuffering:this.msSeekRebuffering,ms_stalled:this.msStalled,max_ms_seek_rebuffering:this.maxMsSeekRebuffering,max_ms_stalled:this.maxMsStalled,n_stalls:this.nStalls,audiocodec:this.audiocodec?this.audiocodec.toLowerCase():void 0,videocodec:this.videocodec?this.videocodec.toLowerCase():void 0,start_bitrate:this.startBitrate||this.bitrate||void 0,full_screen:void 0,time_weighted_bitrate:this.timeWeightedBitrate,buffering_percentage:void 0,prefetched_bytes:void 0,prefetched_bytes_loaded:void 0,prefetched_initial_bitrate:void 0,key_system:e,ms_key_latency:this.msKeyLatency,total_bytes:this.totalBytes,local_time_ms:this.localTimeMs,ms_played_background:void 0}}isFinalized(){return this._isFinalized}}const He=d.P.forTag("playback.tracker");class Ge extends u.vp{constructor(e={}){super(),this._playedThreshold=31e3,this._playedThresholdReached=!1,this._trackingData=null,this._playedThreshold=e.playerThreshold||31e3}static create(e){return new Ge(e)}_checkPlayedThreshold(){const e=this._trackingData;!e||!this._playedThreshold||this._playedThresholdReached||e.msPlayed<this._playedThreshold||(this._playedThresholdReached=!0,this.emit(i.TRACKER_PLAYED_THRESHOLD_REACHED,{played:e&&e.msPlayed||0,threshold:this._playedThreshold}))}getMSPlayed(){return this._trackingData?this._trackingData.msPlayed:0}trackLoadStart(e,t,n,r,o){const a=Ke.create();this._trackingData=a,this._playedThresholdReached=!1,a.fileId=null!=t?t:"",a.currentTrackUri=e,a.loadTime=Date.now(),a.internalPlayId=n,a.externalLoadTime=r.externalLoadTime||0,a.displayTrack=r.displayTrack||"",a.playbackId=r.playbackId||"",a.playContext=r.playContext||"",a.reasonStart=r.reason||"unknown",a.sourceStart=r.source||"unknown",a.clientId=r.clientId||"",a.correlationId=r.correlationId||"";const s=r.referrer||{};a.referrer=void 0!==s.name?s.name:"unknown",a.referrerVersion=void 0!==s.version?s.version:"unknown",a.referrerVendor=void 0!==s.vendor?s.vendor:"unknown";const c=r.format||{};c.codec&&(a.audiocodec=c.codec.toLowerCase()),c.bitrate&&(a.bitrate=c.bitrate),c.audioQuality&&(a.audioQuality=c.audioQuality),a.gaiaDevId=r.deviceId||"none",a.noLog=r.noLog||!1,a.noTSV=r.noTSV||!1,a.noStats=r.noStats||!1,a.contentMetadata=o,this.emit(i.TRACKER_TRACKING_DATA_CREATED,{trackingData:a})}trackBufferLoadStart(){const e=this._trackingData;e&&(e.bufferLoadStartTime=Date.now())}trackBytesDownloaded(e){const t=this._trackingData;t&&(t.totalBytes+=e)}trackLoadDone(e){const t=this._trackingData;if(!t)return;const n=Date.now();t.msInitLatency=n-t.bufferLoadStartTime,t.localTimeMs=n,t.position=e,t.addStartSegment()}trackPlay(e){const t=this._trackingData;t&&(t.played||this.emit(i.TRACKER_PLAYBACK_START,{trackingData:t}),t.played=!0,t.position=e,t.startPosition=e)}trackCanPlayThrough(){const e=this._trackingData;if(!e||e.msPlayLatency)return;const t=Date.now();e.msPlayLatency=t-e.loadTime,e.msHeadLatency=t-e.bufferLoadStartTime}trackBufferURL(e,t){const n=this._trackingData;n&&n.trackBufferURL(e,t)}trackNavigatorOffline(){const e=this._trackingData;e&&(e.nOffline+=1)}trackSeekRebuffering(e){const t=this._trackingData;t&&(e>t.maxMsSeekRebuffering&&(t.maxMsSeekRebuffering=e),t.msSeekRebuffering+=e)}trackMsStalled(e){const t=this._trackingData;t&&(e>t.maxMsStalled&&(t.maxMsStalled=e),t.msStalled+=e,t.nStalls++)}trackLoadFailed(){const e=this._trackingData;e&&(e.msPlayLatency=Date.now()-e.loadTime,e.position=0,e.addStartSegment())}trackStopped(e,t){const n=this._trackingData;if(!n||n.isFinalized())return;const r=Date.now();if(n.stopTime=r,n.lastPlayPosition>=0&&e>=0){const t=e-n.lastPlayPosition;n.addMSPlayed(t)}n.addEndSegment(),n.sourceEnd=t.source||"unknown",n.reasonEnd=t.reason||"unknown",n.nextPlaybackId=t.playbackId||"",n.finalize(),He.info("Tracker data finalized.");const o=n.getPlaybackStats();this.emit(i.TRACKER_TRACKING_DATA_FINALIZED,{trackingData:n,playbackStats:o})}trackPositionChanged(e){const t=this._trackingData;if(!t)return;const n=t.position;e!==n&&(t.addEndSegment(),e>n?(t.nSeeksForward++,t.msSeeksForward+=e-n):e<n&&(t.nSeeksBackward++,t.msSeeksBackward+=n-e),t.position=e,t.lastPlayPosition=-1,t.addStartSegment())}trackPlaying(e){const t=this._trackingData;if(t){if(t.lastPlayPosition>=0){const n=e-t.lastPlayPosition;t.addMSPlayed(n)}t.position=e,t.lastPlayPosition=e}}trackPaused(e){const t=this._trackingData;if(t){if(t.lastPlayPosition>=0){const n=e-t.lastPlayPosition;t.addMSPlayed(n)}t.position=e,t.lastPlayPosition=e}}trackProgress(e,t){const n=this._trackingData;if(!(null==n?void 0:n.played))return;let i=0;n.lastPlayPosition>=0&&(i=e-n.lastPlayPosition,n.addMSPlayed(i)),this._checkPlayedThreshold(),n.position=e,n.lastPlayPosition=e,t&&n.trackBitrate(t,i)}trackVideoLoadStart(e){const t=this._trackingData;t&&t.registerVideoVariant(e)}trackWarning(){const e=this._trackingData;e&&e.nWarnings++}trackOffline(){const e=this._trackingData;e&&e.nOffline++}setActualDuration(e){const t=this._trackingData;t&&(t.msActualDuration=e)}setKeySystem(e){const t=this._trackingData;t&&(t.keySystem=e)}setKeySystemImpl(e){const t=this._trackingData;t&&(t.keySystemImpl=e)}setManifestLatency(e){const t=this._trackingData;t&&(t.msManifestLatency=e)}setPlayIntended(e){const t=this._trackingData;t&&(t.playIntended=e)}setKeyLatency(e){const t=this._trackingData;t&&(t.msKeyLatency=e)}setMemoryCached(e){const t=this._trackingData;t&&(t.memoryCached=e)}setPersistentCached(e){const t=this._trackingData;t&&(t.persistentCached=e)}setProtected(e){const t=this._trackingData;t&&(t.isProtected=e)}setHadError(e){const t=this._trackingData;t&&(t.hadError=e)}setLicenseSessionLatency(e){const t=this._trackingData;t&&(t.msLicenseSessionLatency=e)}setLicenseGenerationLatency(e){const t=this._trackingData;t&&(t.msLicenseGenerationLatency=e)}setLicenseRequestLatency(e){const t=this._trackingData;t&&(t.msLicenseRequestLatency=e)}setLicenseUpdateLatency(e){const t=this._trackingData;t&&(t.msLicenseUpdateLatency=e)}setResolveLatency(e){const t=this._trackingData;t&&(t.msResolveLatency=e)}setCalculatedDuration(e){const t=this._trackingData;t&&(t.msFileDuration=e)}setPlayedThreshold(e){this._playedThreshold=e}}class Ve extends u.vp{constructor(e){super(),this._transport=e,this._parseManifestResponse=this._parseManifestResponse.bind(this)}static create(e){return new Ve(e)}_parseManifestResponse(e){var t;const n=e.metadata.startTime;if(200!==e.status){const t=new Ue(o.STORAGE_VIDEO_MANIFEST_FAILED,`Video manifest request failed with status ${e.status}`);return t.status=e.status,this.emit(i.VIDEO_MANIFEST_RESOLVE_FAILED,{url:e.url,error:t,start_time:n}),Promise.reject(t)}const r=e.body,a=null===(t=e.headers)||void 0===t?void 0:t.get("content-length");return this.emit(i.VIDEO_MANIFEST_RESOLVED,{url:e.url,manifest_size:a?parseInt(a,10):JSON.stringify(r).length,start_time:n,end_time:Date.now()}),Promise.resolve(r)}getInitSegmentURLs(e,t,n,i){let r="";n&&(r=e+t.replace("{{profile_id}}",n.id.toString(10)).replace("{{file_type}}",n.file_type));let o="";return i&&(o=e+t.replace("{{profile_id}}",i.id.toString(10)).replace("{{file_type}}",i.file_type)),{audio:r,video:o,audioLogging:r,videoLogging:o}}getSegmentURLs(e,t,n,i,r){let o="";i&&(o=e+t.replace("{{profile_id}}",i.id.toString(10)).replace("{{file_type}}",i.file_type));let a="";return r&&(a=e+t.replace("{{profile_id}}",r.id.toString(10)).replace("{{file_type}}",r.file_type)),{audio:o.replace("{{segment_timestamp}}",n.toString()),video:a.replace("{{segment_timestamp}}",n.toString()),audioLogging:o,videoLogging:a}}getManifest(e){const t=`@webgate/manifests/v7/json/sources/${e}/options/supports_drm`;return this._transport.request(t,{authorize:!0,responseType:"json",parseResponseHeaders:!0,retry:{condition:(e,t)=>e.getStatusFamily()!==t.SUCCESS},metadata:{startTime:Date.now()}}).then(this._parseManifestResponse)}}class je extends Error{constructor(e,t){super(),this.status=-1,this.debug={},this.canPlayNext=!0,this.unrecoverable=!1,this.name="LicenseError",this.code=e,this.message=t}static fatal(e,t){const n=new je(e,t);return n.unrecoverable=!0,n.canPlayNext=!1,n}}class We{constructor(e){this._sdk={name:"",version:""},this._securityLevel=null,this._urls={},e.sdk&&(this._sdk=e.sdk),e.securityLevel&&(this._securityLevel=e.securityLevel),this._transport=e.transport,this._useTestLicenseServer=!!e.useTestLicenseServer,this._transport.on(this._transport.EVENT_CONNECTION_ID,(()=>{this._urls={}}))}get(e,t){const n=`${e}:${t}`,i=this._urls[n];if(i&&i.expires>Date.now()+6e4)return Promise.resolve(i.uri);const r=this._useTestLicenseServer?"&use_test_license_server=true":"",a=`@webgate/melody/v1/license_url?keysystem=${e}&mediatype=${t}&sdk_name=${this._sdk.name}&sdk_version=${this._sdk.version}${r}`;return this._transport.request(a,{responseType:"json",retry:{condition:(e,t)=>{const n=e.getStatusFamily();return n===t.SERVER_ERROR||n===t.CONNECTION_ERROR}}}).then((e=>{const t=e.body;if(t&&200===e.status)return t.expires*=1e3,t.uri=`@webgate/${t.uri}`,this._securityLevel&&(t.uri+=[-1!==t.uri.indexOf("?")?"&":"?","sl=",this._securityLevel].join("")),this._urls[n]=t,t.uri;let i;return i=t?400===e.status&&t&&"deprecated-version"===t.code?je.fatal(o.LICENSE_RESOLVER_DEPRECATED_VERSION,"This version of the SDK is no longer supported. Please upgrade"):new je(o.LICENSE_RESOLVER_CANT_RESOLVE_URL,`License URL endpoint responded with status ${e.status}`):je.fatal(o.LICENSE_RESOLVE_INVALID_RESPONSE,"License URL endpoint responded with invalid response"),i.status=e.status,Promise.reject(i)}))}remove(e,t){this._urls[`${e}:${t}`]=null}}class qe extends Oe.Hx{constructor(e){var t;e.platform=null!==(t=e.platform)&&void 0!==t?t:Oe.eV.UNKNOWN,super(e)}logTrackStreamVerification(e){return this._sendLog("/v1/msg/track_stream_verification",e)}logJSSDKPlaybackStats(e){return this._sendLog("/v1/msg/jssdk_playback_stats",e)}logJSSDKPlaybackStart(e){return this._sendLog("/v1/msg/jssdk_playback_start",e)}logJSSDKError(e){return this._sendLog("/v1/msg/jssdk_error",e)}logJSSDKWarning(e){return this._sendLog("/v1/msg/jssdk_warning",e)}}var ze;!function(e){e[e.ABORTED=101]="ABORTED",e[e.NETWORK=102]="NETWORK",e[e.MEDIA_DECODING=103]="MEDIA_DECODING",e[e.SRC_NOT_SUPPORTED=104]="SRC_NOT_SUPPORTED",e[e.EME=105]="EME",e[e.GENERIC=100]="GENERIC"}(ze||(ze={}));const Qe={[o.MEDIA_ABORTED]:ze.ABORTED,[o.MEDIA_DECODING_ERROR]:ze.MEDIA_DECODING,[o.MEDIA_NOT_SUPPORTED]:ze.SRC_NOT_SUPPORTED,[o.MEDIA_NETWORK_ERROR]:ze.NETWORK};function Ze(e){let t=Qe[e];return/_REQUEST_|_RESPONSE$/.test(e)?t=ze.NETWORK:t||(t=/^EME_/.test(e)?ze.EME:ze.GENERIC),t}function $e(e){var t;const n=e.match(/^https?:\/\/([^\/]+@)?([^\/?#]+)/);return null!==(t=null==n?void 0:n[2])&&void 0!==t?t:""}var Xe;!function(e){e.READY="playerready",e.VIDEO_CHANGE="videochange",e.PLAY="play",e.PLAYING="playing",e.PAUSE="pause",e.TIMEUPDATE="timeupdate",e.SEEKING="seeking",e.SEEKED="seeked",e.ERROR="error",e.ENDED="ended",e.RENDITION_CHANGE="renditionchange",e.REQUEST_COMPLETED="requestcompleted",e.REQUEST_FAILED="requestfailed",e.REQUEST_CANCELED="requestcanceled"}(Xe||(Xe={}));class Je{constructor(e){this._playerId=`spotify-playback-${Date.now()}`,this._currentContentInfo=null,this._readyDeferred=(0,h.$)(),this._isMuxInitialized=!1,this._muxInitData=null,this._player=e.player,this._mux=e.mux,this._getPlayheadTime=this._getPlayheadTime.bind(this),this._getStateData=this._getStateData.bind(this),this._init(e)}static create(e){return new Je(e)}_init(e){Promise.all([Promise.resolve(e.platform),Promise.resolve(e.platformVersion)]).then((([t,n])=>{this._muxInitData={data:{env_key:e.envKey||"2qbjhhcl4u87btjbo7dh8vi2n",player_name:t,player_version:n,player_software_name:e.sdk||"spotify-playback",player_software_version:e.sdkVersion||we,player_mux_plugin_name:"spotify-playback-mux-reporter",player_mux_plugin_version:we},getPlayheadTime:this._getPlayheadTime,getStateData:this._getStateData},this._player.addListeners({[i.PLAYER_BEFORE_LOAD]:this._onBeforeLoad.bind(this),[i.PLAYER_PLAY]:this._onPlay.bind(this),[i.PLAYER_PLAYING]:this._onPlaying.bind(this),[i.PLAYER_PAUSED]:this._onPause.bind(this),[i.PLAYER_PROGRESS]:this._onProgress.bind(this),[i.PLAYER_SEEKING]:this._onSeeking.bind(this),[i.PLAYER_POSITION_CHANGED]:this._onPositionChanged.bind(this),[i.PLAYER_ERROR]:this._onError.bind(this),[i.PLAYER_ENDED]:this._onEnded.bind(this),[i.PLAYER_VIDEO_PROFILE_CHANGED]:this._onVideoProfileChanged.bind(this),[i.PLAYER_FRAGMENT_FETCHED]:this._onFragmentFetched.bind(this),[i.PLAYER_FRAGMENT_FETCH_ERROR]:this._onFragmentFetchError.bind(this),[i.PLAYER_VIDEO_MANIFEST_RESOLVED]:this._onVideoManifestResolved.bind(this),[i.PLAYER_VIDEO_MANIFEST_RESOLVE_FAILED]:this._onVideoManifestResolveFailed.bind(this)})})).then(this._readyDeferred.resolve,this._readyDeferred.reject)}_getPlayheadTime(){return this._player.getPlayerState().position}_getStateData(){var e,t;if(!this._currentContentInfo)return null;const n=this._player.getPlayerState();return{player_is_paused:!n.playing,player_width:n.player_element.width||0,player_height:n.player_element.height||0,video_source_height:n.media_info.video_height||0,video_source_width:n.media_info.video_width||0,player_is_fullscreen:!1,player_autoplay_on:(null===(t=null===(e=this._currentContentInfo)||void 0===e?void 0:e.options)||void 0===t?void 0:t.autoplay)||!1,player_preload_on:!1,video_source_url:n.player_element.src,video_source_mime_type:n.media_info.video_format,video_poster_url:n.player_element.poster,video_source_duration:n.duration,player_language_code:this._player.getActiveSubtitleLanguage()}}_onBeforeLoad(e){const{track:t,options:n,logData:i}=e.data,r=!!this._currentContentInfo;if("video"!==t.mediaType||(null==i?void 0:i.noLog)||(null==i?void 0:i.noMuxEvents))return r&&this._mux.emit(this._playerId,Xe.VIDEO_CHANGE,{}),void(this._currentContentInfo=null);const o={video_id:t.fileId,video_title:(null==i?void 0:i.displayTitle)||void 0,video_series:(null==i?void 0:i.displayGroup)||void 0,video_duration:(null==i?void 0:i.displayDuration)||void 0};this._currentContentInfo={track:t,options:n,videoData:o},!this._isMuxInitialized&&this._muxInitData?(this._mux.init(this._playerId,this._muxInitData),this._mux.emit(this._playerId,Xe.READY),this._isMuxInitialized=!0):r&&this._mux.emit(this._playerId,Xe.VIDEO_CHANGE,o)}_onPlay(){this._currentContentInfo&&this._mux.emit(this._playerId,Xe.PLAY,this._currentContentInfo.videoData)}_onPlaying(){this._currentContentInfo&&this._mux.emit(this._playerId,Xe.PLAYING)}_onPause(){this._currentContentInfo&&this._mux.emit(this._playerId,Xe.PAUSE)}_onProgress(e){this._currentContentInfo&&this._mux.emit(this._playerId,Xe.TIMEUPDATE,{player_playhead_time:e.data.position})}_onSeeking(){this._currentContentInfo&&this._mux.emit(this._playerId,Xe.SEEKING)}_onPositionChanged(){this._currentContentInfo&&this._mux.emit(this._playerId,Xe.SEEKED)}_onError(e){var t,n;const i=null===(n=null===(t=e.data)||void 0===t?void 0:t.error)||void 0===n?void 0:n.code;this._currentContentInfo&&i&&this._mux.emit(this._playerId,Xe.ERROR,{player_error_code:Ze(i),player_error_message:i})}_onEnded(){this._currentContentInfo&&this._mux.emit(this._playerId,Xe.ENDED)}_onVideoProfileChanged(e){if(!this._currentContentInfo)return;const t=e.data.profile;this._mux.emit(this._playerId,Xe.RENDITION_CHANGE,{video_source_bitrate:t.bitrate,video_source_width:t.width,video_source_height:t.height})}_onFragmentFetched(e){const t=e.data;if(!this._currentContentInfo&&"video"!==t.media_type)return;const n=`${t.segment_type}${t.init?"_init":""}`;this._mux.emit(this._playerId,Xe.REQUEST_COMPLETED,{request_type:n,request_hostname:$e(t.url),request_start:t.start_time,request_response_end:t.end_time,request_bytes_loaded:t.byte_length})}_onFragmentFetchError(e){const t=e.data;if(!this._currentContentInfo&&"video"!==t.media_type)return;const n=`${t.segment_type}${t.init?"_init":""}`;this._mux.emit(this._playerId,Xe.REQUEST_FAILED,{request_type:n,request_hostname:$e(t.url),request_start:t.start_time,request_error:t.error.code,request_error_code:t.error.status,request_error_text:""})}_onVideoManifestResolved(e){const t=e.data;this._currentContentInfo&&this._mux.emit(this._playerId,Xe.REQUEST_COMPLETED,{request_type:"manifest",request_hostname:$e(t.url),request_start:t.start_time,request_response_end:t.end_time,request_bytes_loaded:t.manifest_size})}_onVideoManifestResolveFailed(e){const t=e.data;this._currentContentInfo&&this._mux.emit(this._playerId,Xe.REQUEST_FAILED,{request_type:"manifest",request_hostname:$e(t.url),request_start:t.start_time,request_error:t.error.code,request_error_code:t.error.status,request_error_text:""})}ready(){return this._readyDeferred.promise}}var et,tt,nt,it,rt,ot,at;!function(e){e.NULL_VALUE="NULL_VALUE",e.LIST_START="LIST_START",e.LIST_END="LIST_END",e.FORBIDDEN="FORBIDDEN",e.IGNORE="IGNORE",e.PAUSE="PAUSE"}(et||(et={})),function(e){e.MP4_AUDIO="audio/mp4",e.MP4_VIDEO="video/mp4",e.MTS_VIDEO="video/mp2t",e.WEBM_AUDIO="audio/webm",e.WEBM_VIDEO="video/webm"}(tt||(tt={})),function(e){e.AAC_LC="mp4a.40.2",e.FLAC="flac",e.OPUS="opus",e.VP9="vp9",e.VP8="vp8",e.H264_31="avc1.4d401f"}(nt||(nt={})),function(e){e.APPLOAD="appload",e.BACK_BUTTON="backbtn",e.CLICK_ROW="clickrow",e.CLICK_SIDE="clickside",e.END_PLAY="endplay",e.FORWARD_BUTTON="fwdbtn",e.LOGOUT="logout",e.PLAY_BUTTON="playbtn",e.POPUP="popup",e.REMOTE="remote",e.TRACK_DONE="trackdone",e.TRACK_ERROR="trackerror",e.UNKNOWN="unknown",e.URI_OPEN="uriopen",e.CAPPED="capped",e.SEEK="seek"}(it||(it={})),function(e){e.UNKNOWN="UNKNOWN",e.DEFAULT="DEFAULT",e.LOW="LOW",e.NORMAL="NORMAL",e.HIGH="HIGH",e.VERY_HIGH="VERY_HIGH",e.HIFI="HIFI"}(rt||(rt={})),function(e){e.NONE="NONE",e.CONTEXT="CONTEXT",e.TRACK="TRACK"}(ot||(ot={})),function(e){e.EMPTY="EMPTY",e.SW_CRYPTO="SW_CRYPTO",e.SW_DECODE="SW_DECODE",e.HW_CRYPTO="HW_CRYPTO",e.HW_DECODE="HW_DECODE",e.HW_ALL="HW_ALL"}(at||(at={}));class st extends Error{constructor(e,t){super(),this.unrecoverable=!1,this.listPlayerIgnore=!1,this.debug={},this.name="PlaybackError",this.code=e,this.message=t}static fatal(e,t){const n=new st(e,t);return n.unrecoverable=!0,n}}function ct(e){return"uri"in e}class lt extends u.vp{constructor(e){if(super(),this._trackPlayerPromise=(0,h.$)(),this._maxListErrors=5,this._uid=0,this._loadedList=null,this._loadedOptions=null,this._currentTrack=null,this._currentTrackOptions=null,this._listPlayCount=0,this._listErrorCount=0,this._shuffled=!1,this._repeatMode=ot.NONE,this._currentSeqId=0,!e.trackPlayer)throw new TypeError("Argument `options.trackPlayerManager` not found.");e.maxListErrors&&(this._maxListErrors=e.maxListErrors),this._setListOptions=this._setListOptions.bind(this),this._replaceCurrentList=this._replaceCurrentList.bind(this),this._handleCapped=this._handleCapped.bind(this),this._handlePlaying=this._handlePlaying.bind(this),this._handlePaused=this._handlePaused.bind(this),this._handleEnded=this._handleEnded.bind(this),this._handleCanPreload=this._handleCanPreload.bind(this),this._handleError=this._handleError.bind(this),this._handlePositionChanged=this._handlePositionChanged.bind(this),this._handleDurationChanged=this._handleDurationChanged.bind(this),this._handleTimeout=this._handleTimeout.bind(this),this._handlePlayerInitError=this._handlePlayerInitError.bind(this),this._handleProgress=this._handleProgress.bind(this),this._handlePlayedThresholdReached=this._handlePlayedThresholdReached.bind(this),this._handleBeforeLoad=this._handleBeforeLoad.bind(this),this._init(e.trackPlayer)}static create(e){return new lt(e)}_init(e){this._trackPlayerPromise.promise.catch((()=>{})),Promise.resolve(e).then((e=>{this._attachPlayerEvents(e),this._trackPlayerPromise.resolve(e)})).catch(this._handlePlayerInitError)}_attachPlayerEvents(e){e.addListeners({[i.PLAYER_CAN_PRELOAD]:this._handleCanPreload,[i.PLAYER_CAPPED]:this._handleCapped,[i.PLAYER_ENDED]:this._handleEnded,[i.PLAYER_ERROR]:this._handleError,[i.PLAYER_PAUSED]:this._handlePaused,[i.PLAYER_PLAYING]:this._handlePlaying,[i.PLAYER_TIMEOUT]:this._handleTimeout,[i.PLAYER_POSITION_CHANGED]:this._handlePositionChanged,[i.PLAYER_DURATION_CHANGED]:this._handleDurationChanged,[i.PLAYER_PROGRESS]:this._handleProgress,[i.PLAYER_BEFORE_LOAD]:this._handleBeforeLoad,[i.PLAYER_PLAYED_THRESHOLD_REACHED]:this._handlePlayedThresholdReached}),this.proxyEmitAllSync(e,{[i.PLAYER_BEFORE_VOLUME_CHANGE]:i.LIST_PLAYER_BEFORE_VOLUME_CHANGE,[i.PLAYER_LOAD]:i.LIST_PLAYER_PLAYER_LOAD}),this.proxyEmitAll(e,{[i.PLAYER_AUTOPLAY_FAILED]:i.LIST_PLAYER_AUTOPLAY_FAILED,[i.PLAYER_TRACKING_DATA_CREATED]:i.LIST_PLAYER_TRACKING_DATA_CREATED,[i.PLAYER_TRACKING_DATA_FINALIZED]:i.LIST_PLAYER_TRACKING_DATA_FINALIZED,[i.PLAYER_BUFFER_STALLED]:i.LIST_PLAYER_BUFFER_STALLED,[i.PLAYER_BUFFERING_START]:i.LIST_PLAYER_BUFFERING_START,[i.PLAYER_BUFFERING_END]:i.LIST_PLAYER_BUFFERING_END,[i.PLAYER_VIDEO_ELEMENT_APPENDED]:i.LIST_PLAYER_VIDEO_ELEMENT_APPENDED,[i.PLAYER_VIDEO_ELEMENT_REMOVED]:i.LIST_PLAYER_VIDEO_ELEMENT_REMOVED,[i.PLAYER_DISPLAYED_CUES_CHANGED]:i.LIST_PLAYER_DISPLAYED_CUES_CHANGED,[i.LIST_PLAYER_VIDEO_PROFILE_CHANGED]:i.PLAYER_VIDEO_PROFILE_CHANGED,[i.LIST_PLAYER_PLAYBACK_SPEED_CHANGED]:i.PLAYER_PLAYBACK_SPEED_CHANGED})}_translatePosition(e){var t,n,i;return null!==(i=null===(n=null===(t=this._loadedList)||void 0===t?void 0:t.translatePosition)||void 0===n?void 0:n.call(t,e))&&void 0!==i?i:e}_translateDuration(e){var t,n,i;return null!==(i=null===(n=null===(t=this._loadedList)||void 0===t?void 0:t.translateDuration)||void 0===n?void 0:n.call(t,e))&&void 0!==i?i:e}_handleProgress(e){const{data:t}=e;this.emit(i.LIST_PLAYER_PROGRESS,Object.assign(Object.assign({},t),{position:this._translatePosition(t.position)}))}_handleBeforeLoad(e){const{data:t}=e;this.emit(i.LIST_PLAYER_BEFORE_PLAYER_LOAD,Object.assign(Object.assign({},t),{options:Object.assign(Object.assign({},t.options),{position:this._translatePosition(t.options.position)})}))}_handlePlayerInitError(e){this._trackPlayerPromise.reject(new st(o.LIST_PLAYER_NO_TRACK_PLAYER,e.message||"Track player promise was rejected."))}_handleCapped(){const e=this._currentTrack;e&&this.emit(i.LIST_PLAYER_CAPPED,{uid:this._uid,track:e,options:this._currentTrackOptions,list:this._loadedList})}_handlePlaying(e){const t=this._currentTrack;t&&this.emit(i.LIST_PLAYER_PLAYING,{uid:this._uid,track:t,options:this._currentTrackOptions,list:this._loadedList,position:this._translatePosition(e.data.position)})}_handlePaused(e){const t=this._currentTrack;t&&this.emit(i.LIST_PLAYER_PAUSED,{uid:this._uid,track:t,options:this._currentTrackOptions,list:this._loadedList,position:this._translatePosition(e.data.position)})}_handleCanPreload(){this._preloadUpcomingTrack().catch((()=>{}))}_handleEnded(){const e=this._currentTrack;e&&(this.emit(i.LIST_PLAYER_TRACK_ENDED,{uid:this._uid,track:e,options:this._currentTrackOptions,list:this._loadedList}),this.next(it.TRACK_DONE))}_handleTimeout(){const e=this._currentTrack;e&&(this.emit(i.LIST_PLAYER_TRACK_TIMEOUT,{uid:this._uid,track:e,options:this._currentTrackOptions,list:this._loadedList}),this.next(it.TRACK_ERROR))}_handlePositionChanged(e){const t=this._currentTrack;t&&this.emit(i.LIST_PLAYER_POSITION_CHANGED,{uid:this._uid,track:t,options:this._currentTrackOptions,list:this._loadedList,position:this._translatePosition(e.data.position)})}_handleDurationChanged(e){const t=this._currentTrack;t&&this.emit(i.LIST_PLAYER_DURATION_CHANGED,{uid:this._uid,track:t,options:this._currentTrackOptions,list:this._loadedList,position:this._translatePosition(e.data.position),duration:this._translateDuration(e.data.duration)})}_handlePlayedThresholdReached(e){const t=this._currentTrack;t&&this.emit(i.LIST_PLAYER_PLAYED_THRESHOLD_REACHED,{uid:this._uid,track:t,options:this._currentTrackOptions,list:this._loadedList,threshold:e.data.threshold,position:this._translatePosition(e.data.position)})}_handleError(e){const t=this._currentTrack,n=e.data;if(!t)return;n.position=this._translatePosition(e.data.position),this.emit(i.LIST_PLAYER_ERROR,n),this.emitSync(i.LIST_PLAYER_ERROR_SYNC,n);const r=!!n.error&&n.error.listPlayerIgnore;r||this._listErrorCount++,n.canPlayNext&&(r||this._listErrorCount<=this._maxListErrors?this.next(it.TRACK_ERROR):this.emit(i.LIST_PLAYER_MAX_LIST_ERRORS_REACHED,{count:this._listErrorCount,threshold:this._maxListErrors}))}_handleTrackLoaded(e){this.emitSync(i.LIST_PLAYER_TRACK_LOADED,e)}_incrementSeqId(){return this._currentSeqId>=9007199254740991?this._currentSeqId=0:this._currentSeqId+=1,this._currentSeqId}_getTrackPlayer(){return this._trackPlayerPromise.promise}_setListIndex(e,t){const n=t.index&&-1!==t.index?t.index:0;return Promise.all([e,t,e.startAt(n)])}_setListOptions([e,t,n]){return Promise.all([e.setShuffle(!!this._shuffled),e.setRepeatMode(this._repeatMode)]).then((()=>[e,t]))}_replaceCurrentList([e,t]){return this.emitSync(i.LIST_PLAYER_BEFORE_LIST_CHANGE,{newList:e,newOptions:t,oldList:this._loadedList,oldOptions:this._loadedOptions}),this._loadedList=e,this._loadedOptions=t,this._listPlayCount=0,this._listErrorCount=0,this.emit(i.LIST_PLAYER_LIST_CHANGED,{list:e,options:t}),a.SUCCESS}_preloadTrack(e){return this._getTrackPlayer().then((t=>(t.preload(e).catch((()=>{})),a.SUCCESS)))}_changeTrack(e,t,n){if(this._currentSeqId!==n)return Promise.resolve(a.CANCELLED);this.emitSync(i.LIST_PLAYER_BEFORE_TRACK_LOAD,{list:this._loadedList,newTrack:e,oldTrack:this._currentTrack}),this._uid++;const r=++this._listPlayCount,o=this._loadedOptions;let s=!0,c=0,l=3e4;o&&(1===r?(s=!o.paused,c=o.initialPosition||o.position||0):c=o.position||0);const d=t===it.TRACK_DONE;if(e.options){const t=e.options;void 0!==t.paused&&(s=!t.paused),void 0!==t.position&&(c=t.position),void 0!==t.playedThreshold&&(l=t.playedThreshold)}this._currentTrack=e,this._currentTrackOptions={reason:t,paused:!s,position:c,playedThreshold:l};const u=this._handleTrackLoaded.bind(this,{uid:this._uid,track:this._currentTrack,options:this._currentTrackOptions,list:this._loadedList});return this._getTrackPlayer().then((t=>this._currentSeqId!==n?a.CANCELLED:(Promise.resolve(t.load(e,{uriProperty:"playableURI",autoplay:s,position:c,playedThreshold:l,continuePrevious:d},u)).catch((()=>{})),a.SUCCESS)))}_preloadUpcomingTrack(){const e=this._loadedList;if(!e)return Promise.reject(new st(o.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."));const t={reason:it.TRACK_DONE,listConstants:et};return e.peekNext(t).then((e=>e===et.FORBIDDEN?a.FORBIDDEN:e===et.NULL_VALUE?this._preloadUpcomingTrack():e===et.LIST_END?a.LIST_END:ct(e)&&e.playable?this._preloadTrack(e):a.INVALID))}activateElement(){return this._getTrackPlayer().then((e=>(e.activateElement(),a.SUCCESS)))}load(e,t){const n=function(e={}){const t={index:-1,position:0,initialPosition:0,duration:-1,paused:!1,reason:it.UNKNOWN};return void 0!==e.index&&(t.index=e.index),void 0!==e.position&&(t.position=e.position),void 0!==e.initialPosition&&(t.initialPosition=e.initialPosition),void 0!==e.duration&&(t.duration=e.duration),void 0!==e.paused&&(t.paused=e.paused),void 0!==e.reason&&(t.reason=e.reason),t}(t||this._loadedOptions||{});return this._setListIndex(e,n).then(this._setListOptions).then(this._replaceCurrentList)}play(e,t){return this.load(e,t).then((()=>{if(this._loadedList!==e)return a.CANCELLED;const t=this._loadedOptions?this._loadedOptions.reason:it.UNKNOWN;return this.next(t)}))}canChangeTrack(){return this._loadedList?this._loadedList.peekNext({reason:it.FORWARD_BUTTON,listConstants:et}).then((e=>e!==et.FORBIDDEN)):Promise.resolve(!0)}next(e){if(!e)return Promise.reject(new st(o.LIST_PLAYER_INVALID_ARGUMENT,"The argument `reason` is required."));const t=this._loadedList;if(!t)return Promise.reject(new st(o.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."));this.emitSync(i.LIST_PLAYER_BEFORE_NEXT,{list:t,reason:e});const n=this._incrementSeqId(),r={reason:e,listConstants:et};return t.next(r).then((r=>this._currentSeqId!==n?a.CANCELLED:r===et.FORBIDDEN?a.FORBIDDEN:r===et.NULL_VALUE?this.next(e):r===et.LIST_END?(this.emit(i.LIST_PLAYER_LIST_ENDED,{list:t,reason:it.END_PLAY}),this.clear(e),a.LIST_END):ct(r)?r.playable?this._changeTrack(r,e,n):(this.emit(i.LIST_PLAYER_TRACK_UNPLAYABLE,{track:r,list:t}),this.next(e)):a.INVALID))}previous(e){if(!e)return Promise.reject(new st(o.LIST_PLAYER_INVALID_ARGUMENT,"The argument `reason` is required."));const t=this._loadedList;if(!t)return Promise.reject(new st(o.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."));this.emitSync(i.LIST_PLAYER_BEFORE_PREVIOUS,{list:t,reason:e});const n=this._incrementSeqId(),r={reason:e,listConstants:et};return t.previous(r).then((r=>this._currentSeqId!==n?a.CANCELLED:r===et.FORBIDDEN?a.FORBIDDEN:r===et.NULL_VALUE?this.previous(e):r===et.LIST_START?(this.emit(i.LIST_PLAYER_LIST_ENDED,{list:t,reason:it.END_PLAY}),this.clear(e),a.LIST_END):ct(r)?r.playable?this._changeTrack(r,e,n):(this.emit(i.LIST_PLAYER_TRACK_UNPLAYABLE,{track:r,list:t}),this.previous(e)):a.INVALID))}pause(){return this._loadedList?this._currentTrack?this._getTrackPlayer().then((e=>e.pause().then((()=>a.SUCCESS)).catch((e=>"AbortError"===(null==e?void 0:e.name)?a.CANCELLED:a.FORBIDDEN)))):Promise.resolve(a.SUCCESS):Promise.reject(new st(o.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."))}resume(){return this._loadedList?this._currentTrack?this._getTrackPlayer().then((e=>e.resume().then((()=>a.SUCCESS)).catch((e=>"AbortError"===(null==e?void 0:e.name)?a.CANCELLED:a.FORBIDDEN)))):Promise.resolve(a.SUCCESS):Promise.reject(new st(o.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."))}togglePlay(){return this._loadedList?this._currentTrack?this._getTrackPlayer().then((e=>e.togglePlay().then((()=>a.SUCCESS)).catch((e=>"AbortError"===(null==e?void 0:e.name)?a.CANCELLED:a.FORBIDDEN)))):Promise.resolve(a.SUCCESS):Promise.reject(new st(o.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."))}stop(e){const t={reason:e||it.UNKNOWN},n=this._currentTrack;return n&&n.logData&&(t.source=n.logData.source),this._incrementSeqId(),this._getTrackPlayer().then((e=>(e.stop(t),this.emit(i.LIST_PLAYER_STOPPED,{uid:this._uid,options:this._currentTrackOptions,list:this._loadedList}),a.SUCCESS)))}clear(e){return this.stop(e).then((()=>(this._loadedList=null,this._loadedOptions=null,this._currentTrack=null,this._currentTrackOptions=null,this.emit(i.LIST_PLAYER_CLEARED,null),a.SUCCESS)))}setShuffle(e){const t=!!e;if(this._shuffled!==t){this._shuffled=t,this.emit(i.LIST_PLAYER_SHUFFLE_CHANGED,{player:this,shuffled:t});const e=this._loadedList;e&&e.setShuffle(this._shuffled)}return Promise.resolve(a.SUCCESS)}setRepeatMode(e){if(!(e in ot))return Promise.reject(new st(o.LIST_PLAYER_INVALID_ARGUMENT,"The value of repeat mode is not a correct RepeatMode enum value"));if(this._repeatMode!==e){this._repeatMode=e,this.emit(i.LIST_PLAYER_REPEAT_MODE_CHANGED,{player:this,repeatMode:e});const t=this._loadedList;t&&t.setRepeatMode(this._repeatMode)}return Promise.resolve(a.SUCCESS)}getVolume(){return this._getTrackPlayer().then((e=>e.getVolume()))}setVolume(e,t=null){return this._getTrackPlayer().then((n=>(n.setVolume(e,{commandId:null!=t?t:void 0}),this.emit(i.LIST_PLAYER_VOLUME_CHANGED,{volume:e,commandId:t}),a.SUCCESS)))}seek(e,t=it.SEEK){var n,r;const s=this._loadedList;if(!s)return Promise.reject(new st(o.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."));if("function"==typeof s.allowSeeking&&!s.allowSeeking())return Promise.reject(new st(o.LIST_PLAYER_FORBIDDEN,"The operation is not allowed."));const c=null!==(r=null===(n=s.handleSeek)||void 0===n?void 0:n.call(s,e,{reason:t,listConstants:et}))&&void 0!==r?r:e;return c===et.PAUSE?this.pause().then((t=>(this.emit(i.LIST_PLAYER_SEEK_HANDLED,{position:e,reason:c}),t))):c===et.IGNORE?(this.emit(i.LIST_PLAYER_SEEK_HANDLED,{position:e,reason:c}),Promise.resolve(a.SUCCESS)):this._currentTrack?this._getTrackPlayer().then((e=>(e.seek(c),a.SUCCESS))):Promise.resolve(a.SUCCESS)}getListConstants(){return et}getLoadedList(){return this._loadedList}getLoadedOptions(){return this._loadedOptions}getPlayerState(){return this._getTrackPlayer().then((e=>{const t=e.getPlayerState();return Object.assign(Object.assign({},t),{position:this._translatePosition(t.position),duration:this._translateDuration(t.duration)})}))}getState(){return this.getPlayerState().then((e=>({playbackState:e,track:this._currentTrack,list:this._loadedList,options:this._loadedOptions})))}getMediaConfig(){return this._getTrackPlayer().then((e=>e.getMediaConfig()))}hideSubtitles(){return this._getTrackPlayer().then((e=>e.hideSubtitles())).then((()=>a.SUCCESS))}showSubtitles(){return this._getTrackPlayer().then((e=>e.showSubtitles())).then((()=>a.SUCCESS))}areSubtitlesShown(){return this._getTrackPlayer().then((e=>e.areSubtitlesShown()))}getSubtitleLanguages(){return this._getTrackPlayer().then((e=>e.getSubtitleLanguages()))}getActiveSubtitleLanguage(){return this._getTrackPlayer().then((e=>{var t;return null!==(t=e.getActiveSubtitleLanguage())&&void 0!==t?t:null}))}getCurrentBandwidth(){return this._getTrackPlayer().then((e=>e.getCurrentBandwidth()))}setSubtitleLanguage(e){return this._getTrackPlayer().then((t=>t.setSubtitleLanguage(e))).then((()=>a.SUCCESS))}setPlaybackSpeed(e){return this._getTrackPlayer().then((t=>t.setPlaybackSpeed(e))).then((e=>e?a.SUCCESS:a.FORBIDDEN))}}const dt=d.P.forTag("playback.init");function ut(e){return new Promise(((t,n)=>{var i,r,o,a;if(!e.transport)return void n(new TypeError("Argument transport is required."));if("undefined"!=typeof window){("boolean"==typeof window.isSecureContext?window.isSecureContext:function(){if("undefined"==typeof window||!window.location)return!1;const e=window.location;if("https"===e.protocol||"file"===e.protocol)return!0;const t=e.hostname;return!!/^127(\.[0-255]){3}$|^locahost\.?$|\.localhost\.?$/.test(t)}())||null===(i=window.console)||void 0===i||i.warn("%cDRM might not be available from unsecure contexts","background: #222; color: #bada55; font-size: 40px")}const{transport:s}=e,[c="",d=""]=(e.sdkId||"").split(":"),u=Object.assign(Object.assign({},e),{tracker:Ge.create(),audioResolver:new Fe(s),videoResolver:new Ve(s),licenseURLResolver:new We({transport:s,sdk:{name:c,version:d},securityLevel:e.securityLevel,useTestLicenseServer:e.useTestLicenseServer}),newBufferPerTrack:null===(r=e.newBufferPerTrack)||void 0===r||r,preinitMediaElement:null===(o=e.preinitMediaElement)||void 0===o||o});e.unauthenticatedLogs&&!(null===(a=e.loggerOptions)||void 0===a?void 0:a.endpoint)&&(e.loggerOptions=Object.assign(Object.assign({},e.loggerOptions),{endpoint:"https://spclient.wg.spotify.com/melody/unauth"})),Ce.create(u).then((t=>{const n=Object.assign({disableMux:!0},e.loggerOptions),i=function(e){return new qe(e)}(Object.assign(Object.assign({},n),{transport:s,sdkId:e.sdkId})),r=Me.create({transport:s,player:t,logSender:i});return(null==n?void 0:n.disableMux)||Je.create({player:t,mux:l,envKey:null==n?void 0:n.muxEnvKey,sdk:c,sdkVersion:d,platform:null==n?void 0:n.platform,platformVersion:null==n?void 0:n.clientVersion}).ready().then((()=>dt.info("MuxReporter ready")),(e=>dt.error("Failed to instantiate MuxReporter",null==e?void 0:e.message))),{player:t,logger:r}})).then(t,n)}))}},9723:(e,t,n)=>{"use strict";var i,r,o,a=n(1542),s=n(1873),c=n.n(s),l=n(9372),d=n.n(l),u=n(5816),_=n.n(u),p=n(5526),h=n.n(p),f=(n(3238),n(895),n(2077),n(911),n(2081),n(5623),n(2571),n(1315));function E(e){return"string"!=typeof e}!function(e){e.af="af",e.am="am",e.ar="ar",e.az="az",e.bg="bz",e.bn="bn",e.bho="bho",e.cs="cs",e.da="da",e.de="de",e.el="el",e.en="en",e.es419="es-419",e.es="es",e.et="et",e.fa="fa",e.fi="fi",e.fil="fil",e.frCA="fr-CA",e.fr="fr",e.gu="gu",e.he="he",e.hi="hi",e.hr="hr",e.hu="hu",e.id="id",e.is="is",e.it="it",e.ja="ja",e.kn="kn",e.ko="ko",e.lt="lt",e.lv="lv",e.ml="ml",e.mr="mr",e.ms="ms",e.nb="bn",e.ne="ne",e.nl="nl",e.or="or",e.paIN="pa-IN",e.paPK="pa-PK",e.pl="pl",e.ptBR="pt-BR",e.ptPT="pa-PT",e.ro="ro",e.ru="ru",e.sk="sk",e.sl="sl",e.sr="sr",e.sv="sv",e.sw="sw",e.ta="ta",e.te="te",e.th="th",e.tr="tr",e.uk="uk",e.ur="ur",e.vi="vi",e.zhCN="zh-CN",e.zhTW="zh-TW",e.zu="zu"}(i||(i={})),function(e){e.AR="، ",e.FA="، ",e.EN=", "}(r||(r={})),function(e){e.ZERO="zero",e.ONE="one",e.TWO="two",e.FEW="few",e.MANY="many",e.OTHER="other"}(o||(o={}));var m={},g=function(e,t){try{return(m[e]||(m[e]=new Intl.PluralRules(e))).select(t)}catch(n){return o.OTHER}};function y(e){return"number"==typeof e?e.toString():e.replace(/\$/,"$$$$")}var v=function(e){return"ar"===e?"ar-u-nu-latn":e},S=function(){function e(){d()(this,e),h()(this,"_locale",void 0),h()(this,"_dictionary",void 0),h()(this,"_isPseudoLocalizationOn",void 0),this._dictionary={},this._locale=i.en,this._isPseudoLocalizationOn=!1}return _()(e,[{key:"setDictionary",value:function(e){this._dictionary=e}},{key:"setLocale",value:function(e){this._locale=e}},{key:"getLocale",value:function(){return this._locale}},{key:"enablePseudoLocalization",value:function(){this._isPseudoLocalizationOn=!0}},{key:"disablePseudoLocalization",value:function(){this._isPseudoLocalizationOn=!1}},{key:"toLocaleLowerCase",value:function(e){return null==e?void 0:e.toLocaleLowerCase(this._locale)}},{key:"toLocaleUpperCase",value:function(e){return null==e?void 0:e.toLocaleUpperCase(this._locale)}},{key:"get",value:function(e){for(var t=(e in this._dictionary?this._dictionary[e]:e),n="",i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];if(E(t)){var a=r[0],s=g(this._locale,parseInt(a,10)),l=t[s];void 0!==l?n=l:t.other&&(n=t.other)}else n=t;if(/%\d%/.test(n)){var d=["desktop.login.DefaultErrorMessage","desktop.login.ErrorProxyAuthRequired","desktop.login.MissingUserInfoMessage","desktop.login.RegionMismatchMessage","desktop.login.ClientUpdateFail","desktop.login.FbUserNotFoundSignUp","desktop.login.errorCode","desktop-auth.error"];if(!d.includes(e))throw new Error("i18n: The placeholder format %0% is legacy and is only allowed for existing strings.")}if((null==r?void 0:r.length)>0)for(var u=0;u<r.length;u++){var _=r[u];if(null!=_)if("string"==typeof _)n=n.replace("{".concat(u,"}"),y(_)).replace("%".concat(u,"%"),y(_));else if("number"==typeof _){var p=this.formatNumber(_);n=n.replace("{".concat(u,"}"),p).replace("%".concat(u,"%"),p)}else if("object"===c()(_))for(var h=0,m=Object.keys(_);h<m.length;h++){var v=m[h],S=_[v];n=n.replace("%".concat(v,"%"),y(S))}}return this._isPseudoLocalizationOn&&(n=f.ZP.localize(n)),n}},{key:"getSeparator",value:function(){switch(this._locale){case i.ar:return r.AR;case i.fa:return r.FA;default:return r.EN}}},{key:"formatNumber",value:function(e,t){return e.toLocaleString(v(this._locale),t)}},{key:"formatNumberCompact",value:function(t,n){var i={notation:"compact",maximumFractionDigits:1};if(n){var r=new e;return r.setLocale(n),r.formatNumber(t,i)}return this.formatNumber(t,i)}},{key:"formatDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={year:"numeric",month:"long",day:"numeric"},i=t||n;return new Intl.DateTimeFormat(v(this._locale),i).format(e)}},{key:"formatRelativeDate",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=new Date(Date.now()),r=(e=new Date(e)).getTime()-i.getTime(),o=Math.abs(r)<2592e6;if(o&&null!==(t=Intl)&&void 0!==t&&t.RelativeTimeFormat){var a=R(r),s=a.days,c=a.hours,l=a.minutes,d=a.seconds,u=new Intl.RelativeTimeFormat;return s||c||l?s||c?s?u.format(s,"days"):u.format(c,"hours"):u.format(l,"minutes"):u.format(d,"seconds")}return this.formatDate(e,n)}},{key:"__resetForTests",value:function(){this._dictionary={},this._locale=i.en,m={}}}]),e}();function R(e){return{seconds:Math.round(e/1e3),minutes:Math.round(e/1e3/60),hours:Math.round(e/1e3/60/60),days:Math.round(e/1e3/60/60/24)}}var A=new S;const T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;e.documentElement.classList.add("no-focus-outline"),e.addEventListener("keydown",(function(t){"Tab"===t.key&&e.documentElement.classList.remove("no-focus-outline")}),!0),e.addEventListener("mousedown",(function(){e.documentElement.classList.add("no-focus-outline")}),!0)};n(3214);var b,L=n(4647),I=n.n(L),P=n(3854),C=n.n(P),O=n(4422),D=n.n(O),k=n(7066),w=n.n(k),N=n(8620),M=n.n(N),U=(n(3938),n(5769),n(6446),n(7460),n(4078),n(3352),n(7471),n(2046)),x=n(1504),F=n.n(x),Y=n(6292),B=n.n(Y),K=n(7135),H=n.n(K);n(938),n(2482);function G(e){return V.apply(this,arguments)}function V(){return(V=F()(H().mark((function e(t){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}throw new Error("Invalid call to sendMetric before initSemanticMetrics.");case 2:return e.abrupt("return",b(t));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=n(4885),W=n.n(j);function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=M()(e);if(t){var r=M()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return w()(this,n)}}var z,Q=function(e){D()(n,e);var t=q(n);function n(e){var i;d()(this,n);var r=e.message,o=e.url,a=e.method,s=e.status;return i=t.call(this,r),h()(I()(i),"name",void 0),h()(I()(i),"requestUrl",void 0),h()(I()(i),"requestMethod",void 0),h()(I()(i),"status",void 0),i.name="HttpError",i.requestUrl=o,i.requestMethod=a,i.status=s,i}return _()(n,null,[{key:"fromResponse",value:function(e,t){return new n({message:e.statusText,url:e.url,method:t,status:e.status})}}]),n}(W()(Error)),Z=function(e){D()(n,e);var t=q(n);function n(e){var i;d()(this,n);var r=e.timeout,o=e.url,a=e.method;return i=t.call(this,{message:"".concat(a.toUpperCase()," ").concat(o," timed out (").concat(r,"ms)"),url:o,method:a,status:503}),h()(I()(i),"name",void 0),h()(I()(i),"timeout",void 0),i.name="RequestTimeoutError",i.timeout=r,i}return n}(Q),$=(n(5901),n(8010),n(252),n(4009),n(7613)),X=n.n($);n(5849),n(1418);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te=function(){function e(){d()(this,e),h()(this,"_accessToken",void 0),h()(this,"_market",void 0),h()(this,"_headers",void 0),h()(this,"_globalRequestHeaders",void 0),h()(this,"_shouldSendMarket",void 0),h()(this,"_shouldSendGlobalHeaders",void 0),h()(this,"_locale",void 0),h()(this,"_shouldSendLocale",void 0),h()(this,"_shouldSendAuthorization",void 0),h()(this,"_host",void 0),h()(this,"path",void 0),h()(this,"responseType",void 0),h()(this,"queryParameters",void 0),h()(this,"_method",void 0),h()(this,"jsonContentType",void 0),h()(this,"body",void 0),h()(this,"_endpointIdentifier",void 0),h()(this,"_startTimestamp",void 0),h()(this,"_includeCredentials",void 0),this._accessToken=null,this._market="",this._headers=[],this._globalRequestHeaders=[],this._shouldSendMarket=!0,this._shouldSendGlobalHeaders=!0,this._locale=null,this._shouldSendLocale=!1,this._shouldSendAuthorization=!0,this._host="",this.path="",this.responseType="json",this.queryParameters=void 0,this._method="GET",this.jsonContentType=!1,this.body=null,this._endpointIdentifier=null,this._startTimestamp=null,this._includeCredentials=!1}var t;return _()(e,[{key:"getRequestImplementation",value:function(){return z}},{key:"accessToken",set:function(e){this._accessToken=e}},{key:"market",get:function(){return this._market},set:function(e){this._market=e}},{key:"locale",get:function(){return this._locale},set:function(e){this._locale=e}},{key:"globalRequestHeaders",get:function(){return this._globalRequestHeaders},set:function(e){this._globalRequestHeaders=e}},{key:"startTimestamp",get:function(){return this._startTimestamp}},{key:"host",get:function(){return this._host}},{key:"method",get:function(){return this._method}},{key:"endpointIdentifier",get:function(){return this._endpointIdentifier}},{key:"withHost",value:function(e){return this._host=e,this}},{key:"withPath",value:function(e){return this.path=e,this}},{key:"withResponseType",value:function(e){return this.responseType=e,this}},{key:"withEndpointIdentifier",value:function(e){return this._endpointIdentifier=e,this}},{key:"withQueryParameters",value:function(e){return this.queryParameters=e,this}},{key:"withBody",value:function(e){return this.body=e,this}},{key:"withMethod",value:function(e){return this._method=e,this}},{key:"withoutMarket",value:function(){return this._shouldSendMarket=!1,this}},{key:"withoutGlobalHeaders",value:function(){return this._shouldSendGlobalHeaders=!1,this}},{key:"withoutAuthorization",value:function(){return this._shouldSendAuthorization=!1,this}},{key:"withLocale",value:function(e){return this._shouldSendLocale=!0,e&&(this._locale=e),this}},{key:"withJsonContentType",value:function(){return this.jsonContentType=!0,this}},{key:"withHeaders",value:function(e){return this._headers=e,this}},{key:"withCredentials",value:function(){return this._includeCredentials=!0,this}},{key:"onBeforeSend",value:function(e){}},{key:"onAfterSend",value:function(e){}},{key:"send",value:(t=F()(H().mark((function e(){var t,n,i,r=this;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=new z(this.method,"".concat(this._host).concat(this.path),this._shouldSendAuthorization),this._shouldSendMarket&&this.market&&(this.queryParameters=ee(ee({},this.queryParameters),{},{market:this.market})),this._shouldSendLocale&&this.locale&&(this.queryParameters=ee(ee({},this.queryParameters),{},{locale:this.locale})),this.locale&&t.addHeader("Accept-Language",this.locale),t.withQueryParameters(this.queryParameters),t.withResponseType(this.responseType),this._shouldSendAuthorization&&this._accessToken&&t.addHeader("Authorization","Bearer ".concat(this._accessToken)),t.addHeader("Accept","application/json"),this._includeCredentials&&t.includeCredentials(),this._shouldSendGlobalHeaders&&this._globalRequestHeaders.length>0&&this._globalRequestHeaders.forEach((function(e){var n=X()(e,2),i=n[0],r=n[1];t.addHeader(i,r)})),n=0;n<this._headers.length;n++)i=this._headers[n],t.addHeader(i.key,i.value);this.jsonContentType&&t.addHeader("Content-Type","application/json;charset=UTF-8"),this.body&&t.withPostData(this.body),e.prev=13,this.onBeforeSend(t),e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(13),e.abrupt("return",Promise.reject(e.t0));case 20:return this._startTimestamp=Date.now(),e.abrupt("return",t.send().then((function(e){return r.onAfterSend(),e})).catch((function(e){throw r.onAfterSend(e),e})));case 22:case"end":return e.stop()}}),e,this,[[13,17]])}))),function(){return t.apply(this,arguments)})}],[{key:"setRequestImplementation",value:function(e){z=e}}]),e}(),ne=(n(684),null);function ie(){if(null===ne)throw new Error("Missing `instance`. Have you called `setTransportInstance` yet?");return ne}var re=function(){function e(t,n,i){return d()(this,e),h()(this,"method",void 0),h()(this,"url",void 0),h()(this,"postData",void 0),h()(this,"queryParameters",void 0),h()(this,"responseType",void 0),h()(this,"_headers",void 0),h()(this,"_authorize",void 0),h()(this,"_includeCredentials",void 0),this.method=t,this.url=n,this.postData=null,this.queryParameters=void 0,this.responseType="json",this._headers={},this._authorize=i,this._includeCredentials=!1,this}var t;return _()(e,[{key:"withQueryParameters",value:function(e){this.queryParameters=e}},{key:"withPostData",value:function(e){this.postData=e}},{key:"withResponseType",value:function(e){this.responseType=e}},{key:"addHeader",value:function(e,t){return this._headers[e]=t,this}},{key:"includeCredentials",value:function(){return this._includeCredentials=!0,this}},{key:"send",value:(t=F()(H().mark((function e(){var t,n,i,r,o;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ie(),n=new URLSearchParams(this.queryParameters).toString(),i="".concat(this.url).concat(n?"?".concat(n):""),r={method:this.method,responseType:this.responseType,headers:this._headers,authorize:this._authorize,rejectNotOk:!0},this._includeCredentials&&(r.credentials="include"),this.postData&&(null!==(o=this._headers["Content-Type"])&&void 0!==o&&o.startsWith("application/json;charset=UTF-8")?r.payload=JSON.stringify(this.postData):r.payload=this.postData),e.abrupt("return",t.request(i,r).then((function(e){return e})).catch((function(e){throw e})));case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=M()(e);if(t){var r=M()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return w()(this,n)}}function ae(e){return"".concat(e.method,"::").concat(e.host).concat(e.path,"::").concat(JSON.stringify(e.queryParameters))}function se(e,t,n){try{G({metric_type:U.MetricTypes.COUNTER,what:"request-rate",value:1,tags:{endpoint:e,statusCode:t,isFatal:n}}).catch((function(){return{}}))}catch(i){}}var ce=function(e){D()(n,e);var t=oe(n);function n(e){var i;return d()(this,n),i=t.call(this,e),h()(I()(i),"pendingRequests",void 0),i.pendingRequests=new Set,i}return _()(n,[{key:"resetPendingRequests",value:function(){this.pendingRequests=new Set}},{key:"build",value:function(){var e,t=this,i=C()(M()(n.prototype),"build",this).call(this);return i.onBeforeSend=function(){if(e=ae(i),t.pendingRequests.has(e)){var n=new Error("DUPLICATE_REQUEST_ERROR: Already sent this request (".concat(e,")"));throw n.name="DUPLICATE_REQUEST_ERROR",n}"GET"===i.method.toUpperCase()&&t.pendingRequests.add(e)},i.onAfterSend=function(n){e=ae(i);var r="unknown",o=!1;if(null!==i.endpointIdentifier&&(o=!0,r="".concat(i.method," ").concat(i.host||window.location.origin,"::").concat(i.endpointIdentifier)),n)throw o&&se(r,JSON.stringify(n.status||0),JSON.stringify(0===(i.endpointIdentifier||"").indexOf("/me"))),t.pendingRequests.delete(e),Q.fromResponse(n,i.method);if(o){se(r,"200","false");var a=Date.now()-(i.startTimestamp||0);!function(e,t,n){try{G({metric_type:U.MetricTypes.TIMER,what:"request-duration",value:n,tags:{endpoint:e,statusCode:t}}).catch((function(){return{}}))}catch(i){}}(r,"200",U.Time.fromMillis(a).asNanos())}t.pendingRequests.delete(e)},i}}]),n}(function(){function e(t){d()(this,e),h()(this,"_accessToken",void 0),h()(this,"_market",void 0),h()(this,"_locale",void 0),h()(this,"_globalRequestHeaders",void 0),h()(this,"_RequestImplementation",void 0),this._accessToken=null,this._market="",this._locale="",this._globalRequestHeaders=[],this._RequestImplementation=t||re}return _()(e,[{key:"accessToken",get:function(){return this._accessToken},set:function(e){this._accessToken=e}},{key:"globalRequestHeaders",get:function(){return this._globalRequestHeaders},set:function(e){this._globalRequestHeaders=e}},{key:"market",get:function(){return this._market},set:function(e){this._market=e}},{key:"locale",get:function(){return this._locale},set:function(e){this._locale=e}},{key:"resetPendingRequests",value:function(){}},{key:"build",value:function(){te.setRequestImplementation(this._RequestImplementation);var e=new te;return e.accessToken=this._accessToken,e.market=this.market,e.locale=this.locale,e.globalRequestHeaders=this.globalRequestHeaders,e}}]),e}()),le=(n(6252),n(2403)),de=n(3817),ue=n.n(de),_e=n(473),pe=n.n(_e);function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ee=ue()(le.fetch);function me(e){return e&&void 0!==e.retries&&e.retries>0?Ee:le.fetch}function ge(e,t){return ye.apply(this,arguments)}function ye(){return ye=F()(H().mark((function e(t,n){var i,r,o,a,s,c=arguments;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.length>2&&void 0!==c[2]?c[2]:1e4,r=new(pe()),o=r.signal,a=setTimeout((function(){return r.abort()}),i),s=me(n),e.abrupt("return",s(t,fe(fe({},n),{},{signal:o})).then((function(e){return clearTimeout(a),e})).catch((function(e){var r;if("AbortError"===e.name)throw new Z({timeout:i,url:t,method:null!==(r=null==n?void 0:n.method)&&void 0!==r?r:"get"});throw clearTimeout(a),e})));case 6:case"end":return e.stop()}}),e)}))),ye.apply(this,arguments)}function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Re=function(){function e(t,n){return d()(this,e),h()(this,"method",void 0),h()(this,"url",void 0),h()(this,"postData",void 0),h()(this,"queryParameters",void 0),h()(this,"responseType",void 0),h()(this,"_headers",void 0),h()(this,"_includeCredentials",void 0),this.method=t,this.url=n,this.postData=null,this.queryParameters=void 0,this.responseType="json",this._headers={},this._includeCredentials=!1,this}var t;return _()(e,[{key:"withQueryParameters",value:function(e){this.queryParameters=e}},{key:"withResponseType",value:function(e){this.responseType=e}},{key:"withPostData",value:function(e){this.postData=e}},{key:"addHeader",value:function(e,t){return this._headers[e]=t,this}},{key:"includeCredentials",value:function(){return this._includeCredentials=!0,this}},{key:"send",value:(t=F()(H().mark((function e(){var t,n,i,r=this;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.postData&&(t=null!==(n=this._headers["Content-Type"])&&void 0!==n&&n.startsWith("application/json;charset=UTF-8")?JSON.stringify(this.postData):this.postData),i=new URLSearchParams(this.queryParameters).toString(),e.abrupt("return",ge("".concat(this.url).concat(i?"?".concat(i):""),{method:this.method,body:t,credentials:this._includeCredentials?"include":void 0,headers:Se({"User-Agent":{NODE_ENV:"production",DEBUG_EVENT_SENDER:!1,DEBUG_SEMANTIC_METRICS:void 0,CDN_FILE_URLS:'{"fonts/CircularSpUIAraOnly-Black.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Black.6d6a4c25.otf","fonts/CircularSpUIAraOnly-Black.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Black.05b31ded.woff","fonts/CircularSpUIAraOnly-Black.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Black.c32951f4.woff2","fonts/CircularSpUIAraOnly-Bold.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Bold.f97cb921.otf","fonts/CircularSpUIAraOnly-Bold.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Bold.9ddc7126.woff","fonts/CircularSpUIAraOnly-Bold.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Bold.317e96e5.woff2","fonts/CircularSpUIAraOnly-Book.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Book.f0effcd1.otf","fonts/CircularSpUIAraOnly-Book.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Book.3ad862e2.woff","fonts/CircularSpUIAraOnly-Book.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Book.aaab109b.woff2","fonts/CircularSpUIAraOnly-Light.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Light.f0833f3b.otf","fonts/CircularSpUIAraOnly-Light.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Light.5c7ed8d8.woff","fonts/CircularSpUIAraOnly-Light.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Light.dde45e52.woff2","fonts/CircularSpUICyrOnly-Black.otf":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Black.50cd1ca9.otf","fonts/CircularSpUICyrOnly-Black.woff":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Black.7536a73f.woff","fonts/CircularSpUICyrOnly-Black.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Black.f5526fc4.woff2","fonts/CircularSpUICyrOnly-Bold.otf":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Bold.67641b90.otf","fonts/CircularSpUICyrOnly-Bold.woff":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Bold.909126fc.woff","fonts/CircularSpUICyrOnly-Bold.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Bold.30dc9fb2.woff2","fonts/CircularSpUICyrOnly-Book.otf":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Book.15af6ebe.otf","fonts/CircularSpUICyrOnly-Book.woff":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Book.918c53b8.woff","fonts/CircularSpUICyrOnly-Book.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Book.6a858994.woff2","fonts/CircularSpUICyrOnly-Light.otf":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Light.b10eb959.otf","fonts/CircularSpUICyrOnly-Light.woff":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Light.034997d0.woff","fonts/CircularSpUICyrOnly-Light.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Light.55fa9f4a.woff2","fonts/CircularSpUIHbrOnly-Black.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Black.11abebe4.otf","fonts/CircularSpUIHbrOnly-Black.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Black.0a11e734.woff","fonts/CircularSpUIHbrOnly-Black.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Black.217fb21f.woff2","fonts/CircularSpUIHbrOnly-Bold.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Bold.57b36278.otf","fonts/CircularSpUIHbrOnly-Bold.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Bold.9f406804.woff","fonts/CircularSpUIHbrOnly-Bold.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Bold.ef043f44.woff2","fonts/CircularSpUIHbrOnly-Book.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Book.fae4aece.otf","fonts/CircularSpUIHbrOnly-Book.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Book.ad2b13cd.woff","fonts/CircularSpUIHbrOnly-Book.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Book.cb36b6ec.woff2","fonts/CircularSpUIHbrOnly-Light.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Light.2e1df62a.otf","fonts/CircularSpUIHbrOnly-Light.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Light.2128eeac.woff","fonts/CircularSpUIHbrOnly-Light.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Light.4884da16.woff2","fonts/CircularSpUIv3T-Black.ttf":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Black.ce8ef887.ttf","fonts/CircularSpUIv3T-Black.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Black.effa986f.woff","fonts/CircularSpUIv3T-Black.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Black.c21e63c5.woff2","fonts/CircularSpUIv3T-Bold.ttf":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Bold.7eb7d0f7.ttf","fonts/CircularSpUIv3T-Bold.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Bold.10e93738.woff","fonts/CircularSpUIv3T-Bold.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Bold.8d0a45cc.woff2","fonts/CircularSpUIv3T-Book.ttf":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Book.a357677a.ttf","fonts/CircularSpUIv3T-Book.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Book.ea8d19db.woff","fonts/CircularSpUIv3T-Book.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Book.3466e0ec.woff2","fonts/CircularSpUIv3T-Light.ttf":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Light.89e4be2e.ttf","fonts/CircularSpUIv3T-Light.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Light.2a78c017.woff","fonts/CircularSpUIv3T-Light.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Light.afd9ab26.woff2","fonts/spoticon_regular_2.ttf":"https://open.scdn.co/cdn/fonts/spoticon_regular_2.127670b5.ttf","fonts/spoticon_regular_2.woff":"https://open.scdn.co/cdn/fonts/spoticon_regular_2.ff4c6091.woff","fonts/spoticon_regular_2.woff2":"https://open.scdn.co/cdn/fonts/spoticon_regular_2.d319d911.woff2","generated/manifest-mobile-web-player.json":"https://open.scdn.co/cdn/generated/manifest-mobile-web-player.7e7a2009.json","generated/manifest-web-player.json":"https://open.scdn.co/cdn/generated/manifest-web-player.1d90e604.json","generated/opensearch.xml":"https://open.scdn.co/cdn/generated/opensearch.7f46e5b2.xml","images/checkmark.png":"https://open.scdn.co/cdn/images/checkmark.9e1a7608.png","images/concert-hub-fb-card.png":"https://open.scdn.co/cdn/images/concert-hub-fb-card.edb38821.png","images/concert-hub-header.png":"https://open.scdn.co/cdn/images/concert-hub-header.56bcad9b.png","images/concert-hub-iphone-de.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-de.2f132ca3.png","images/concert-hub-iphone-el.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-el.8b3b94a4.png","images/concert-hub-iphone-en.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-en.88b1bea2.png","images/concert-hub-iphone-es_419.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-es_419.f61fbda5.png","images/concert-hub-iphone-es.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-es.f61fbda5.png","images/concert-hub-iphone-fi.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-fi.25a8376a.png","images/concert-hub-iphone-fr_CA.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-fr_CA.bc238a54.png","images/concert-hub-iphone-fr.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-fr.60ec537b.png","images/concert-hub-iphone-hu.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-hu.f1725c37.png","images/concert-hub-iphone-id.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-id.f70b2301.png","images/concert-hub-iphone-it.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-it.b18651c6.png","images/concert-hub-iphone-ja.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-ja.88b1bea2.png","images/concert-hub-iphone-ms.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-ms.c695e9de.png","images/concert-hub-iphone-nl.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-nl.70e57293.png","images/concert-hub-iphone-pl.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-pl.6ca1b2dc.png","images/concert-hub-iphone-pt_BR.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-pt_BR.7e417576.png","images/concert-hub-iphone-sv.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-sv.67301592.png","images/concert-hub-iphone-tr.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-tr.f081d198.png","images/concert-hub-iphone-zh_TW.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-zh_TW.88b1bea2.png","images/concert-hub-twitter-card.png":"https://open.scdn.co/cdn/images/concert-hub-twitter-card.f9d9a6d4.png","images/connect_header@1x.png":"https://open.scdn.co/cdn/images/connect_header@1x.8f827808.png","images/connect-to-devices-white.svg":"https://open.scdn.co/cdn/images/connect-to-devices-white.69d4229a.svg","images/desktop-auth-check.svg":"https://open.scdn.co/cdn/images/desktop-auth-check.65be3bbc.svg","images/desktop-auth-error.svg":"https://open.scdn.co/cdn/images/desktop-auth-error.b82f823b.svg","images/devices/android.png":"https://open.scdn.co/cdn/images/devices/android.58bbae05.png","images/devices/ios.png":"https://open.scdn.co/cdn/images/devices/ios.077f15ff.png","images/devices/mac-web.png":"https://open.scdn.co/cdn/images/devices/mac-web.cc876776.png","images/devices/mac.png":"https://open.scdn.co/cdn/images/devices/mac.5f2975e9.png","images/devices/windowsphone.png":"https://open.scdn.co/cdn/images/devices/windowsphone.35cd2cdd.png","images/embed-podcast/upsell-background.png":"https://open.scdn.co/cdn/images/embed-podcast/upsell-background.e870abfc.png","images/embed/copy-32_circle_grey_outline_bg.svg":"https://open.scdn.co/cdn/images/embed/copy-32_circle_grey_outline_bg.0c6130eb.svg","images/embed/embed-code-32_circle_grey_outline_bg.svg":"https://open.scdn.co/cdn/images/embed/embed-code-32_circle_grey_outline_bg.b40a255f.svg","images/embed/fb_colour.svg":"https://open.scdn.co/cdn/images/embed/fb_colour.13fa515f.svg","images/embed/messenger_colour.svg":"https://open.scdn.co/cdn/images/embed/messenger_colour.8f4836ec.svg","images/embed/twitter_colour.svg":"https://open.scdn.co/cdn/images/embed/twitter_colour.456d46db.svg","images/embed/whatsapp.svg":"https://open.scdn.co/cdn/images/embed/whatsapp.e33bfab4.svg","images/emi.png":"https://open.scdn.co/cdn/images/emi.c7e51c1a.png","images/employee-podcasts-modal-art.png":"https://open.scdn.co/cdn/images/employee-podcasts-modal-art.32ebcdf8.png","images/equaliser-animated-green.gif":"https://open.scdn.co/cdn/images/equaliser-animated-green.f93a2ef4.gif","images/equaliser-green.svg":"https://open.scdn.co/cdn/images/equaliser-green.1184ed87.svg","images/favicon.ico":"https://open.scdn.co/cdn/images/favicon.5cb2bd30.ico","images/favicon.png":"https://open.scdn.co/cdn/images/favicon.0c211e2e.png","images/favicon16.png":"https://open.scdn.co/cdn/images/favicon16.c498a969.png","images/favicon32.png":"https://open.scdn.co/cdn/images/favicon32.8e66b099.png","images/focused_stroy_play.png":"https://open.scdn.co/cdn/images/focused_stroy_play.57a12bc7.png","images/follow/avatar-placeholder.png":"https://open.scdn.co/cdn/images/follow/avatar-placeholder.859bf94e.png","images/follow/sprite.gif":"https://open.scdn.co/cdn/images/follow/sprite.e282a709.gif","images/follow/sprite@1.png":"https://open.scdn.co/cdn/images/follow/sprite@1.0435c9db.png","images/hifi-button-off.svg":"https://open.scdn.co/cdn/images/hifi-button-off.87461500.svg","images/hifi-button-on.svg":"https://open.scdn.co/cdn/images/hifi-button-on.48a2de90.svg","images/hifi.svg":"https://open.scdn.co/cdn/images/hifi.0526a5b1.svg","images/home-icon.svg":"https://open.scdn.co/cdn/images/home-icon.ba66757a.svg","images/icons/Spotify_1024.png":"https://open.scdn.co/cdn/images/icons/Spotify_1024.4027f848.png","images/icons/Spotify_128.png":"https://open.scdn.co/cdn/images/icons/Spotify_128.c9ce2f2e.png","images/icons/Spotify_16.png":"https://open.scdn.co/cdn/images/icons/Spotify_16.aa3775a0.png","images/icons/Spotify_256.png":"https://open.scdn.co/cdn/images/icons/Spotify_256.c8416b60.png","images/icons/Spotify_32.png":"https://open.scdn.co/cdn/images/icons/Spotify_32.01f2b5c3.png","images/icons/Spotify_512.png":"https://open.scdn.co/cdn/images/icons/Spotify_512.49a0bf03.png","images/icons/Spotify_64.png":"https://open.scdn.co/cdn/images/icons/Spotify_64.375a69e1.png","images/icons/Spotify_MWP_192.png":"https://open.scdn.co/cdn/images/icons/Spotify_MWP_192.34e85b0e.png","images/icons/Spotify_MWP_512.png":"https://open.scdn.co/cdn/images/icons/Spotify_MWP_512.23e0876e.png","images/improved-modal-bg.jpg":"https://open.scdn.co/cdn/images/improved-modal-bg.ac225d3f.jpg","images/login-background.jpg":"https://open.scdn.co/cdn/images/login-background.078204fe.jpg","images/login-signup-burst.svg":"https://open.scdn.co/cdn/images/login-signup-burst.5f6a6521.svg","images/logo-complete-black.svg":"https://open.scdn.co/cdn/images/logo-complete-black.573d8227.svg","images/logo-white-2x.png":"https://open.scdn.co/cdn/images/logo-white-2x.4a6a33bc.png","images/merlin.png":"https://open.scdn.co/cdn/images/merlin.cd7e72d1.png","images/mid-year.png":"https://open.scdn.co/cdn/images/mid-year.9e2ead8f.png","images/moviebuff.png":"https://open.scdn.co/cdn/images/moviebuff.ce5d6de9.png","images/og-image.png":"https://open.scdn.co/cdn/images/og-image.860da0d8.png","images/orchard.png":"https://open.scdn.co/cdn/images/orchard.677c5ae0.png","images/playlist-folder-filled.svg":"https://open.scdn.co/cdn/images/playlist-folder-filled.f7932744.svg","images/rovi.png":"https://open.scdn.co/cdn/images/rovi.7b503678.png","images/s2l-desktopui-ltr.png":"https://open.scdn.co/cdn/images/s2l-desktopui-ltr.a0bb24a2.png","images/s2l-desktopui-rtl.png":"https://open.scdn.co/cdn/images/s2l-desktopui-rtl.862015c3.png","images/s2l-mobileui.png":"https://open.scdn.co/cdn/images/s2l-mobileui.3ad8f52b.png","images/sony.png":"https://open.scdn.co/cdn/images/sony.7e5692e6.png","images/spotifylogo.svg":"https://open.scdn.co/cdn/images/spotifylogo.a884cca3.svg","images/station-header-wave.svg":"https://open.scdn.co/cdn/images/station-header-wave.0f3784ea.svg","images/station-wave.svg":"https://open.scdn.co/cdn/images/station-wave.2b7b882c.svg","images/sw_saber_ahsoka1.png":"https://open.scdn.co/cdn/images/sw_saber_ahsoka1.9574535d.png","images/sw_saber_anakin.png":"https://open.scdn.co/cdn/images/sw_saber_anakin.6176307b.png","images/sw_saber_leia.png":"https://open.scdn.co/cdn/images/sw_saber_leia.7195cf21.png","images/sw_saber_luke.png":"https://open.scdn.co/cdn/images/sw_saber_luke.e96ed874.png","images/sw_saber_mace.png":"https://open.scdn.co/cdn/images/sw_saber_mace.43812892.png","images/sw_saber_rey.png":"https://open.scdn.co/cdn/images/sw_saber_rey.e06a68a5.png","images/sw_saber_vader.png":"https://open.scdn.co/cdn/images/sw_saber_vader.fbcf32dc.png","images/touch-icon-114.png":"https://open.scdn.co/cdn/images/touch-icon-114.2fdb1eb2.png","images/touch-icon-144.png":"https://open.scdn.co/cdn/images/touch-icon-144.dbd8dd2a.png","images/touch-icon-57.png":"https://open.scdn.co/cdn/images/touch-icon-57.2d68aabb.png","images/touch-icon-72.png":"https://open.scdn.co/cdn/images/touch-icon-72.cffecbdb.png","images/tracklist-placeholder.png":"https://open.scdn.co/cdn/images/tracklist-placeholder.b3518b89.png","images/universal.png":"https://open.scdn.co/cdn/images/universal.3ceb95fd.png","images/vinyl-bottom-layer.svg":"https://open.scdn.co/cdn/images/vinyl-bottom-layer.82d9f6ef.svg","images/vinyl-top-layer.svg":"https://open.scdn.co/cdn/images/vinyl-top-layer.b56c3ccf.svg","images/warner.png":"https://open.scdn.co/cdn/images/warner.a5039776.png","images/zara-larsson-singles.png":"https://open.scdn.co/cdn/images/zara-larsson-singles.2c824329.png","js/fb.js":"https://open.scdn.co/cdn/js/fb.83cf1e53.js","js/gtm.js":"https://open.scdn.co/cdn/js/gtm.fc4d97de.js","js/retargeting-pixels.js":"https://open.scdn.co/cdn/js/retargeting-pixels.1fa1ceda.js","js/urlRedirect.js":"https://open.scdn.co/cdn/js/urlRedirect.156df566.js","js/urlScheme.js":"https://open.scdn.co/cdn/js/urlScheme.f1e6e8b6.js"}',PRODUCT_NAME:"unknown"}.SERVER_UA,"Content-Type":Ae(this.responseType)},this._headers)}).then(function(){var e=F()(H().mark((function e(t){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=2;break}throw Q.fromResponse(t,r.method||"GET");case 2:if("text"!==r.responseType){e.next=8;break}return e.next=5,t.text();case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,t.json();case 10:e.t0=e.sent;case 11:return e.t1=e.t0,e.t2=t.status,e.abrupt("return",{body:e.t1,status:e.t2});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){throw e})));case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();function Ae(e){return"text"===e?"text/plain":"application/json"}var Te=null,be=function(){function e(){d()(this,e)}return _()(e,null,[{key:"setSession",value:function(e){if(e){var t=e.accessToken,n=this.getInstance();n.accessToken=t,t||n.resetPendingRequests()}}},{key:"setLocale",value:function(e){this.getInstance().locale=e}},{key:"setGlobalRequestHeaders",value:function(e){this.getInstance().globalRequestHeaders=e}},{key:"setMarket",value:function(e){this.getInstance().market=e}},{key:"resetInstance",value:function(){Te=null}},{key:"getInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Te||(Te=this.createNew(e)),Te}},{key:"createNew",value:function(e){var t=e.Constructor,n=void 0===t?ce:t,i=e.fromServer;return new n(void 0!==i&&i?Re:re)}}]),e}(),Le=n(3104),Ie=n(43),Pe=n(2198),Ce=n(402),Oe=(n(3902),n(3723));function De(e){var t,n='{"fonts/CircularSpUIAraOnly-Black.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Black.6d6a4c25.otf","fonts/CircularSpUIAraOnly-Black.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Black.05b31ded.woff","fonts/CircularSpUIAraOnly-Black.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Black.c32951f4.woff2","fonts/CircularSpUIAraOnly-Bold.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Bold.f97cb921.otf","fonts/CircularSpUIAraOnly-Bold.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Bold.9ddc7126.woff","fonts/CircularSpUIAraOnly-Bold.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Bold.317e96e5.woff2","fonts/CircularSpUIAraOnly-Book.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Book.f0effcd1.otf","fonts/CircularSpUIAraOnly-Book.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Book.3ad862e2.woff","fonts/CircularSpUIAraOnly-Book.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Book.aaab109b.woff2","fonts/CircularSpUIAraOnly-Light.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Light.f0833f3b.otf","fonts/CircularSpUIAraOnly-Light.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Light.5c7ed8d8.woff","fonts/CircularSpUIAraOnly-Light.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Light.dde45e52.woff2","fonts/CircularSpUICyrOnly-Black.otf":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Black.50cd1ca9.otf","fonts/CircularSpUICyrOnly-Black.woff":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Black.7536a73f.woff","fonts/CircularSpUICyrOnly-Black.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Black.f5526fc4.woff2","fonts/CircularSpUICyrOnly-Bold.otf":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Bold.67641b90.otf","fonts/CircularSpUICyrOnly-Bold.woff":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Bold.909126fc.woff","fonts/CircularSpUICyrOnly-Bold.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Bold.30dc9fb2.woff2","fonts/CircularSpUICyrOnly-Book.otf":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Book.15af6ebe.otf","fonts/CircularSpUICyrOnly-Book.woff":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Book.918c53b8.woff","fonts/CircularSpUICyrOnly-Book.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Book.6a858994.woff2","fonts/CircularSpUICyrOnly-Light.otf":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Light.b10eb959.otf","fonts/CircularSpUICyrOnly-Light.woff":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Light.034997d0.woff","fonts/CircularSpUICyrOnly-Light.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Light.55fa9f4a.woff2","fonts/CircularSpUIHbrOnly-Black.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Black.11abebe4.otf","fonts/CircularSpUIHbrOnly-Black.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Black.0a11e734.woff","fonts/CircularSpUIHbrOnly-Black.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Black.217fb21f.woff2","fonts/CircularSpUIHbrOnly-Bold.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Bold.57b36278.otf","fonts/CircularSpUIHbrOnly-Bold.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Bold.9f406804.woff","fonts/CircularSpUIHbrOnly-Bold.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Bold.ef043f44.woff2","fonts/CircularSpUIHbrOnly-Book.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Book.fae4aece.otf","fonts/CircularSpUIHbrOnly-Book.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Book.ad2b13cd.woff","fonts/CircularSpUIHbrOnly-Book.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Book.cb36b6ec.woff2","fonts/CircularSpUIHbrOnly-Light.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Light.2e1df62a.otf","fonts/CircularSpUIHbrOnly-Light.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Light.2128eeac.woff","fonts/CircularSpUIHbrOnly-Light.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Light.4884da16.woff2","fonts/CircularSpUIv3T-Black.ttf":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Black.ce8ef887.ttf","fonts/CircularSpUIv3T-Black.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Black.effa986f.woff","fonts/CircularSpUIv3T-Black.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Black.c21e63c5.woff2","fonts/CircularSpUIv3T-Bold.ttf":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Bold.7eb7d0f7.ttf","fonts/CircularSpUIv3T-Bold.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Bold.10e93738.woff","fonts/CircularSpUIv3T-Bold.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Bold.8d0a45cc.woff2","fonts/CircularSpUIv3T-Book.ttf":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Book.a357677a.ttf","fonts/CircularSpUIv3T-Book.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Book.ea8d19db.woff","fonts/CircularSpUIv3T-Book.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Book.3466e0ec.woff2","fonts/CircularSpUIv3T-Light.ttf":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Light.89e4be2e.ttf","fonts/CircularSpUIv3T-Light.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Light.2a78c017.woff","fonts/CircularSpUIv3T-Light.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Light.afd9ab26.woff2","fonts/spoticon_regular_2.ttf":"https://open.scdn.co/cdn/fonts/spoticon_regular_2.127670b5.ttf","fonts/spoticon_regular_2.woff":"https://open.scdn.co/cdn/fonts/spoticon_regular_2.ff4c6091.woff","fonts/spoticon_regular_2.woff2":"https://open.scdn.co/cdn/fonts/spoticon_regular_2.d319d911.woff2","generated/manifest-mobile-web-player.json":"https://open.scdn.co/cdn/generated/manifest-mobile-web-player.7e7a2009.json","generated/manifest-web-player.json":"https://open.scdn.co/cdn/generated/manifest-web-player.1d90e604.json","generated/opensearch.xml":"https://open.scdn.co/cdn/generated/opensearch.7f46e5b2.xml","images/checkmark.png":"https://open.scdn.co/cdn/images/checkmark.9e1a7608.png","images/concert-hub-fb-card.png":"https://open.scdn.co/cdn/images/concert-hub-fb-card.edb38821.png","images/concert-hub-header.png":"https://open.scdn.co/cdn/images/concert-hub-header.56bcad9b.png","images/concert-hub-iphone-de.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-de.2f132ca3.png","images/concert-hub-iphone-el.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-el.8b3b94a4.png","images/concert-hub-iphone-en.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-en.88b1bea2.png","images/concert-hub-iphone-es_419.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-es_419.f61fbda5.png","images/concert-hub-iphone-es.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-es.f61fbda5.png","images/concert-hub-iphone-fi.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-fi.25a8376a.png","images/concert-hub-iphone-fr_CA.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-fr_CA.bc238a54.png","images/concert-hub-iphone-fr.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-fr.60ec537b.png","images/concert-hub-iphone-hu.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-hu.f1725c37.png","images/concert-hub-iphone-id.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-id.f70b2301.png","images/concert-hub-iphone-it.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-it.b18651c6.png","images/concert-hub-iphone-ja.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-ja.88b1bea2.png","images/concert-hub-iphone-ms.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-ms.c695e9de.png","images/concert-hub-iphone-nl.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-nl.70e57293.png","images/concert-hub-iphone-pl.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-pl.6ca1b2dc.png","images/concert-hub-iphone-pt_BR.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-pt_BR.7e417576.png","images/concert-hub-iphone-sv.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-sv.67301592.png","images/concert-hub-iphone-tr.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-tr.f081d198.png","images/concert-hub-iphone-zh_TW.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-zh_TW.88b1bea2.png","images/concert-hub-twitter-card.png":"https://open.scdn.co/cdn/images/concert-hub-twitter-card.f9d9a6d4.png","images/connect_header@1x.png":"https://open.scdn.co/cdn/images/connect_header@1x.8f827808.png","images/connect-to-devices-white.svg":"https://open.scdn.co/cdn/images/connect-to-devices-white.69d4229a.svg","images/desktop-auth-check.svg":"https://open.scdn.co/cdn/images/desktop-auth-check.65be3bbc.svg","images/desktop-auth-error.svg":"https://open.scdn.co/cdn/images/desktop-auth-error.b82f823b.svg","images/devices/android.png":"https://open.scdn.co/cdn/images/devices/android.58bbae05.png","images/devices/ios.png":"https://open.scdn.co/cdn/images/devices/ios.077f15ff.png","images/devices/mac-web.png":"https://open.scdn.co/cdn/images/devices/mac-web.cc876776.png","images/devices/mac.png":"https://open.scdn.co/cdn/images/devices/mac.5f2975e9.png","images/devices/windowsphone.png":"https://open.scdn.co/cdn/images/devices/windowsphone.35cd2cdd.png","images/embed-podcast/upsell-background.png":"https://open.scdn.co/cdn/images/embed-podcast/upsell-background.e870abfc.png","images/embed/copy-32_circle_grey_outline_bg.svg":"https://open.scdn.co/cdn/images/embed/copy-32_circle_grey_outline_bg.0c6130eb.svg","images/embed/embed-code-32_circle_grey_outline_bg.svg":"https://open.scdn.co/cdn/images/embed/embed-code-32_circle_grey_outline_bg.b40a255f.svg","images/embed/fb_colour.svg":"https://open.scdn.co/cdn/images/embed/fb_colour.13fa515f.svg","images/embed/messenger_colour.svg":"https://open.scdn.co/cdn/images/embed/messenger_colour.8f4836ec.svg","images/embed/twitter_colour.svg":"https://open.scdn.co/cdn/images/embed/twitter_colour.456d46db.svg","images/embed/whatsapp.svg":"https://open.scdn.co/cdn/images/embed/whatsapp.e33bfab4.svg","images/emi.png":"https://open.scdn.co/cdn/images/emi.c7e51c1a.png","images/employee-podcasts-modal-art.png":"https://open.scdn.co/cdn/images/employee-podcasts-modal-art.32ebcdf8.png","images/equaliser-animated-green.gif":"https://open.scdn.co/cdn/images/equaliser-animated-green.f93a2ef4.gif","images/equaliser-green.svg":"https://open.scdn.co/cdn/images/equaliser-green.1184ed87.svg","images/favicon.ico":"https://open.scdn.co/cdn/images/favicon.5cb2bd30.ico","images/favicon.png":"https://open.scdn.co/cdn/images/favicon.0c211e2e.png","images/favicon16.png":"https://open.scdn.co/cdn/images/favicon16.c498a969.png","images/favicon32.png":"https://open.scdn.co/cdn/images/favicon32.8e66b099.png","images/focused_stroy_play.png":"https://open.scdn.co/cdn/images/focused_stroy_play.57a12bc7.png","images/follow/avatar-placeholder.png":"https://open.scdn.co/cdn/images/follow/avatar-placeholder.859bf94e.png","images/follow/sprite.gif":"https://open.scdn.co/cdn/images/follow/sprite.e282a709.gif","images/follow/sprite@1.png":"https://open.scdn.co/cdn/images/follow/sprite@1.0435c9db.png","images/hifi-button-off.svg":"https://open.scdn.co/cdn/images/hifi-button-off.87461500.svg","images/hifi-button-on.svg":"https://open.scdn.co/cdn/images/hifi-button-on.48a2de90.svg","images/hifi.svg":"https://open.scdn.co/cdn/images/hifi.0526a5b1.svg","images/home-icon.svg":"https://open.scdn.co/cdn/images/home-icon.ba66757a.svg","images/icons/Spotify_1024.png":"https://open.scdn.co/cdn/images/icons/Spotify_1024.4027f848.png","images/icons/Spotify_128.png":"https://open.scdn.co/cdn/images/icons/Spotify_128.c9ce2f2e.png","images/icons/Spotify_16.png":"https://open.scdn.co/cdn/images/icons/Spotify_16.aa3775a0.png","images/icons/Spotify_256.png":"https://open.scdn.co/cdn/images/icons/Spotify_256.c8416b60.png","images/icons/Spotify_32.png":"https://open.scdn.co/cdn/images/icons/Spotify_32.01f2b5c3.png","images/icons/Spotify_512.png":"https://open.scdn.co/cdn/images/icons/Spotify_512.49a0bf03.png","images/icons/Spotify_64.png":"https://open.scdn.co/cdn/images/icons/Spotify_64.375a69e1.png","images/icons/Spotify_MWP_192.png":"https://open.scdn.co/cdn/images/icons/Spotify_MWP_192.34e85b0e.png","images/icons/Spotify_MWP_512.png":"https://open.scdn.co/cdn/images/icons/Spotify_MWP_512.23e0876e.png","images/improved-modal-bg.jpg":"https://open.scdn.co/cdn/images/improved-modal-bg.ac225d3f.jpg","images/login-background.jpg":"https://open.scdn.co/cdn/images/login-background.078204fe.jpg","images/login-signup-burst.svg":"https://open.scdn.co/cdn/images/login-signup-burst.5f6a6521.svg","images/logo-complete-black.svg":"https://open.scdn.co/cdn/images/logo-complete-black.573d8227.svg","images/logo-white-2x.png":"https://open.scdn.co/cdn/images/logo-white-2x.4a6a33bc.png","images/merlin.png":"https://open.scdn.co/cdn/images/merlin.cd7e72d1.png","images/mid-year.png":"https://open.scdn.co/cdn/images/mid-year.9e2ead8f.png","images/moviebuff.png":"https://open.scdn.co/cdn/images/moviebuff.ce5d6de9.png","images/og-image.png":"https://open.scdn.co/cdn/images/og-image.860da0d8.png","images/orchard.png":"https://open.scdn.co/cdn/images/orchard.677c5ae0.png","images/playlist-folder-filled.svg":"https://open.scdn.co/cdn/images/playlist-folder-filled.f7932744.svg","images/rovi.png":"https://open.scdn.co/cdn/images/rovi.7b503678.png","images/s2l-desktopui-ltr.png":"https://open.scdn.co/cdn/images/s2l-desktopui-ltr.a0bb24a2.png","images/s2l-desktopui-rtl.png":"https://open.scdn.co/cdn/images/s2l-desktopui-rtl.862015c3.png","images/s2l-mobileui.png":"https://open.scdn.co/cdn/images/s2l-mobileui.3ad8f52b.png","images/sony.png":"https://open.scdn.co/cdn/images/sony.7e5692e6.png","images/spotifylogo.svg":"https://open.scdn.co/cdn/images/spotifylogo.a884cca3.svg","images/station-header-wave.svg":"https://open.scdn.co/cdn/images/station-header-wave.0f3784ea.svg","images/station-wave.svg":"https://open.scdn.co/cdn/images/station-wave.2b7b882c.svg","images/sw_saber_ahsoka1.png":"https://open.scdn.co/cdn/images/sw_saber_ahsoka1.9574535d.png","images/sw_saber_anakin.png":"https://open.scdn.co/cdn/images/sw_saber_anakin.6176307b.png","images/sw_saber_leia.png":"https://open.scdn.co/cdn/images/sw_saber_leia.7195cf21.png","images/sw_saber_luke.png":"https://open.scdn.co/cdn/images/sw_saber_luke.e96ed874.png","images/sw_saber_mace.png":"https://open.scdn.co/cdn/images/sw_saber_mace.43812892.png","images/sw_saber_rey.png":"https://open.scdn.co/cdn/images/sw_saber_rey.e06a68a5.png","images/sw_saber_vader.png":"https://open.scdn.co/cdn/images/sw_saber_vader.fbcf32dc.png","images/touch-icon-114.png":"https://open.scdn.co/cdn/images/touch-icon-114.2fdb1eb2.png","images/touch-icon-144.png":"https://open.scdn.co/cdn/images/touch-icon-144.dbd8dd2a.png","images/touch-icon-57.png":"https://open.scdn.co/cdn/images/touch-icon-57.2d68aabb.png","images/touch-icon-72.png":"https://open.scdn.co/cdn/images/touch-icon-72.cffecbdb.png","images/tracklist-placeholder.png":"https://open.scdn.co/cdn/images/tracklist-placeholder.b3518b89.png","images/universal.png":"https://open.scdn.co/cdn/images/universal.3ceb95fd.png","images/vinyl-bottom-layer.svg":"https://open.scdn.co/cdn/images/vinyl-bottom-layer.82d9f6ef.svg","images/vinyl-top-layer.svg":"https://open.scdn.co/cdn/images/vinyl-top-layer.b56c3ccf.svg","images/warner.png":"https://open.scdn.co/cdn/images/warner.a5039776.png","images/zara-larsson-singles.png":"https://open.scdn.co/cdn/images/zara-larsson-singles.2c824329.png","js/fb.js":"https://open.scdn.co/cdn/js/fb.83cf1e53.js","js/gtm.js":"https://open.scdn.co/cdn/js/gtm.fc4d97de.js","js/retargeting-pixels.js":"https://open.scdn.co/cdn/js/retargeting-pixels.1fa1ceda.js","js/urlRedirect.js":"https://open.scdn.co/cdn/js/urlRedirect.156df566.js","js/urlScheme.js":"https://open.scdn.co/cdn/js/urlScheme.f1e6e8b6.js"}';try{t=JSON.parse(n)}catch(i){throw new Error("Invalid CDN_FILE_URLS environment variable.")}if(!t[e])throw new Error("`".concat(e,"` is not available in CDN_FILE_URLS."));return t[e]}var ke,we=(0,Ie.iv)("color:","rgb(255, 255, 255)",";",""),Ne=(0,Ie.iv)(we,";font-weight:300;",""),Me={name:"1ms60m4",styles:"font-family:'spotify-circular','Helvetica Neue',Helvetica,Arial,sans-serif"},Ue="\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n",xe=(0,Ie.iv)(Ue,";",""),Fe=(0,Oe.iv)(["",""],Ue),Ye=(0,Ie.iv)("@font-face{font-family:'spotify-circular';src:url('",De("fonts/CircularSpUIv3T-Book.woff2"),"') format('woff2'),url('",De("fonts/CircularSpUIv3T-Book.woff"),"') format('woff'),url('",De("fonts/CircularSpUIv3T-Book.ttf"),"') format('truetype');font-weight:normal;font-style:normal;font-display:swap;}@font-face{font-family:'spotify-circular';src:url('",De("fonts/CircularSpUIv3T-Bold.woff2"),"') format('woff2'),url('",De("fonts/CircularSpUIv3T-Bold.woff"),"') format('woff'),url('",De("fonts/CircularSpUIv3T-Bold.ttf"),"') format('truetype');font-weight:bold;font-style:normal;font-display:swap;}",""),Be=(0,Ie.iv)("h1,h2{margin:0;font-size:initial;font-weight:normal;}.no-focus-outline{*:focus{outline:0;}}button{margin:0;border:0;padding:0;color:inherit;background-color:transparent;cursor:pointer;",Me,";font-size:2rem;}a{",we,";text-decoration:none;}button{user-select:none;}",""),Ke=(0,Ie.iv)(Ye," html{font-size:8px;}body{",Me,";font-size:2rem;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:auto;font-smooth:always;",we,";}",Be,";",""),He=(0,Ie.iv)(Ye," body{",Me,";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:auto;font-smooth:always;",we,";}",Be,";",""),Ge=function(e){var t=e.width,n=e.breakPointType,i=void 0===n?"max-width":n;return function(){return(0,Oe.iv)(["@media screen and (",":","px){","}"],i,t,Oe.iv.apply(void 0,arguments))}},Ve={width:375},je={width:479},We={width:589},qe={width:1024,breakPointType:"min-width"},ze={small:Ge(Ve),medium:Ge(je),large:Ge(We),xLarge:Ge(qe)},Qe=231,Ze=152,$e=467,Xe={medium:520,small:300},Je={small:Qe},et=Object.keys(Xe).reduce((function(e,t){return e[t]="@media (max-width: ".concat(Xe[t],"px)"),e}),{small:"",medium:""}),tt=Object.keys(Je).reduce((function(e,t){return e[t]="@media (max-height: ".concat(Je[t],"px)"),e}),{small:"",medium:""}),nt=16,it=40,rt=30,ot={largeH:200,mediumH:121,smallH:80},at={largeH:160,mediumH:104,smallH:80},st={largeH:152,mediumH:96,smallH:80},ct=400,lt="19px",dt="14px",ut=n(3371),_t=n(7378),pt=n.n(_t),ht=(0,_t.createContext)(null),ft=(n(756),n(4298)),Et=(n(6282),n(8982)),mt=n(7062),gt=n(7784),yt=n(4014),vt=n(9930),St=n(8533),Rt=n(6289),At=n(5327),Tt=n(5332),bt=n.n(Tt),Lt=(0,Ie.F4)(ke||(ke=bt()(["\n    0% {\n        -webkit-transform: rotate(-45deg);\n        -ms-transform: rotate(-45deg);\n        transform: rotate(-45deg);\n    }\n    100% {\n        -webkit-transform: rotate(315deg);\n        -ms-transform: rotate(315deg);\n        transform: rotate(315deg);\n    }\n"])));const It=(0,At.Z)("div",{target:"e1shju0t0"})("position:relative;border-radius:100%;width:100%;height:100%;background:rgba(255, 255, 255, 0.3);&:before{content:'';position:absolute;top:4px;left:4px;right:4px;bottom:4px;border-radius:100%;background:rgba(255, 255, 255, 1);}&:after{content:'';position:absolute;top:0;left:0;right:0;bottom:0;border:4px solid transparent;border-top-color:#fff;border-radius:100%;animation:",Lt," 650ms ease infinite;}");function Pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=M()(e);if(t){var r=M()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return w()(this,n)}}var Ct=(0,At.Z)("button",{target:"e10zxn5h0"})("width:100%;height:100%;box-shadow:0 2px 4px 0 rgba(0, 0, 0, 0.25);border-radius:50%;transition:transform 400ms;opacity:",(function(e){return e.disabled?.3:1}),";cursor:",(function(e){return e.disabled?"not-allowed":"pointer"}),";&:hover{transform:scale(1.1);}"),Ot=function(e){var t=e.title;return pt().createElement("svg",{viewBox:"0 0 40 40",version:"1.1"},pt().createElement("title",{id:"title"},t),pt().createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},pt().createElement("g",{id:"Artboard",fill:"#FFFFFF"},pt().createElement("path",{d:"M20,40 C8.954305,40 0,31.045695 0,20 C0,8.954305 8.954305,0 20,0 C31.045695,0 40,8.954305 40,20 C40,31.045695 31.045695,40 20,40 Z M16.7581405,25.9338517 L25.7471601,20.9226438 C26.08428,20.7347479 26.08428,20.2652521 25.7471601,20.0773562 L16.7581405,15.0661483 C16.4210207,14.8782524 16,15.1130003 16,15.4887921 L16,25.5112079 C16,25.8869997 16.4210207,26.1217476 16.7581405,25.9338517 Z",id:"Play.svg"}))))},Dt=function(e){var t=e.title;return pt().createElement("svg",{viewBox:"0 0 40 40",version:"1.1"},pt().createElement("title",{id:"title"},t),pt().createElement("g",{id:"Artboard",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},pt().createElement("path",{d:"M20,40 C9.04267032,40 0.159999552,31.045695 0.159999552,20 C0.159999552,8.954305 9.04267032,0 20,0 C30.9573297,0 39.8400004,8.954305 39.8400004,20 C39.8400004,31.045695 30.9573297,40 20,40 Z M15,14 L15,26 L18,26 L18,14 L15,14 Z M22,14 L22,26 L25,26 L25,14 L22,14 Z",id:"Pause",fill:"#FFFFFF"})))};const kt=function(e){D()(n,e);var t=Pt(n);function n(e){var i;return d()(this,n),i=t.call(this,e),h()(I()(i),"tickToShowLoading",void 0),h()(I()(i),"tickToHideLoading",void 0),i.state={showLoading:!1},i}return _()(n,[{key:"componentDidUpdate",value:function(e,t){var n=this;!0===this.props.isLoading&&!1===e.isLoading?this.tickToShowLoading=setTimeout((function(){n.tickToShowLoading=null,!0===n.props.isLoading&&n.setState({showLoading:!0})}),this.props.maxTimeToNotShowLoading||200):!1===this.props.isLoading&&!0===e.isLoading&&(this.tickToShowLoading&&clearTimeout(this.tickToShowLoading),!0===this.state.showLoading&&(this.tickToHideLoading||setTimeout((function(){n.setState({showLoading:!1})}),0))),!0===this.state.showLoading&&!1===t.showLoading&&(this.tickToHideLoading=setTimeout((function(){n.tickToHideLoading=null,!1===n.props.isLoading&&n.setState({showLoading:!1})}),300))}},{key:"render",value:function(){var e=null,t=this.props,n=t.isPaused,i=t.isDisabled,r=this.state.showLoading,o=A.get("spe.play");return i?o=A.get("spe.error_heading"):n||(o=A.get("spe.pause")),e=r?pt().createElement(It,null):n?pt().createElement(Ot,{title:o}):pt().createElement(Dt,{title:o}),pt().createElement(Ct,{id:n?"play-button":"pause-button","aria-label":o,disabled:i,"tab-index":0},e)}}]),n}(_t.Component);var wt=n(2398),Nt=n.n(wt),Mt=(n(8269),n(5163),n(3606)),Ut=(n(1514),n(5613),6e4),xt=36e5,Ft=function(e){return e<10?"0".concat(e):"".concat(e)};const Yt=function(e){var t=e<0,n=Math.abs(e),i=Math.floor(n/xt),r=Math.floor(n%xt/Ut)||0,o=Math.floor(n%Ut/1e3)||0,a=t?"-":"",s=[i?"".concat(i):"",Ft(r),Ft(o)].filter((function(e){return e})).join(":");return"".concat(a).concat(s)};var Bt=function(e){return function(t){var n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!1;return function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];n=a,r||(i||e.apply(e,a),r=!0,window.setTimeout((function(){r=!1,i&&e.apply(e,n)}),t))}}};function Kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=M()(e);if(t){var r=M()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return w()(this,n)}}var Ht=(0,At.Z)("div",{target:"e16o387r5"})("position:relative;height:100%;display:flex;justify-content:center;align-items:center;",xe,";"),Gt=(0,At.Z)("div",{target:"e16o387r4"})("position:relative;height:4px;",xe,";"),Vt=(0,At.Z)("div",{target:"e16o387r3"})("position:absolute;left:0;background-color:",ft.mNW,";border-radius:0.25rem;height:",4,"px;width:100%;overflow:hidden;"),jt=(0,At.Z)("div",{target:"e16o387r2"})("position:absolute;left:0;background-color:",ft.ixZ,";border-radius:0.25rem;height:",4,"px;width:100%;transform:translateX(-100%);will-change:transform;"),Wt=(0,At.Z)("div",{target:"e16o387r1"})("position:absolute;left:0;background-color:",ft.mNW,";border-radius:0.25rem;height:",4,"px;width:100%;transform:translateX(-100%);will-change:transform;"),qt=(0,At.Z)("div",{target:"e16o387r0"})("position:absolute;background-color:white;border-radius:50%;width:8px;height:8px;z-index:100;left:0;margin:0 -4px;box-shadow:0 2px 2px rgba(0, 0, 0, 0.4);transition:opacity 200ms,transform 200ms;transform:",(function(e){return e.visible?"initial":"scale(0)"}),";will-change:left;"),zt=function(e){D()(n,e);var t=Kt(n);function n(e){var i;return d()(this,n),i=t.call(this,e),h()(I()(i),"container",void 0),h()(I()(i),"throttledMouseMove",void 0),h()(I()(i),"dragStartX",void 0),h()(I()(i),"dragStartY",void 0),h()(I()(i),"handleMove",(function(e){if(i.props.enabled&&(/^mouse(down|move)$/i.test(e.type)&&0===e.button||"touchmove"===e.type)){var t=i._getEventCoordinates(e),n=X()(t,2),r=n[0],o=n[1];e.stopPropagation(),i.dragStartX=r,i.dragStartY=o;var a=i._extractRelativePos(r);i.throttledMouseMove({pageX:r}),i.props.onDragging&&i.props.onDragging({percentage:a,id:i.state.id,ended:!1})}})),h()(I()(i),"handleMouseMove",(function(e){if(i.props.enabled){var t=i._getEventCoordinates(e),n=X()(t,1)[0];e.stopPropagation(),i.throttledMouseMove({pageX:n})}})),h()(I()(i),"handleStart",(function(){i.props.enabled&&i.setState({isHovering:!0,id:Date.now()})})),h()(I()(i),"handleLeave",(function(){i.props.enabled&&i.setState({isHovering:!1,id:i.state.id})})),h()(I()(i),"handleEnd",(function(e){if(i.props.enabled){var t=i._getEventCoordinates(e),n=X()(t,1)[0];e.stopPropagation();var r=i._extractRelativePos(n);i.props.onDragging&&i.props.onDragging({percentage:r,id:i.state.id,ended:!0})}})),i.container=pt().createRef(),i.state={isHovering:!1,id:0},i.throttledMouseMove=Bt((function(e){var t=e.pageX,n=i._extractRelativePos(t);i.setState({hoverPercentage:n})}))(50),i}return _()(n,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.isDragging&&!e.isDragging?(["mousemove","touchmove"].forEach((function(e){return document.addEventListener(e,t.handleMove)})),["mouseup","touchend"].forEach((function(e){return document.addEventListener(e,t.handleEnd)}))):!this.props.isDragging&&e.isDragging&&(["mousemove","touchmove"].forEach((function(e){return document.removeEventListener(e,t.handleMove)})),["mouseup","touchend"].forEach((function(e){return document.removeEventListener(e,t.handleEnd)})))}},{key:"componentWillUnmount",value:function(){var e=this;["mousemove","touchmove"].forEach((function(t){return document.removeEventListener(t,e.handleMove)})),["mouseup","touchend"].forEach((function(t){return document.removeEventListener(t,e.handleEnd)}))}},{key:"isTouchEventType",value:function(e){return null==e?void 0:e.type.includes("touch")}},{key:"_getEventCoordinates",value:function(e){var t,n;if(this.isTouchEventType(e)){var i=void 0===e.originalEvent?e:e.originalEvent,r=i.touches[0]||i.changedTouches[0];t=r.pageX,n=r.pageY}else t=e.pageX,n=e.pageY;return[t,n]}},{key:"_extractRelativePos",value:function(e){var t,n=null===(t=this.container.current)||void 0===t?void 0:t.getBoundingClientRect();if(!n)return 0;var i=n.right-n.left;return Math.max(0,Math.min((e-n.left)/i,1))}},{key:"render",value:function(){var e=this.props,t=e.enabled,n=e.max,i=e.current,r=e.isDragging,o=e.noSpacing,a=e.tooltip,s=this.state,c=s.isHovering,l=s.hoverPercentage,d=Math.max(0,Math.min(1,(null!=i?i:0)/(n||1))),u={transform:"translateX(-".concat(100-100*(c?l:0),"%)")},_={left:"".concat(100*(c?l:0),"%")},p=c&&n?n*l:0,h={transform:"translateX(-".concat(100-100*d,"%)")},f=t&&(c||r),E={left:"".concat(100*d,"%")},m=o?Gt:Ht;return pt().createElement(m,{ref:this.container,onMouseDown:this.handleMove,onMouseEnter:this.handleStart,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleLeave,onTouchStart:this.handleStart,onTouchMove:this.handleMove,onTouchEnd:this.handleLeave},c&&a&&pt().createElement(a,{style:_},Yt(p)),pt().createElement(Vt,null,pt().createElement(Wt,{style:u}),pt().createElement(jt,{id:"progress-bar-line",style:h})),pt().createElement(qt,{id:"progress-bar-slider",visible:!!f,style:E}))}}]),n}(pt().Component);const Qt=zt;function Zt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{leading:!1,trailing:!0},i=(0,_t.useRef)(),r=(0,_t.useRef)(0),o=(0,_t.useRef)(),a=(0,_t.useRef)(e),s=(0,_t.useRef)(),c=(0,_t.useRef)(),l=(0,_t.useRef)(!0);a.current=e;var d=!t&&0!==t&&"function"==typeof window.requestAnimationFrame;if("function"!=typeof e)throw new TypeError("Expected a function");var u=Number(t)||0,_=!!n.leading,p=!("trailing"in n)||!!n.trailing,h="maxWait"in n,f=Math.max(Number(n.maxWait)||0,u),E=(0,_t.useCallback)((function(e){var t=s.current;return s.current=void 0,r.current=e,c.current=a.current.apply(a,B()(t)),c.current}),[]),m=(0,_t.useCallback)((function(e,t){return d?(window.cancelAnimationFrame(o.current),window.requestAnimationFrame(e)):window.setTimeout(e,t)}),[d]),g=(0,_t.useCallback)((function(e){d?window.cancelAnimationFrame(e):window.clearTimeout(e)}),[d]),y=(0,_t.useCallback)((function(e){var t=e-Number(i.current),n=e-r.current,o=u-t;return h?Math.min(o,f-n):o}),[f,h,u]),v=(0,_t.useCallback)((function(e){if(!l.current)return!1;var t=e-Number(i.current),n=e-r.current;return void 0===i.current||t>=u||t<0||h&&n>=f}),[f,h,u]),S=(0,_t.useCallback)((function(e){return o.current=void 0,p&&s.current?E(e):(s.current=void 0,c.current)}),[E,p]),R=(0,_t.useCallback)((function(){var e=Date.now();if(v(e))return S(e);o.current=m(R,y(e))}),[y,v,m,S]),A=(0,_t.useCallback)((function(e){return r.current=e,o.current=m(R,u),_?E(e):c.current}),[E,m,_,R,u]),T=(0,_t.useCallback)((function(){void 0!==o.current&&g(o.current),r.current=0,s.current=i.current=o.current=void 0}),[g]),b=(0,_t.useCallback)((function(){return void 0===o.current?c.current:S(Date.now())}),[S]),L=(0,_t.useCallback)((function(){return void 0!==o.current}),[]);(0,_t.useEffect)((function(){return l.current=!0,function(){l.current=!1}}),[]);var I=(0,_t.useCallback)((function(){for(var e=Date.now(),t=v(e),n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];if(s.current=r,i.current=e,t){if(void 0===o.current&&l.current)return A(i.current);if(h)return o.current=m(R,u),E(i.current)}return void 0===o.current&&(o.current=m(R,u)),c.current}),[E,A,h,v,m,R,u]);return I.cancel=T,I.flush=b,I.pending=L,I}var $t=n(5971),Xt=(0,Oe.ZP)(Mt.u).withConfig({displayName:"TooltipAnimated__TooltipStyled",componentId:"sc-1xva7gg-0"})(["border-radius:4px;padding:"," ",";opacity:",";transition:opacity 0.15s,transform 0.15s;transform:",";",";"],ft.hM$,ft.dly,(function(e){return e.isVisible?"1":"0"}),(function(e){var t=e.isVisible,n=e.animationType;return t?"":function(e){switch(e){case"slide-from-left":return"translateX(-12px)";case"slide-from-right":return"translateX(12px)";case"slide-from-bottom":return"translateY(12px)";default:return""}}(n)}),Fe),Jt=pt().memo(pt().forwardRef((function(e,t){var n=e.id,i=e.isVisible,r=e.text,o=e.animationType,a=e.className,s=e.style;return pt().createElement(Xt,{style:s,className:a,id:n,isVisible:i,animationType:o,ref:t},pt().createElement($t.LF,{variant:$t.LF.finale},r))}))),en="LOG_INTERACTION";function tn(e){return{type:en,interactionData:e}}var nn=Oe.ZP.div.withConfig({displayName:"ProgressBar__Container",componentId:"sc-kx9lex-0"})(["display:flex;position:relative;margin:0 ",";-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;"],ft.dly),rn=Oe.ZP.div.withConfig({displayName:"ProgressBar__StyledSection",componentId:"sc-kx9lex-1"})(["position:relative;height:14px;width:",";&:first-of-type{margin-right:",";}"],(function(e){return"".concat(e.percentage,"%")}),ft.dly),on=(0,_t.forwardRef)((function(e,t){return pt().createElement(rn,Nt()({},e,{ref:t}))})),an=Oe.ZP.div.withConfig({displayName:"ProgressBar__ProgressBarWrapper",componentId:"sc-kx9lex-2"})(["position:absolute;top:0px;width:100%;height:22px;",""],(function(e){return e.enabled?"z-index: 1;":""})),sn=Oe.ZP.div.withConfig({displayName:"ProgressBar__TooltipContainer",componentId:"sc-kx9lex-3"})(["position:absolute;top:-36px;left:0;transform:translate(-50%,0%);will-change:left;"]),cn=(0,Oe.ZP)(Jt).withConfig({displayName:"ProgressBar__TooltipAnimatedStyled",componentId:"sc-kx9lex-4"})(["position:relative;top:-50px;"]),ln=(0,Oe.ZP)(Mt.u).withConfig({displayName:"ProgressBar__TooltipStyled",componentId:"sc-kx9lex-5"})(["border-radius:4px;"]),dn=function(e){var t=e.children,n=e.style;return pt().createElement(sn,{style:n},pt().createElement(ln,null,pt().createElement($t.LF,{as:"span",variant:$t.LF.finale},t)))},un=function(e){var t,n=e.totalDuration,i=e.previewDuration,r=e.currentDuration,o=e.onSeek,a=e.onRemainingProgressBarClick,s=100*i/n,c=100-s,l=(0,_t.useState)(!1),d=X()(l,2),u=d[0],_=d[1],p=(0,_t.useState)(),h=X()(p,2),f=h[0],E=h[1],m=Number.isFinite(f)&&null!==f?(f||0)*i:r,g=(0,_t.useRef)(null),y=Zt((function(){E(void 0)}),1e3),v=(0,Le.I0)(),S=(0,_t.useCallback)((function(e){var t=e.percentage,n=e.ended;_(!0),E(t),n&&(o((t||0)*i),_(!1),E(t),v(tn({action_type:"click",action_intent:"seek-click"})),y())}),[_,E,o,v,y,i]),R=(0,_t.useState)(!1),T=X()(R,2),b=T[0],L=T[1],I=(0,_t.useState)("50%"),P=X()(I,2),C=P[0],O=P[1],D=Bt((function(e){O("".concat(e,"px"))}))(50,!0),k=(t=function(){return L(!1)},function(e){var n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];i?i=!1:(clearTimeout(n),n=setTimeout((function(){t.apply(t,o)}),e))}})(1500),w=(0,_t.useCallback)((function(e){var t=("clientX"in e?e.clientX:e.changedTouches[0].pageX)-e.currentTarget.getBoundingClientRect().left;if(!g.current)return t;var n=g.current.getBoundingClientRect().width,i=e.view.document.body.clientWidth-e.currentTarget.getBoundingClientRect().left-1.1*n;return t>=i?i:t}),[g]),N=(0,_t.useCallback)((function(e){O("".concat(w(e),"px")),L(!0)}),[L,w]),M=(0,_t.useCallback)((function(){L(!1)}),[L]),U=(0,_t.useCallback)((function(e){D(w(e))}),[D,w]),x=(0,_t.useCallback)((function(e){O("".concat(w(e),"px")),L(!0),k()}),[k,L,w]);return pt().createElement(nn,null,pt().createElement(on,{percentage:s},pt().createElement(an,{enabled:!0},pt().createElement(Qt,{max:i,current:m,onDragging:S,isDragging:u,tooltip:dn,enabled:!0}))),pt().createElement(on,{onClick:a,percentage:c,onMouseEnter:N,onMouseMove:U,onMouseLeave:M,onTouchEnd:x},pt().createElement(an,null,pt().createElement(Qt,{enabled:!1}),pt().createElement(cn,{ref:g,style:{left:C},isVisible:b,text:A.get("embed-video.upsell.whatch-full-episode-on-spotify"),id:"play-on-spotify",animationType:"slide-from-bottom"}))))},_n="PAUSE",pn="PLAY",hn="TOGGLE_PLAY",fn="PLAY_INDEX",En="PLAYBACK_STATE_CHANGED",mn="PLAYBACK_ERROR",gn="SEEK",yn="SEEK_BACK",vn="SEEK_FORWARD",Sn="MUTE",Rn="UNMUTE",An="SET_VOLUME",Tn="audio",bn="video";function Ln(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tn;return{type:hn,mediaType:e}}function In(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tn;return{type:pn,mediaType:e}}function Pn(){return{type:_n}}function Cn(){return{type:yn}}function On(){return{type:vn}}function Dn(e){return{type:An,volume:e}}function kn(e){return{type:gn,percentage:e}}var wn,Nn=pt().createContext("#1b1b1b"),Mn="ENTER_FULL_SCREEN_MODE",Un="CLOSE_FULL_SCREEN_MODE";function xn(){return{type:Un}}var Fn=Oe.ZP.div.withConfig({displayName:"Timestamp__TimestampWrapper",componentId:"sc-1py8xmc-0"})(["margin:0 ",";"," cursor:pointer;",""],ft.dly,Fe,(function(e){return e.alwaysVisible?"":ze.small(wn||(wn=bt()(["display: none;"])))})),Yn=function(e){return e<10?"0".concat(e):"".concat(e)},Bn=function(e){var t=Math.floor(e/1e3%60),n=Math.floor(e/6e4%60),i=Math.floor(e/36e5%60);return"".concat(i>0?"".concat(Yn(i),":"):"").concat(Yn(n),":").concat(Yn(t))},Kn=pt().memo((function(e){var t=e.duration,n=e.position,i=e.onClick,r=e.alwaysVisible,o=void 0!==r&&r,a=(0,_t.useState)(!1),s=X()(a,2),c=s[0],l=s[1];return pt().createElement(Fn,{"data-testid":"timestamp",onClick:function(){l(!c),i&&i()},alwaysVisible:o},pt().createElement($t.LF,{as:"span",variant:$t.LF.mesto},Bn(c?t-(n||0):n||0)))})),Hn=Oe.ZP.div.withConfig({displayName:"PlayControls__PlayControlsWrapper",componentId:"sc-1053x3t-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:8px;background-color:",";opacity:0;",""],(function(e){return e.backgroundColor}),(function(e){return e.isMounted?"\n  transition: opacity ease-out 0.4s;\n  opacity: 1;\n  ":""})),Gn=Oe.ZP.div.withConfig({displayName:"PlayControls__ControlsSection",componentId:"sc-1053x3t-1"})(["width:100%;display:flex;align-items:center;justify-content:space-between;position:relative;"]),Vn=Oe.ZP.div.withConfig({displayName:"PlayControls__ProgressSection",componentId:"sc-1053x3t-2"})(["position:relative;display:block;width:100%;"]),jn=Oe.ZP.div.withConfig({displayName:"PlayControls__ControlArea",componentId:"sc-1053x3t-3"})(["display:flex;flex:1;align-items:center;",""],(function(e){return"justify-content: ".concat(e.justifyContent,";")})),Wn=Oe.ZP.div.withConfig({displayName:"PlayControls__PlayButtonWrapper",componentId:"sc-1053x3t-4"})(["position:relative;width:32px;height:32px;padding:6px;"]),qn=(0,Oe.ZP)(Et.E).withConfig({displayName:"PlayControls__ButtonIconStyled",componentId:"sc-1053x3t-5"})(["cursor:pointer;> svg{padding:",";}"],ft.nuo),zn=function(e){var t=e.previewDuration,n=e.position,i=e.volume,r=(0,_t.useContext)(Nn),o=(0,Le.v9)((function(e){var t,n,i,r,o,a;return{duration:e.data.entity.duration_ms,isPaused:null===(t=null===(n=e.playback)||void 0===n?void 0:n.isPaused)||void 0===t||t,isBuffering:null!==(i=null===(r=e.playback)||void 0===r?void 0:r.isBuffering)&&void 0!==i&&i,isDisabled:null!==(o=null===(a=e.playback)||void 0===a?void 0:a.isDisabled)&&void 0!==o&&o,isFullScreenMode:e.machineState.isFullScreenMode,isIOS:e.settings.isIOS,isSafari:e.settings.isSafari}})),a=o.duration,s=o.isPaused,c=o.isBuffering,l=o.isDisabled,d=o.isFullScreenMode,u=o.isIOS,_=o.isSafari,p=(0,Le.I0)(),h=function(){p(tn({action_type:"click",action_intent:"change-time-format"}))},f=(0,_t.useState)(!1),E=X()(f,2),m=E[0],g=E[1];(0,_t.useEffect)((function(){setImmediate((function(){g(!0)}))}),[g]);var y=!u&&!_;return pt().createElement(Hn,{isMounted:m,backgroundColor:r,"data-testid":"play-controls"},pt().createElement(Vn,null,pt().createElement(un,{onSeek:function(e){p(function(e){return{type:gn,time:e}}(e))},onRemainingProgressBarClick:function(){p(Pn())},totalDuration:a,previewDuration:t,currentDuration:n})),pt().createElement(Gn,null,pt().createElement(jn,{justifyContent:"flex-start"},u?pt().createElement(Kn,{duration:a,position:n,onClick:h,alwaysVisible:!0}):pt().createElement(pt().Fragment,null,pt().createElement(qn,{onClick:function(){p(i?{type:Sn}:{type:Rn}),p(tn({action_type:"click",action_intent:"toggle-mute"}))}},0===i?pt().createElement(mt.Z,{semanticColor:"textBase",iconSize:24,"arial-label":A.get("playback-control.unmute")}):pt().createElement(gt.H,{semanticColor:"textBase",iconSize:24,"arial-label":A.get("playback-control.mute")})),pt().createElement(Kn,{duration:a,position:n,onClick:h}))),pt().createElement(jn,{justifyContent:"center"},pt().createElement(qn,{onClick:function(){p(Cn()),p(tn({action_type:"click",action_intent:"skip-back-15"}))},semanticColor:"textBase"},pt().createElement(yt.P,{iconSize:24,"arial-label":A.get("spe.playback-control.skip-backward-15")})),pt().createElement(Wn,{onClick:function(){p(Ln(bn)),p(tn({action_type:"click",action_intent:s?"play":"pause",action_item_id:"now-playing-bar"}))}},pt().createElement(kt,{maxTimeToNotShowLoading:500,isLoading:c,isPaused:s,isDisabled:l})),pt().createElement(qn,{onClick:function(){p(On()),p(tn({action_type:"click",action_intent:"skip-forward-15"}))},semanticColor:"textBase"},pt().createElement(vt.h,{iconSize:24,"arial-label":A.get("spe.playback-control.skip-forward-15")}))),pt().createElement(jn,{justifyContent:"flex-end"},y&&(d?pt().createElement(qn,{onClick:function(){p(xn())},semanticColor:"textBase"},pt().createElement(St.V,{iconSize:24,"arial-label":A.get("npv.exit-full-screen")})):pt().createElement(qn,{onClick:function(){p({type:Mn}),p(tn({action_type:"click",action_intent:"toggle-full-screen"}))},semanticColor:"textBase"},pt().createElement(Rt.G,{iconSize:24,"arial-label":A.get("npv.exit-full-screen")}))))))},Qn=n(2684),Zn=n(3859),$n=n(9923),Xn=Oe.ZP.div.withConfig({displayName:"ReplayControls__ReplayControlsContainer",componentId:"sc-1wqizvg-0"})(["border-radius:8px;padding:"," "," 0 ",";background-color:",";opacity:0;",""],ft.nuo,ft.nuo,ft.nuo,(function(e){return e.backgroundColor}),(function(e){return e.isMounted?"\n  transition: opacity ease-out 0.4s;\n  opacity: 1;\n  ":""})),Jn=function(e){var t=e.play,n=(0,_t.useContext)(Nn),i=(0,_t.useState)(!1),r=X()(i,2),o=r[0],a=r[1];return(0,_t.useEffect)((function(){setImmediate((function(){return a(!0)}))}),[a]),pt().createElement(Xn,{backgroundColor:n,isMounted:o,"data-testid":"replay-controls"},pt().createElement(Qn.oM,{onClick:t,buttonSize:Zn.z.md,"arial-label":A.get("embed-video.controls.replay"),iconLeading:$n.N,semanticColor:"textBase",condensed:!0,"data-testid":"replay-btn"},A.get("embed-video.controls.replay")))};function ei(e){if(null===e||null===e.positionAsOfTimestamp||null===e.duration)return null;var t=e.timestamp,n=e.positionAsOfTimestamp,i=e.duration,r=e.speed,o=e.hasContext,a=e.isPaused,s=e.isBuffering;if(!o||a||s)return n;var c=(Date.now()-t)*(null!=r?r:0);return Math.min(n+c,i)}var ti=Oe.ZP.div.withConfig({displayName:"Controls__ControlsWrapper",componentId:"sc-9vg6ua-0"})(["max-width:","px;min-width:230px;margin:auto;width:100%;z-index:1;"],qe.width),ni=function(){var e,t,n,i=(0,Le.v9)((function(e){var t,n,i,r,o;return{duration:e.data.entity.duration_ms,position:null!==(t=ei(e.playback))&&void 0!==t?t:null,isPaused:null===(n=null===(i=e.playback)||void 0===i?void 0:i.isPaused)||void 0===n||n,volume:void 0!==(null===(r=e.playback)||void 0===r?void 0:r.volume)?null===(o=e.playback)||void 0===o?void 0:o.volume:100}})),r=i.position,o=i.isPaused,a=i.duration,s=i.volume,c=(e=a,t=15e5,(n=Math.ceil(.25*e))>t?t:n),l=(0,_t.useState)(!1),d=X()(l,2),u=d[0],_=d[1],p=(0,Le.I0)();return(0,_t.useEffect)((function(){r&&r>=c&&!o&&(p(Pn()),_(!0))}),[r,c,o,_,p]),pt().createElement(ti,{"data-testid":"controls-container"},u?pt().createElement(Jn,{play:function(){_(!1),p(In(bn)),p(tn({action_type:"click",action_intent:"play",action_item_id:"replay-view"}))}}):pt().createElement(zn,{previewDuration:c,position:r,volume:s}))},ii="SPOTIFY_ICON_CLICK",ri="FOLLOW_CLICK",oi="START_LISTENING_CLICK",ai="EPISODE_TITLE_CLICK",si="SHOW_TITLE_CLICK",ci="FOLLOW_SHOW_SUCCESS",li="REMOVE_SHOW_SUCCESS";function di(e){return{type:ai,productName:e}}var ui,_i,pi,hi,fi,Ei,mi,gi,yi,vi,Si,Ri=function(e){return new Date(e)},Ai=function(e){return(new Date).getUTCFullYear()===e.getUTCFullYear()?A.formatDate(e,{month:"short",day:"numeric",timeZone:"UTC"}):A.formatDate(e,{month:"short",year:"numeric",timeZone:"UTC"})},Ti=Oe.ZP.button.withConfig({displayName:"Header__TitleWithCoverArt",componentId:"sc-1whpomo-0"})(["display:flex;overflow:hidden;align-self:stretch;align-items:flex-start;justify-content:flex-start;overflow:visible;z-index:5;margin-right:",";&:hover h1,&:hover h2{text-decoration:underline;}",";",""],ft.cQs,ze.medium(ui||(ui=bt()(["\n    padding: ",";\n  "])),ft.dly),ze.small(_i||(_i=bt()(["\n    visibility: ",";\n  "])),(function(e){return e.isVisibleInSmallBreakpoint?"visible":"hidden"}))),bi=Oe.ZP.div.withConfig({displayName:"Header__Title",componentId:"sc-1whpomo-1"})(["display:flex;flex-direction:column;margin:0 ",";text-align:left;overflow:hidden;h1,h2{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;}"],ft.nuo),Li=Oe.ZP.div.withConfig({displayName:"Header__TitleMediumSmall",componentId:"sc-1whpomo-2"})(["display:none;",""],ze.medium(pi||(pi=bt()(["\n    display: flex;\n    align-items: center;\n  "])))),Ii=Oe.ZP.div.withConfig({displayName:"Header__TitleLarge",componentId:"sc-1whpomo-3"})(["display:flex;align-items:center;",""],ze.medium(hi||(hi=bt()(["\n    display: none;\n  "])))),Pi=Oe.ZP.img.withConfig({displayName:"Header__CoverArt",componentId:"sc-1whpomo-4"})(["width:40px;height:40px;border-radius:",";",""],ft.hM$,ze.medium(fi||(fi=bt()(["\n    width: 32px;\n    height: 32px;\n  "])))),Ci=Oe.ZP.span.withConfig({displayName:"Header__TagStyled",componentId:"sc-1whpomo-5"})(["margin-right:",";border-radius:2px;background-color:",";color:",";padding:3px 5px;font-size:9px;text-transform:uppercase;letter-spacing:1px;font-weight:900;line-height:10px;"],ft.dly,ft.Hkv,ft.aMn),Oi=function(e){var t,n,i=e.isVisibleInSmallBreakpoint,r=e.className,o=(0,Le.v9)((function(e){var t,n;return{episodeName:e.data.entity.name,releaseDate:e.data.entity.release_date,showName:null===(t=e.data.entity.show)||void 0===t?void 0:t.name,showImages:null===(n=e.data.entity.show)||void 0===n?void 0:n.images}})),a=o.episodeName,s=o.releaseDate,c=o.showName,l=o.showImages,d=(0,Le.I0)(),u="",_=Ri(s);isFinite(_.getTime())&&(u="".concat(Ai(_)," · "));var p=pt().createElement(pt().Fragment,null,pt().createElement(Ci,{ariaLabel:A.get("embed_preview")},A.get("embed_preview")),pt().createElement(Ci,{ariaLabel:A.get("card.a11y.explicit")},"E"));return pt().createElement(Ti,{className:r,onClick:function(){d(di("embed_player_v")),d(tn({action_type:"click",action_intent:"deeplink",action_item_id:"title"}))},isVisibleInSmallBreakpoint:i},(null==l||null===(t=l[0])||void 0===t?void 0:t.url)&&pt().createElement(Pi,{src:null===(n=l[0])||void 0===n?void 0:n.url,alt:"".concat(c," cover")}),pt().createElement(bi,null,pt().createElement(Ii,null,p,pt().createElement($t.LF,{as:"h1",variant:$t.LF.balladBold,"data-testid":"preview-episode-name"},a)),pt().createElement(Li,null,p,pt().createElement($t.LF,{as:"h1",variant:$t.LF.mestoBold},a)),pt().createElement($t.LF,{as:"h2",variant:$t.LF.mesto,"data-testid":"preview-episode-name-medium-small"},u,c)))},Di=n(8794),ki=Oe.ZP.div.withConfig({displayName:"Upsell__UpsellContainer",componentId:"sc-13eazxx-0"})(["width:100%;display:flex;flex:1;flex-direction:column;justify-content:flex-end;min-height:0;overflow:hidden;max-width:1024px;margin:auto;z-index:1;",";"],Fe),wi=Oe.ZP.div.withConfig({displayName:"Upsell__UpsellCard",componentId:"sc-13eazxx-1"})(["background-color:",";border-radius:8px;margin-bottom:",";padding:"," "," "," ",";opacity:",";visibility:",";transition:all 0.1s ease-in;transition-property:opacity,margin-bottom;"," ",""],ft.Snx,(function(e){return e.isVisible?ft.o78:"0"}),ft.g4V,ft.o78,ft.g4V,ft.nuo,(function(e){return e.isVisible?"1":"0"}),(function(e){return e.isVisible?"visible":"hidden"}),ze.large(Ei||(Ei=bt()(["\n    margin-bottom: ",";\n  "])),(function(e){return e.isVisible?ft.dly:"0"})),ze.small(mi||(mi=bt()(["\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    margin: 0;\n    display: flex;\n    background-color: ",";\n    padding: 0 "," ",";\n    align-items: center;\n  "])),ft.Snx,ft.o78,ft.uOY)),Ni=(0,Oe.ZP)($t.LF).withConfig({displayName:"Upsell__UpsellMessage",componentId:"sc-13eazxx-2"})(["flex:1;margin:0 "," 0 0;display:flex;align-items:center;",""],ft.g4V,ze.small(gi||(gi=bt()(["\n    display: block;\n    margin: 0;\n    margin-bottom: ",";\n  "])),ft.dly)),Mi=Oe.ZP.div.withConfig({displayName:"Upsell__UpsellTypeSmallMedium",componentId:"sc-13eazxx-3"})(["display:none;"," ",""],ze.large(yi||(yi=bt()(["\n    display: flex;\n  "]))),ze.small(vi||(vi=bt()(["\n    display: block;\n  "])))),Ui=Oe.ZP.div.withConfig({displayName:"Upsell__UpsellTypeLarge",componentId:"sc-13eazxx-4"})(["display:flex;",""],ze.large(Si||(Si=bt()(["\n    display: none;\n  "])))),xi=function(e){var t=e.isVisible,n=void 0!==t&&t,i=e.onCTAClick,r=e.duration,o=Bn(r).split(":"),a=2!==o.length?A.get("embed-video.upsell.whatch-long-episode",o[0],o[1]):A.get("embed-video.upsell.watch-episode",o[0]);return pt().createElement(ki,{isVisible:n},pt().createElement(wi,{isVisible:n,"data-testid":"upsell-card"},pt().createElement(Ui,null,pt().createElement(Ni,{forwardedAs:"div",variant:"canon"},a),pt().createElement(Di.D,{onClick:i,buttonSize:Di.D.lg,"data-testid":"cta-button"},A.get("embed-video.upsell.watch-now"))),pt().createElement(Mi,null,pt().createElement(Ni,{forwardedAs:"div",variant:$t.LF.violaBold},a),pt().createElement(Di.D,{onClick:i,buttonSize:Di.D.sm,"data-testid":"cta-button-small-medium"},A.get("get_spotify")))))};n(9254);var Fi,Yi,Bi,Ki,Hi,Gi,Vi=function(){document.fullscreenElement&&document.exitFullscreen?document.exitFullscreen():document.mozFullScreen&&document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitIsFullScreen&&document.webkitExitFullscreen&&document.webkitExitFullscreen()},ji=function(){return!!(document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreen)},Wi=n(532),qi=Oe.ZP.div.withConfig({displayName:"VideoContainer__VideoElement",componentId:"sc-z88x8t-0"})(["position:absolute;top:0;bottom:0;left:0;right:0;background-color:",";& video{position:absolute;width:100%;height:100%;top:0;bottom:0;left:0;right:0;}"],(0,Wi.NE)("backgroundElevatedBase")),zi=Oe.ZP.div.withConfig({displayName:"VideoContainer__ChildrenWrapper",componentId:"sc-z88x8t-1"})(["position:absolute;top:0;bottom:0;left:0;right:0;z-index:3;display:flex;align-items:center;flex-direction:column;padding:",";transition:opacity 0.15s,visibility 0.15s;opacity:",";visibility:",";&:before{position:absolute;content:'';width:100%;height:112px;top:0;z-index:1;background:",";}",";"],ft.g4V,(function(e){return e.isVisible?"1":"0"}),(function(e){return e.isVisible?"visible":"hidden"}),(function(e){return e.isVisible?"linear-gradient(180deg, ".concat(ft.luK," 0px, ").concat(ft.P_L," 112px)"):"none"}),ze.medium(Fi||(Fi=bt()(["\n    padding: ",";\n    &:before {\n      background: ",";\n    }\n  "])),ft.dly,(function(e){return e.isVisible?"linear-gradient(180deg, ".concat(ft.luK," 0px, ").concat(ft.P_L," 96px)"):"none"}))),Qi=function(e){var t=e.disabled,n=void 0!==t&&t,i=e.children,r=e.hideChildren,o=(0,_t.useState)(!1),a=X()(o,2),s=a[0],c=a[1],l=(0,_t.useState)(!0),d=X()(l,2),u=d[0],_=d[1],p=(0,_t.useState)(!1),h=X()(p,2),f=h[0],E=h[1];(0,_t.useEffect)((function(){c(/alwaysVisible=1/.test(document.location.search))}),[]);var m=function(){_(!0)},g=Zt((function(){r&&!f&&_(!1)}),3e3),y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.maxWait,r=void 0===i?t:i,o=n.leading,a=void 0===o||o,s=n.trailing;return Zt(e,t,{maxWait:r,leading:a,trailing:void 0===s||s})}((function(){_(!0),s||g()}),100,{maxWait:1e3,leading:!0,trailing:!1}),v=(0,Le.I0)(),S=(0,_t.useRef)(null),R=(0,Le.v9)((function(e){return{isOpen:e.machineState.isFullScreenMode}})),A=R.isOpen;return(0,_t.useEffect)((function(){return function(){Vi()}}),[v]),(0,_t.useEffect)((function(){var e,t;e=function(){v(xn())},t=function t(){ji()||(document.removeEventListener("fullscreenchange",t),document.removeEventListener("fullscreenChange",t),document.removeEventListener("webkitfullscreenchange",t),document.removeEventListener("mozfullscreenchange",t),e())},document.addEventListener("fullscreenchange",t),document.addEventListener("fullscreenChange",t),document.addEventListener("webkitfullscreenchange",t),document.addEventListener("mozfullscreenchange",t)}),[v]),(0,_t.useEffect)((function(){var e,t=ji();A&&!t&&S.current?(e=S.current).requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen():!A&&t&&Vi()}),[A]),pt().createElement(qi,{disabled:n,className:"VideoPlayer__container","data-testid":"video-container",onClick:m,onMouseEnter:m,onMouseDown:function(){return E(!0)},onMouseUp:function(){return E(!1)},onMouseMove:y,onMouseLeave:function(){!s&&r&&_(!1)},onTouchStart:function(){return E(!0)},onTouchCancel:function(){return E(!1)},onTouchEnd:function(){_(!0),E(!1),s||g()},onTouchMove:y,ref:S},pt().createElement(zi,{isVisible:u},i))},Zi=n(6465),$i=n(9271),Xi=Oe.ZP.div.withConfig({displayName:"LandingView__BackgroundWrapper",componentId:"sc-1eq1hrc-0"})(["position:absolute;top:0;left:0;bottom:0;right:0;overflow:hidden;padding:",";background-image:url(",");background:linear-gradient(",",","),url(",");background-repeat:no-repeat;background-size:cover;background-position:center;",""],ft.g4V,(function(e){return e.backgroundImageUrl}),ft.luK,ft.luK,(function(e){return e.backgroundImageUrl}),ze.medium(Yi||(Yi=bt()(["\n    padding: ",";\n  "])),ft.dly)),Ji=Oe.ZP.div.withConfig({displayName:"LandingView__Overlay",componentId:"sc-1eq1hrc-1"})(["position:absolute;top:0;left:0;bottom:0;right:0;overflow:hidden;display:flex;justify-content:center;align-items:center;cursor:pointer;",";"],ze.small(Bi||(Bi=bt()(["\n    margin-top: ",";\n  "])),ft.lM8)),er=Oe.ZP.div.withConfig({displayName:"LandingView__PlayButtonContainer",componentId:"sc-1eq1hrc-2"})(["background-color:",";border-radius:50%;display:flex;align-items:center;justify-content:center;width:22vh;height:22vh;max-width:80px;max-height:80px;box-shadow:0px 4px 8px ",";transition:transform 400ms;&:hover{transform:scale(1.1);}",";"],ft.ixZ,ft.Saw,ze.small(Ki||(Ki=bt()(["\n    max-width: 64px;\n    max-height: 64px;\n  "])))),tr=(0,Oe.ZP)(Zi.J).withConfig({displayName:"LandingView__IconPlayStyled",componentId:"sc-1eq1hrc-3"})(["color:",";width:32px;height:32px;",""],ft.Snx,ze.small(Hi||(Hi=bt()(["\n  width: 24px;\n  height: 24px;\n  "])))),nr=function(e){var t=e.coverArtImageUrl,n=e.onClick,i=(0,_t.useState)(!1),r=X()(i,2),o=r[0],a=r[1];return pt().createElement(Xi,{backgroundImageUrl:t},pt().createElement(Ji,{onClick:function(e){a(!0),n(e)}},o?pt().createElement($i.T,null):pt().createElement(er,null,pt().createElement(tr,null))))},ir=n(7705),rr=n(5383),or=n(2717),ar=n(353),sr=n(6917),cr=n.n(sr);function lr(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}!function(e){e.XSMALL="XSMALL",e.SMALL="SMALL",e.MEDIUM="MEDIUM",e.LARGE="LARGE",e.XLARGE="XLARGE"}(Gi||(Gi={}));var dr,ur=(0,_t.createContext)(void 0),_r=(n(9217),n(2595),n(2327),n(1755),n(7329));function pr(e){return!("undefined"==typeof window)&&e instanceof HTMLElement}var hr,fr,Er={subscribersByElement:new WeakMap,get resizeObserver(){return dr||(dr=new _r.Z((function(e){Array.isArray(e)&&e.forEach((function(e){var t,n={width:Math.round(e.contentRect.width),height:Math.round(e.contentRect.height)};(null!==(t=Er.subscribersByElement.get(e.target))&&void 0!==t?t:new Set).forEach((function(e){e(n)}))}))}))),dr}};function mr(e){var t=e.onResize,n=e.refOrElement,i=e.observeOnly,r=(0,_t.useRef)(t);r.current=t;var o=(0,_t.useRef)(i);o.current=i;var a=(0,_t.useRef)({width:void 0,height:void 0}),s=(0,_t.useCallback)((function(e){if(r.current){var t=a.current.width!==e.width,n=a.current.height!==e.height;("width"===o.current&&t||"height"===o.current&&n||!o.current&&(t||n))&&r.current(e),a.current.width=e.width,a.current.height=e.height}}),[]),c=function(e){var t,n=e.refOrElement,i=e.subscriber,r=null,o=(0,_t.useRef)(null),a=(0,_t.useRef)(null),s=(0,_t.useRef)(null),c=(0,_t.useRef)(),l=(0,_t.useRef)(i);l.current=i;var d=(0,_t.useCallback)((function(){var e=null;a.current?e=a.current:o.current?e=o.current:pr(n)&&(e=n),s.current!==e&&(c.current&&(c.current(),c.current=null),s.current=e,e&&l.current&&(c.current=l.current(e)))}),[n]),u=(0,_t.useCallback)((function(e){a.current=e,d()}),[d]);return n&&!pr(n)&&(r=n),(0,_t.useEffect)((function(){r&&(o.current=r.current),d()}),[r,null===(t=r)||void 0===t?void 0:t.current,d]),(0,_t.useEffect)((function(){return function(){var e;null==c||null===(e=c.current)||void 0===e||e.call(c)}}),[]),u}({refOrElement:n,subscriber:function(e){var t;return Er.subscribersByElement.has(e)||(Er.resizeObserver.observe(e),Er.subscribersByElement.set(e,new Set)),null===(t=Er.subscribersByElement.get(e))||void 0===t||t.add(s),function(){var t,n;null===(t=Er.subscribersByElement.get(e))||void 0===t||t.delete(s),0===(null===(n=Er.subscribersByElement.get(e))||void 0===n?void 0:n.size)&&(Er.resizeObserver.unobserve(e),Er.subscribersByElement.delete(e))}}});return c}var gr,yr,vr,Sr,Rr,Ar,Tr,br=Oe.ZP.div.withConfig({displayName:"SpotifyLogoMenu__SpotifyLogoMenuContainer",componentId:"sc-9pmq81-0"})(["position:absolute;align-self:center;top:0;right:0;display:flex;flex-direction:column;align-items:center;border-radius:56px;margin:",";transition:background-color 0.3s;transition-timing-function:cubic-bezier(0.3,0,0.7,1);transition-delay:",";"," z-index:2;"," "," ",""],ft.g4V,(function(e){return e.isExpanded?"0s":"0.17s"}),(function(e){return"background-color: ".concat(e.backgroundColor).concat(e.isExpanded?"FF":"00",";")}),Fe,ze.medium(hr||(hr=bt()(["\n    margin: ",";\n  "])),ft.dly),ze.small(fr||(fr=bt()(["\n    z-index: 1;\n    & > :nth-child(2) {\n      display: none;\n    }\n  "])))),Lr=(0,Oe.ZP)(Jt).withConfig({displayName:"SpotifyLogoMenu__TooltipAnimatedStyled",componentId:"sc-9pmq81-1"})(["top:-12px;"]),Ir=(0,Oe.ZP)(ir.F).withConfig({displayName:"SpotifyLogoMenu__MenuSpotifyIcon",componentId:"sc-9pmq81-2"})(["cursor:pointer;padding:",";pointer-events:all;"],ft.dly),Pr=Oe.ZP.div.withConfig({displayName:"SpotifyLogoMenu__ButtonIconWrapper",componentId:"sc-9pmq81-3"})(["cursor:pointer;transition:opacity 0.15s,padding 0.3s,height 0.3s;transition-delay:",";transition-timing-function:cubic-bezier(0.3,0,0.7,1);opacity:",";padding:",";pointer-events:",";"],(function(e){return e.isExpanded?"0.17s":"0"}),(function(e){return e.isExpanded?"1":"0"}),(function(e){return e.isExpanded?"".concat(ft.nuo," ").concat(ft.nuo," ").concat(ft.dly," ").concat(ft.nuo):"0"}),(function(e){return e.isExpanded?"auto":"none"})),Cr=pt().memo((function(e){var t=e.id,n=e.isExpanded,i=e.tooltipText,r=e.isMobile,o=e.children,a=e.onClick,s=(0,_t.useState)(!1),c=X()(s,2),l=c[0],d=c[1];return r?pt().createElement(Pr,{isExpanded:n},pt().createElement(Et.E,{onClick:a},o)):pt().createElement(rr.a,{overlay:pt().createElement(Lr,{id:t,isVisible:l,animationType:"slide-from-right",text:i}),placement:rr.a.left,onShow:function(){return d(!0)},onHide:function(){return d(!1)}},pt().createElement(Pr,{isExpanded:n},pt().createElement(Et.E,{"aria-labelledby":t,onClick:a},o)))})),Or=function(e){var t=e.keepExpanded,n=void 0!==t&&t,i=e.onClickMore,r=(0,_t.useState)(!0),o=X()(r,2),a=o[0],s=o[1],c=(0,Le.v9)((function(e){return{isMobile:e.settings.isMobile,uri:e.data.entity.uri}})),l=c.isMobile,d=c.uri,u=(0,_t.useContext)(Nn);(0,_t.useEffect)((function(){var e;return n||(e=setTimeout((function(){return s(!1)}),1e3)),function(){clearTimeout(e)}}),[n]);var _=(0,_t.useCallback)((function(){var e;lr(null===(e=cr().from(d))||void 0===e?void 0:e.toSecureOpenURL())}),[d]),p=(0,_t.useContext)(ur)===Gi.SMALL,h=n||a;return pt().createElement(br,{isExpanded:h,backgroundColor:u,onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)}},pt().createElement(Ir,{iconSize:32,color:ft.ixZ,onClick:function(){p?i():s(!l||(n||!a))}}),pt().createElement(Cr,{onClick:_,isMobile:l,id:"add-to-your-library",isExpanded:h,tooltipText:A.get("embed-video.menu.copy-link")},pt().createElement(or.u,{iconSize:24,semanticColor:"textBase"})),pt().createElement(Cr,{onClick:i,isMobile:l,id:"more-menu",isExpanded:h,tooltipText:A.get("embed_more")},pt().createElement(ar.f,{iconSize:24,semanticColor:"textBase"})))},Dr=n(6517),kr=n(4159),wr=n(3675),Nr=n(7059),Mr=n(6639),Ur=Oe.ZP.div.withConfig({displayName:"OverflowMenu__MenuWrapper",componentId:"sc-1vir16w-0"})(["",";display:flex;flex-direction:column;z-index:4;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;padding:"," ",";",";",";",""],(function(e){return"background: ".concat(e.backgroundColor)}),ft.o78,ft.g4V,Fe,ze.medium(gr||(gr=bt()(["\n    padding: ",";\n  "])),ft.dly),ze.xLarge(yr||(yr=bt()(["\n    max-width: ","px;\n    max-height: 25vh;\n    border-radius: ","\n  "])),(qe.width-48).toString(),ft.dly)),xr=Oe.ZP.div.withConfig({displayName:"OverflowMenu__Content",componentId:"sc-1vir16w-1"})(["display:flex;flex:1;align-content:center;overflow:hidden;flex-direction:column;justify-content:center;"]),Fr=Oe.ZP.div.withConfig({displayName:"OverflowMenu__OptionsWrapper",componentId:"sc-1vir16w-2"})(["display:flex;flex-wrap:wrap;justify-content:space-between;flex-direction:row;overflow:hidden;align-content:flex-start;max-height:128px;> div{flex:1 0 50%;}"," "," & .icon-check{opacity:0;position:absolute;transition:transform 0.3s ease-in-out,opacity 0.3s ease-in-out;transform:rotateY(180deg) scale(1.2);z-index:2;}& .icon-share{transition:transform 0.4s ease-in-out,opacity 1s ease-in-out;transform:scale(1);z-index:1;}& .animate{& .icon-check{opacity:1;transform:rotateY(0deg) scale(1);}& .icon-share{opacity:0;transform:scale(0);}}"],ze.medium(vr||(vr=bt()(["\n    max-height: 64px;\n  "]))),ze.small(Sr||(Sr=bt()(["\n    max-height: 64px;\n\n    > div {\n      flex: 1 0 100%;\n    }\n  "])))),Yr=Oe.ZP.a.withConfig({displayName:"OverflowMenu__MenuItem",componentId:"sc-1vir16w-3"})(["border-radius:",";color:",";display:flex;align-items:center;cursor:pointer;position:relative;background-color:",";margin:",";padding:",";white-space:nowrap;&:hover{background:",";}& > svg{margin-right:",";}"],ft.hM$,ft.ixZ,ft.Saw,ft.hM$,ft.o78,ft.e1B,ft.nuo),Br=(0,Oe.ZP)(Et.E).withConfig({displayName:"OverflowMenu__CloseButton",componentId:"sc-1vir16w-4"})(["margin:",";display:flex;justify-content:flex-end;}"],ft.dly),Kr=Oe.ZP.div.withConfig({displayName:"OverflowMenu__CookiePolicy",componentId:"sc-1vir16w-5"})(["flex:0;display:flex;align-items:flex-end;"]),Hr=function(e){var t=e.onClose,n=(0,_t.useContext)(ht),i=(0,_t.useContext)(Nn),r=(0,Le.I0)(),o=(0,Le.v9)((function(e){return{uri:e.data.entity.uri,showUri:e.data.entity.show.uri,isAnonymous:e.settings.session.isAnonymous}})),a=o.uri,s=o.showUri,c=o.isAnonymous,l=(0,_t.useState)(!1),d=X()(l,2),u=d[0],_=d[1],p=(0,_t.useState)(!1),h=X()(p,2),f=h[0],E=h[1],m=(0,_t.useState)(""),g=X()(m,2),y=g[0],v=g[1],S=(0,_t.useCallback)((function(){n.contains("".concat(a),s.toString()).then((function(e){_(e[0]),E(e[1])}))}),[_,E,n,a,s]);(0,_t.useEffect)((function(){S()}),[S]);var R=Zt((function(){v("")}),3e3),T=(0,_t.useCallback)((function(){var e;lr(null===(e=cr().from(a))||void 0===e?void 0:e.toSecureOpenURL()),v("animate"),R()}),[a,v,R]),b=function(e){return F()(H().mark((function t(){return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!cr().isEpisode(e)){t.next=9;break}if(!u){t.next=7;break}return t.next=5,n.remove(e);case 5:t.next=9;break;case 7:return t.next=9,n.add(e);case 9:if(!cr().isShow(e)){t.next=17;break}if(!f){t.next=15;break}return t.next=13,n.remove(e);case 13:t.next=17;break;case 15:return t.next=17,n.add(e);case 17:S(),t.next=22;break;case 20:t.prev=20,t.t0=t.catch(0);case 22:r(tn({action_type:"click",action_intent:"deeplink",action_item_id:"context-menu"}));case 23:case"end":return t.stop()}}),t,null,[[0,20]])})))};return pt().createElement(Ur,{"data-testid":"more-menu-wrapper",backgroundColor:i},pt().createElement(Br,{semanticColor:"textBase",onClick:t},pt().createElement(Dr.k,{"data-testid":"more-menu-close-icon",iconSize:24,style:{alignSelf:"center",cursor:"pointer"},"arial-label":A.get("close")})),pt().createElement(xr,null,pt().createElement(Fr,null,pt().createElement("div",null,pt().createElement(Yr,{onClick:function(){r({type:oi,productName:"embed_player_v"}),r(tn({action_type:"click",action_intent:"deeplink",action_item_id:"context-menu"}))},target:"_blank"},pt().createElement(ir.F,{iconSize:24}),A.get("play_on_spotify"))),pt().createElement("div",null,pt().createElement(Yr,{onClick:T,className:y},pt().createElement(kr.k,{iconSize:24,className:"icon-check"}),pt().createElement(wr.F,{iconSize:24,className:"icon-share"}),A.get("embed-video.menu.copy-link"))),!c&&pt().createElement(pt().Fragment,null,pt().createElement("div",{"data-testid":"save-to-episodes"},pt().createElement(Yr,{onClick:b(a)},pt().createElement(Nr.Z,{iconSize:24}),u?A.get("contextmenu.remove-from-your-episodes"):A.get("contextmenu.save-to-your-episodes"))),pt().createElement("div",{"data-testid":"follow-on-spotify"},pt().createElement(Yr,{onClick:b(s)},pt().createElement(Mr.I,{iconSize:24}),f?A.get("follow-button.unfollow-tooltip"):A.get("follow_on_spotify")))))),pt().createElement(Kr,null,pt().createElement($t.LF,{as:"a",variant:$t.LF.mesto,href:"https://www.spotify.com/legal/end-user-agreement/",target:"_blank"},A.get("spe.cookie_policy"))))},Gr=n(4518),Vr=n(4483);function jr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=M()(e);if(t){var r=M()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return w()(this,n)}}!function(e){e[e.TRANSIENT=0]="TRANSIENT",e[e.PERSISTENT=1]="PERSISTENT"}(Rr||(Rr={})),function(e){e.SUCCESS="success",e.PLAYBACK_STUCK="playback_stuck",e.PLAYBACK_ERROR="playback_error",e.LICENSE_CHANGE="license_change",e.PLAY_RESTRICTED="play_restricted",e.STOP_RESTRICTED="stop_restricted",e.UPDATE_RESTRICTED="update_restricted",e.PAUSE_RESTRICTED="pause_restricted",e.RESUME_RESTRICTED="resume_restricted",e.SKIP_TO_PREV_RESTRICTED="skip_to_prev_restricted",e.SKIP_TO_NEXT_RESTRICTED="skip_to_next_restricted",e.SKIP_TO_NON_EXISTENT_TRACK="skip_to_non_existent_track",e.TOGGLE_REPEAT_CONTEXT_RESTRICTED="toggle_repeat_context_restricted",e.TOGGLE_REPEAT_TRACK_RESTRICTED="toggle_repeat_track_restricted",e.SET_OPTIONS_RESTRICTED="set_options_restricted",e.TOGGLE_SHUFFLE_RESTRICTED="toggle_shuffle_restricted",e.SET_QUEUE_RESTRICTED="set_queue_restricted",e.INTERRUPT_PLAYBACK_RESTRICTED="interrupt_playback_restricted",e.SEEK_TO_RESTRICTED="seek_to_restricted",e.ONE_TRACK_UNPLAYABLE="one_track_unplayable",e.ONE_TRACK_UNPLAYABLE_AUTO_STOPPED="one_track_unplayable_auto_stopped",e.ALL_TRACKS_UNPLAYABLE_AUTO_STOPPED="all_tracks_unplayable_auto_stopped",e.SKIP_TO_NON_EXISTENT_TRACK_AUTO_STOPPED="skip_to_non_existent_track_auto_stopped",e.QUEUE_REVISION_MISMATCH="queue_revision_mismatch",e.VIDEO_PLAYBACK_ERROR="video_playback_error",e.VIDEO_GEORESTRICTED="video_georestricted",e.VIDEO_UNSUPPORTED_PLATFORM_VERSION="video_unsupported_platform_version",e.VIDEO_UNSUPPORTED_CLIENT_VERSION="video_unsupported_client_version",e.VIDEO_UNSUPPORTED_KEY_SYSTEM="video_unsupported_key_system",e.VIDEO_COUNTRY_RESTRICTED="video_country_restricted",e.VIDEO_UNAVAILABLE="video_unavailable",e.VIDEO_CATALOGUE_RESTRICTED="video_catalogue_restricted",e.VIDEO_MANIFEST_DELETED="video_manifest_deleted",e.TIMEOUT="timeout",e.INVALID="invalid",e.PLAYBACK_REPORTING_ERROR="playback_reporting_error",e.UNKNOWN="unknown",e.UNRECOGNIZED="unrecognized"}(Ar||(Ar={})),function(e){e.AD_DISALLOW="ad_disallow",e.AGE_RESTRICTION_FILTERED="age_restriction_filtered",e.ALREADY_PAUSED="already_paused",e.ALREADY_PLAYING="already_playing",e.BANNED_BY_USER_TRACK="banned_by_user/track",e.BANNED_BY_USER_ALBUM="banned_by_user/album",e.BANNED_BY_USER_ARTIST="banned_by_user/artist",e.CONTEXT_PLAYER_DISALLOW="context_player_disallow",e.ENDLESS_CONTEXT="endless_context",e.EXPLICIT_CONTENT_FILTERED="explicit_content_filtered",e.LOCAL_FILE_BAD_FORMAT="local_file_bad_format",e.LOCAL_FILE_DRM_PROTECTED="local_file_drm_protected",e.LOCAL_FILE_NOT_FOUND="local_file_not_found",e.MFT_DISALLOW="mft_disallow",e.MFT_DISALLOW_MISSING_TRAC="mft_disallow_missing_trac",e.NEWS_SET_TRACK_FILTERED="news_set_track_filtered",e.NO_NEXT_TRACK="no_next_track",e.NO_PREV_TRACK="no_prev_track",e.NO_SPECIFIC_TRACK="no_specific_track",e.NOT_AVAILABLE="not_available",e.NOT_AVAILABLE_BY_ARTIST_BAN="not_available_by_artist_ban",e.NOT_AVAILABLE_IN_CURRENT_REGION="not_available_in_current_region",e.NOT_AVAILABLE_IN_NON_PREMIUM="not_available_in_non_premium",e.NOT_AVAILABLE_OFFLINE="not_available_offline",e.NOT_AVAILABLE_ON_MOBILE_NETWORK="not_available_on_mobile_network",e.NOT_PAUSED="not_paused",e.NOT_PLAYING_CONTEXT="not_playing_context",e.NOT_PLAYING_LOCALLY="not_playing_locally",e.NOT_PLAYING_TRACK="not_playing_track",e.OFFLINE_CAPPING_REACHED="offline_capping_reached",e.PLAYER_CONTEXT_DISALLOW="player_context_disallow",e.PROTOCOL_LIMITATIONS="protocol_limitations",e.PROTOCOL_LIMITIATIONS="protocol_limitiations",e.THROTTLED="throttled",e.UNKNOWN="unknown",e.UNSUPPORTED_FILE_FORMAT="unsupported_file_format",e.USER_CAPPING_REACHED="user_capping_reached",e.USER_STREAMING_DISALLOWED="user_streaming_disallowed"}(Tr||(Tr={}));var Wr=function(e){D()(n,e);var t=jr(n);function n(e,i,r){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return d()(this,n),(o=t.call(this,n.getMessage(i,r,a))).type=e,o.code=i,o.reasons=r,o.cause=a,o}return _()(n,null,[{key:"getMessage",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return t.length>0?"Code '".concat(e,"' with reasons '").concat(t.join(", "),"'"):null!==n?"Code '".concat(e,"' with cause '").concat(n.name,": ").concat(n.message,"'"):"Code '".concat(e,"'")}}]),n}(W()(Error)),qr=function(e){D()(n,e);var t=jr(n);function n(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return d()(this,n),t.call(this,Rr.TRANSIENT,e,i,r)}return n}(Wr),zr=function(e){D()(n,e);var t=jr(n);function n(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return d()(this,n),t.call(this,Rr.PERSISTENT,e,i,r)}return n}(Wr),Qr=Oe.ZP.div.withConfig({displayName:"PlaybackError__Wrapper",componentId:"sc-mlpvxw-0"})(["flex:1;display:flex;flex-direction:column;justify-content:center;align-items:center;"]),Zr=(0,Oe.ZP)(Gr.B).withConfig({displayName:"PlaybackError__IconExclamationAltActiveStyled",componentId:"sc-mlpvxw-1"})(["margin:",";"],ft.dly),$r=Oe.ZP.div.withConfig({displayName:"PlaybackError__VerticalAlignMiddle",componentId:"sc-mlpvxw-2"})(["> *{vertical-align:middle;}"]),Xr=function(e){var t,n,i=e.playbackError,r=e.onWatchOnSpotifyClick;return i?pt().createElement(Qr,{"data-testid":"error-container"},pt().createElement($r,null,pt().createElement(Zr,null),pt().createElement($t.LF,{variant:$t.LF.ballad},(t=i).code===Ar.VIDEO_UNAVAILABLE?A.get("embed-video.video-not-available"):(null===(n=t.cause)||void 0===n?void 0:n.message)||t.cause.code)),pt().createElement(Vr.h,{onClick:r,component:"button",standalone:!0,isActive:!0},A.get("watch_on_spotify"))):null},Jr="CLOSE_OVERFLOW_MENU",eo="SHOW_OVERFLOW_MENU",to="PLAY_ON_SPOTIFY_CLICK",no="FOLLOW_ON_SPOTIFY_CLICK",io="COPY_LINK_CLICK",ro="PRIVACY_POLICY_CLICK",oo="TERMS_AND_CONDITIONS_CLICK";function ao(e){return{type:to,productName:e}}var so=Oe.ZP.div.withConfig({displayName:"VideoPlayer__PlaybackErrorWrapper",componentId:"sc-x3t2jm-0"})(["flex:1;display:flex;flex-direction:row;align-items:center;"]),co=function(){var e,t,n=(0,_t.useState)(!1),i=X()(n,2),r=i[0],o=i[1],a=(0,_t.useState)(!0),s=X()(a,2),c=s[0],l=s[1],d=(0,Le.v9)((function(e){var t,n,i,r;return{entity:e.data.entity,duration:e.data.entity.duration_ms,isPaused:null===(t=e.playback)||void 0===t?void 0:t.isPaused,hasContext:null===(n=e.playback)||void 0===n?void 0:n.hasContext,hasPlaybackError:Boolean(null===(i=e.playback)||void 0===i?void 0:i.error),playbackError:null===(r=e.playback)||void 0===r?void 0:r.error}})),u=d.entity,_=d.duration,p=d.isPaused,h=d.hasContext,f=d.hasPlaybackError,E=d.playbackError,m=(0,Le.I0)();h&&!0===c&&l(!1);var g=!c&&!p&&!r;return pt().createElement(Qi,{disabled:!h,hideChildren:g},pt().createElement(Oi,{isVisibleInSmallBreakpoint:r||!p}),f?pt().createElement(so,null,pt().createElement(Xr,{playbackError:new Wr(E.type,Ar.VIDEO_UNAVAILABLE,[]),onWatchOnSpotifyClick:function(){return m(ao("embed_player_v"))}})):pt().createElement(pt().Fragment,null,r&&pt().createElement(Hr,{onClose:function(){o(!1),m(tn({action_type:"click",action_intent:"close-context-menu"}))}}),pt().createElement(Or,{keepExpanded:c,onClickMore:function(){o(!0),m(tn({action_type:"click",action_intent:"open-context-menu"}))}}),c&&pt().createElement(nr,{onClick:function(){m(In(bn)),m(tn({action_type:"click",action_intent:"play",action_item_id:"landing-view"}))},coverArtImageUrl:null===(e=u.images)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.url}),h&&pt().createElement(pt().Fragment,null,pt().createElement(xi,{isVisible:p,onCTAClick:function(){m(di("embed_player_v")),m(tn({action_type:"click",action_intent:"download-app",action_item_id:"upsell"}))},duration:_}),pt().createElement(ni,null))))},lo="INITIALIZE",uo="MOUNTED";function _o(){return{type:lo}}n(4713);var po=Oe.ZP.div.withConfig({displayName:"EmbedVideoWidget__AspectRatioContainer",componentId:"sc-1dp0zw-0"})(["width:100%;padding-top:56.25%;position:relative;background-color:",";"],(function(e){var t;return null!==(t=e.backgroundColor)&&void 0!==t?t:"transparent"}));(0,Le.$j)()((function(){var e,t,n,i,r,o,a,s,c=(0,Le.v9)((function(e){return{backgroundColor:e.data.backgroundColor}})),l=c.backgroundColor,d=(e={},h()(e,Gi.SMALL,0),h()(e,Gi.MEDIUM,Ve.width),h()(e,Gi.LARGE,je.width),h()(e,Gi.XLARGE,qe.width),t=e,n=(0,_t.useState)(),i=X()(n,2),r=i[0],o=i[1],a=Object.entries(t).sort((function(e,t){return t[1]-e[1]})),s=mr({observeOnly:"width",onResize:function(e){var t=e.width;if(void 0!==t){var n=a.find((function(e){var n=X()(e,2)[1];return t>=n})),i=n&&n[0];i&&i!==r&&o(i)}}}),{ref:s,breakpoint:r}),u=d.ref,_=d.breakpoint,p=(0,_t.useCallback)((function(){return"ontouchstart"in document.documentElement?"touchstart":"mouseover"}),[]),f=(0,Le.I0)(),E=(0,_t.useCallback)((function(){document.removeEventListener(p(),E),f(_o()),f(tn({action_type:"interacted",action_intent:p()}))}),[f,p]);return(0,_t.useEffect)((function(){return f({type:uo}),document.addEventListener(p(),E),function(){document.removeEventListener(p(),E)}}),[f,E,p]),pt().createElement(Nn.Provider,{value:l},pt().createElement(ur.Provider,{value:_},pt().createElement(po,{ref:u,backgroundColor:ft.Snx,className:"encore-dark-theme","data-testid":"video-fullscreen-container"},pt().createElement(co,null))))}));n(219),n(1013);var ho=function(e){return"is following"===e.data.followState},fo="SHOW_PLAYER";var Eo,mo=n(3690),go=n(5026),yo=n.n(go);function vo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=M()(e);if(t){var r=M()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return w()(this,n)}}function So(e){var t=parseInt(e.replace("#",""),16),n=t>>8&255,i=255&t;return"".concat(t>>16&255,",").concat(n,",").concat(i)}var Ro={name:"1jzi3uc",styles:"&:after{opacity:1;}"},Ao={name:"k39uwt",styles:"&:before{opacity:1;}"},To=(0,At.Z)("div",{target:"eukl5d21"})("width:100%;overflow:hidden;opacity:0.8;",(function(e){return(0,Ie.iv)("&:before,&:after{display:block;width:",8,"px;top:0;bottom:0;content:'';position:absolute;z-index:2;}&:before{opacity:0;transition:opacity 100ms linear;background:linear-gradient(\n        to right,\n        rgb(",So(e.backgroundColor),"),\n        rgba(",So(e.backgroundColor),", 0)\n      );left:0;}&:after{opacity:0;background:linear-gradient(\n        to left,\n        rgb(",So(e.backgroundColor),"),\n        rgba(",So(e.backgroundColor),", 0)\n      );right:0;}","")})," ",(function(e){return e.isAnimating&&!e.animationWillSoonEnd&&Ao})," ",(function(e){return e.shouldMarquee&&Ro})," ",et.medium,"{width:auto;left:",nt,"px;bottom:",38,"px;right:",64,"px;}",et.small,"{display:block;bottom:",32,"px;",tt.small,"{bottom:",nt,"px;}}"),bo=(0,Ie.F4)(Eo||(Eo=bt()(["\n  0% { transform: translate3d(0, 0, 0); }\n  100% { transform: translate3d(-50%, 0, 0); }\n"]))),Lo=(0,At.Z)("span",{target:"eukl5d20"})("white-space:nowrap;display:inline-block;line-height:2rem;",(function(e){return e.shouldMarquee&&(0,Ie.iv)("will-change:transform;animation:",bo,";animation-timing-function:linear;animation-delay:",e.animationDelay,"ms;animation-duration:",e.animationTime,"s;animation-iteration-count:1;","")}),";"),Io=function(e){D()(n,e);var t=vo(n);function n(e){var i;return d()(this,n),i=t.call(this,e),h()(I()(i),"titleRef",void 0),h()(I()(i),"setTitleRef",void 0),h()(I()(i),"titleSpanRef",void 0),h()(I()(i),"setTitleSpanRef",void 0),h()(I()(i),"wrapperRef",void 0),h()(I()(i),"setWrapperRef",void 0),h()(I()(i),"animationWillSoonEndTimeout",void 0),h()(I()(i),"onAnimationStart",(function(){i.animationWillSoonEndTimeout&&clearTimeout(i.animationWillSoonEndTimeout),i.setState({isAnimating:!0,animationWillSoonEnd:!1});i.animationWillSoonEndTimeout=setTimeout((function(){i.setState({animationWillSoonEnd:!0})}),1e3*i.state.animationTime-300)})),h()(I()(i),"onAnimationEnd",(function(){i.setState({isAnimating:!1,animationWillSoonEnd:!1})})),i.setTitleRef=function(e){e&&(i.titleRef=e,i.setShouldMarquee(),i.installAnimationHandler())},i.setTitleSpanRef=function(e){e&&(i.titleSpanRef=e)},i.setWrapperRef=function(e){e&&(i.wrapperRef=e,i.setShouldMarquee())},i.state={animationTime:0,shouldMarquee:!1,isAnimating:!1,animationWillSoonEnd:!1},i.setShouldMarquee=i.setShouldMarquee.bind(I()(i)),i.installAnimationHandler=i.installAnimationHandler.bind(I()(i)),i.removeAnimationHandler=i.removeAnimationHandler.bind(I()(i)),i.handleRestartMarquee=i.handleRestartMarquee.bind(I()(i)),i.restartMarquee=i.restartMarquee.bind(I()(i)),i}return _()(n,[{key:"componentDidMount",value:function(){var e,t,n,i;e="resize",t="optimizedResize",n=window,i=!1,n.addEventListener(e,(function(){i||(i=!0,yo()((function(){n.dispatchEvent(new CustomEvent(t)),i=!1})))})),window.addEventListener("optimizedResize",this.setShouldMarquee)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("optimizedResize",this.setShouldMarquee),this.removeAnimationHandler()}},{key:"handleRestartMarquee",value:function(){this.state.isAnimating||this.restartMarquee()}},{key:"restartMarquee",value:function(){var e=this;this.state.shouldMarquee&&(this.setState({shouldMarquee:!1,isAnimating:!1}),setTimeout((function(){e.setState({shouldMarquee:!0})}),0))}},{key:"removeAnimationHandler",value:function(){this.titleRef&&(this.titleRef.removeEventListener("animationstart",this.onAnimationStart),this.titleRef.removeEventListener("animationend",this.onAnimationEnd))}},{key:"installAnimationHandler",value:function(){this.titleRef&&(this.titleRef.addEventListener("animationstart",this.onAnimationStart),this.titleRef.addEventListener("animationend",this.onAnimationEnd))}},{key:"setShouldMarquee",value:function(){var e;if(this.titleRef&&this.wrapperRef){var t=parseInt(getComputedStyle(this.titleRef).width,10),n=null===(e=this.titleSpanRef)||void 0===e?void 0:e.getBoundingClientRect().width;if(!isNaN(t)&&n){var i=n>=parseInt(getComputedStyle(this.wrapperRef).width,10)-16,r=this.props.speed,o=t/(void 0===r?100:r);this.setState({shouldMarquee:i,animationTime:o})}}}},{key:"render",value:function(){var e=this.state,t=e.shouldMarquee,n=e.animationTime,i=this.props,r=i.animationDelay,o=void 0===r?500:r,a=i.backgroundColor,s=i.children;return pt().createElement(To,{backgroundColor:a,ref:this.setWrapperRef,shouldMarquee:t,onMouseEnter:this.handleRestartMarquee,onTouchStart:this.handleRestartMarquee,isAnimating:this.state.isAnimating,animationWillSoonEnd:this.state.animationWillSoonEnd},pt().createElement(Lo,{ref:this.setTitleRef,shouldMarquee:t,animationTime:n,animationDelay:o},pt().createElement("span",{ref:this.setTitleSpanRef},s),pt().createElement("span",{"aria-hidden":"true",style:{marginLeft:30,marginRight:30,visibility:this.state.isAnimating?"visible":"hidden"}},s)))}}]),n}(pt().Component);const Po=Io,Co=(0,At.Z)("button",{target:"e1ohvknn0"})("box-sizing:border-box;border-radius:0.5rem;padding:0 2rem;font-size:1.625rem;font-weight:bold;line-height:3rem;",(function(e){return e.isFollowing?"border: 1px solid rgb(255, 255, 255, 1);":"border: 1px solid rgb(255, 255, 255, 0.3);"}),";"),Oo="lMgN45nWoRRnUKvM9mH0";var Do=n(42),ko=n.n(Do),wo=function(e){var t=e.text,n=e.ariaLabel,i=void 0===n?t:n,r=e.className;return pt().createElement("span",{"aria-label":i,className:ko()(Oo,r)},t)},No=function(e){var t=e.className;return pt().createElement(wo,{ariaLabel:A.get("card.a11y.explicit"),text:"E",className:t})};function Mo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=M()(e);if(t){var r=M()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return w()(this,n)}}var Uo=(0,At.Z)("div",{target:"e1aiy3a112"})("position:absolute;width:",ot.largeH,"px;left:",nt,"px;top:",nt,"px;bottom:",nt,"px;background-image:url(",(function(e){return e.imageSrc}),");background-size:cover;background-repeat:no-repeat;background-position:center center;border-radius:1rem;transform-origin:bottom left;transition:transform ",ct,"ms,opacity ",ct,"ms,visibility ",ct,"ms,border-radius ",ct,"ms;box-shadow:0 9px 9px 0 rgba(0, 0, 0, 0.1),0 0 29px 0 rgba(0, 0, 0, 0.1);opacity:1;will-change:transform,box-shadow,border-radius,opacity;transform:scale(1) translate3d(0, 0, 0);cursor:pointer;&:hover{opacity:0.8;}",tt.small,"{width:",ot.mediumH,"px;height:",ot.mediumH,"px;}",et.medium,"{width:",at.largeH,"px;bottom:",nt+it,"px;",tt.small,"{left:",8,"px;top:",8,"px;width:",at.mediumH,"px;height:",at.mediumH,"px;border-radius:0.5rem;}}",et.small,"{left:0;right:0;margin:0 auto;width:",st.largeH,"px;height:",st.largeH,"px;transform-origin:center bottom;transition-delay:",100,"ms;",tt.small,"{width:",st.mediumH,"px;height:",st.mediumH,"px;border-radius:0.5rem;}}"),xo=(0,At.Z)("div",{target:"e1aiy3a111"})("position:absolute;left:",32+ot.largeH,"px;right:",nt,"px;top:",36,"px;bottom:",nt+it,"px;display:flex;align-items:center;overflow:hidden;opacity:1;visibility:visible;transform:initial;transition:transform 50ms,opacity 50ms,visibility 50ms;transition-delay:140ms;top:",36,"px;",tt.small,"{left:",32+ot.mediumH,"px;}",et.medium,"{left:",32+at.largeH,"px;",tt.small,"{left:",nt+at.mediumH,"px;top:",32,"px;bottom:",nt+rt,"px;}}",et.small,"{display:none;}"),Fo=(0,At.Z)("div",{target:"e1aiy3a110"})("width:100%;display:block;",xe,";"),Yo=(0,At.Z)("div",{target:"e1aiy3a19"})("opacity:0;left:",64,"px;bottom:",21,"px;width:152px;position:absolute;font-size:1.625rem;transition:opacity ",ct,"ms;",et.medium,"{width:auto;left:",nt,"px;bottom:",38,"px;right:",70,"px;}",et.small,"{display:block;opacity:1;left:",nt,"px;bottom:",32,"px;",tt.small,"{bottom:",28,"px;}}"),Bo=(0,At.Z)("h1",{target:"e1aiy3a18"})("font-weight:bold;font-size:3rem;line-height:4rem;cursor:pointer;",et.medium,"{font-size:2rem;line-height:2.5rem;}",tt.small,"{font-size:1.625rem;line-height:2rem;}"),Ko=(0,At.Z)("h2",{target:"e1aiy3a17"})("display:inline-flex;align-items:center;margin-top:0.5rem;cursor:pointer;font-size:2rem;line-height:2.5rem;",Ne,";",tt.small,"{margin-top:0.5rem;font-size:1.625rem;line-height:2rem;}",et.medium,"{font-size:1.625rem;line-height:2rem;}"),Ho=(0,At.Z)("span",{target:"e1aiy3a16"})(""),Go=(0,At.Z)("div",{target:"e1aiy3a15"})("margin-top:0.5rem;",tt.small,"{display:none;}"),Vo=(0,At.Z)("span",{target:"e1aiy3a14"})({name:"2ycp6t",styles:"padding:0 1rem"}),jo=(0,At.Z)(No,{target:"e1aiy3a13"})("box-sizing:border-box;align-self:center;margin-right:",ft.dly,";"),Wo=(0,At.Z)("div",{target:"e1aiy3a12"})("display:flex;flex-wrap:wrap;flex-direction:",(function(e){return e.rtl?"row-reverse":"row"}),";"),qo=(0,At.Z)("span",{target:"e1aiy3a11"})("display:inline-flex;flex-direction:",(function(e){return e.rtl?"row-reverse":"row"}),";justify-content:flex-start;align-items:baseline;white-space:nowrap;"),zo=(0,At.Z)("div",{target:"e1aiy3a10"})({name:"uoloz",styles:"display:flex;white-space:nowrap"}),Qo=function(e){D()(n,e);var t=Mo(n);function n(){var e;d()(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),h()(I()(e),"handleCoverArtClick",(function(){var t;e.props.togglePlay(),e.props.onLogInteraction({action_type:"click",action_intent:!1===(null===(t=e.props.playback)||void 0===t?void 0:t.isPaused)?"pause":"play",action_item_id:"cover-art"})})),h()(I()(e),"handleFollowButtonClick",(function(){e.props.followClick(),e.props.onLogInteraction({action_type:"click",action_intent:e.props.isFollowing?"unfollow":"follow"})})),h()(I()(e),"handleClick",(function(t,n){return function(){n(),e.props.onLogInteraction({action_type:"click",action_intent:"deeplink",action_item_id:t})}})),h()(I()(e),"handleKeyDown",(function(t,n){return function(i){var r=32===i.keyCode,o=13===i.keyCode;(r||o)&&(i.preventDefault(),e.handleClick(t,n)())}})),h()(I()(e),"formatDate",(function(e){if(e){var t=Ri(e);return Ai(t)}return""})),e}return _()(n,[{key:"renderExplicitAndReleaseDate",value:function(){var e=this.props,t=e.explicit,n=e.releaseDate,i=e.rtl;return pt().createElement(qo,{rtl:i},"true"===t?pt().createElement(jo,null):"",pt().createElement(Ho,null,this.formatDate(n)),pt().createElement(Vo,null,"•"))}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.subtitle,i=e.backgroundColor,r=e.imageSrc,o=e.isFollowing,a=e.rtl,s=void 0!==a&&a,c=e.episodeTitleClick,l=e.showTitleClick,d=o?A.get("following"):A.get("follow");return pt().createElement(pt().Fragment,null,pt().createElement(Yo,{dir:"auto"},s?pt().createElement(zo,{dir:"auto"},pt().createElement("span",null,t),this.renderExplicitAndReleaseDate(),pt().createElement(Vo,null,"•"),pt().createElement("span",null,n)):pt().createElement(Po,{backgroundColor:i},pt().createElement("span",null,t),pt().createElement(Vo,null,"•"),this.renderExplicitAndReleaseDate(),pt().createElement("span",null,n))),pt().createElement(Uo,{imageSrc:r,"aria-label":A.get("spe.podcast_cover_art"),onClick:this.handleCoverArtClick}),pt().createElement(xo,null,pt().createElement(Fo,null,pt().createElement(Bo,{onClick:this.handleClick("title",c),onKeyDown:this.handleKeyDown("title",c),tabIndex:0},pt().createElement(mo.Z,{dir:"auto",lines:2},t)),pt().createElement(Ko,{onClick:this.handleClick("subtitle",l),onKeyDown:this.handleKeyDown("subtitle",l),dir:"auto",tabIndex:0},pt().createElement(Wo,{dir:"auto",rtl:s},this.renderExplicitAndReleaseDate(),pt().createElement(mo.Z,{dir:"auto",lines:1},n))),pt().createElement(Go,null,pt().createElement(Co,{onClick:this.handleFollowButtonClick,isFollowing:o,tabIndex:0,"aria-label":d},d)))))}}]),n}(pt().PureComponent),Zo=function(e){var t,n,i=e.uri,r={};if("episode"!==e.type)throw new Error("Unsupported entity type: ".concat(e.type));return r.title=e.name,r.subtitle=e.show.name,r.duration=e.duration_ms.toString(),r.externalResolvedUrl=e.external_playback_url,r.audioPreviewUrl=e.audio_preview_url,r.explicit=null!==(t=null===(n=e.explicit)||void 0===n?void 0:n.toString())&&void 0!==t?t:"",r.releaseDate=e.release_date,{uri:i,metadata:r,pages:[{items:[]}]}},$o={togglePlay:Ln,showPlayer:function(){return{type:fo}},episodeTitleClick:function(){return di("embed_player_p")},showTitleClick:function(){return{type:si,productName:"embed_player_p"}},followClick:function(){return{type:ri,productName:"embed_player_p"}},onLogInteraction:function(e){return tn(e)}};const Xo=(0,Le.$j)((function(e){var t,n,i=Zo(e.data.entity).metadata,r=null===(t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.desiredSize,i=void 0===n?Number.MAX_SAFE_INTEGER:n,r=t.desiredHeight,o=void 0===r?i:r,a=t.desiredWidth,s=void 0===a?i:a,c=t.desiredLabel,l=void 0===c?"":c;if(e&&!(e.length<=0)){var d=e.filter((function(e){return e.label===l})),u=X()(d,1)[0];if(u)return u;var _=e.map((function(e){var t=[(e.width||0)*(e.height||0),o*s];return{ratio:Math.max.apply(Math,t)/Math.min.apply(Math,t),image:e}})).sort((function(e,t){return e.ratio-t.ratio}));return X()(_,1)[0].image}}((null===(n=e.data.entity)||void 0===n?void 0:n.images)||[],{desiredSize:ot.largeH}))||void 0===t?void 0:t.url;return{title:(null==i?void 0:i.title)||"",subtitle:(null==i?void 0:i.subtitle)||"",imageSrc:r||"",backgroundColor:e.data.backgroundColor,isFollowing:ho(e),rtl:e.settings.rtl,playback:e.playback,explicit:(null==i?void 0:i.explicit)||"false",releaseDate:(null==i?void 0:i.releaseDate)||""}}),$o)(Qo);n(3615);const Jo=function(e){var t=e.className,n=e.ariaLabel,i=e.onClick;return(0,Ie.tZ)("button",{"aria-label":n,className:t,onClick:i,dir:"ltr"},(0,Ie.tZ)("svg",{width:"66px",height:"20px",viewBox:"0 0 66 20"},(0,Ie.tZ)("path",{d:"M10.16 0C4.552 0 0 4.464 0 9.964c0 5.512 4.552 9.965 10.16 9.965 5.62 0 10.16-4.465 10.16-9.965C20.334 4.464 15.78 0 10.16 0zm4.662 14.381a.638.638 0 0 1-.874.202c-2.392-1.428-5.39-1.75-8.935-.964-.34.071-.68-.13-.752-.464a.616.616 0 0 1 .473-.738c3.872-.87 7.199-.5 9.87 1.107.315.178.412.56.218.857zm1.25-2.714a.812.812 0 0 1-1.093.262c-2.73-1.655-6.894-2.131-10.123-1.167-.425.119-.862-.107-.984-.512a.768.768 0 0 1 .534-.964c3.69-1.096 8.28-.572 11.423 1.321.352.214.474.69.243 1.06zm.11-2.834C12.903 6.93 7.501 6.75 4.37 7.68a.96.96 0 0 1-1.19-.62c-.157-.488.134-1.011.632-1.166 3.593-1.072 9.565-.857 13.328 1.333a.92.92 0 0 1 .328 1.274.934.934 0 0 1-1.287.333zM27.652 9.202c-1.76-.404-2.063-.702-2.063-1.31 0-.57.546-.952 1.36-.952.788 0 1.577.298 2.403.893.024.024.06.024.085.024.036 0 .06-.024.073-.047l.862-1.191a.111.111 0 0 0-.025-.155c-.983-.774-2.088-1.143-3.374-1.143-1.894 0-3.217 1.12-3.217 2.715 0 1.714 1.14 2.321 3.12 2.785 1.675.381 1.966.703 1.966 1.262 0 .631-.57 1.024-1.493 1.024-1.02 0-1.857-.333-2.792-1.13-.024-.025-.06-.025-.085-.025-.036 0-.06.012-.073.036l-.959 1.12c-.036.047-.036.118.012.154a5.806 5.806 0 0 0 3.873 1.452c2.039 0 3.362-1.095 3.362-2.785-.024-1.429-.886-2.215-3.035-2.727zM35.288 7.5c-.886 0-1.615.345-2.21 1.048v-.786a.108.108 0 0 0-.109-.107h-1.566c-.06 0-.109.047-.109.107v8.762c0 .06.049.107.11.107h1.565c.06 0 .11-.048.11-.107v-2.762c.594.655 1.323.976 2.209.976 1.639 0 3.314-1.238 3.314-3.619 0-2.369-1.675-3.619-3.314-3.619zm1.48 3.619c0 1.214-.764 2.048-1.844 2.048s-1.882-.881-1.882-2.048.813-2.048 1.882-2.048c1.068 0 1.845.858 1.845 2.048zM42.862 7.5c-2.112 0-3.775 1.607-3.775 3.643 0 2.024 1.651 3.607 3.751 3.607 2.124 0 3.787-1.595 3.787-3.631 0-2.024-1.65-3.619-3.763-3.619zm0 5.69c-1.128 0-1.978-.892-1.978-2.059 0-1.179.825-2.036 1.954-2.036 1.13 0 1.99.893 1.99 2.072 0 1.166-.825 2.023-1.966 2.023zM51.153 7.643H49.43V5.917a.108.108 0 0 0-.11-.107h-1.566c-.06 0-.109.047-.109.107v1.738h-.752c-.061 0-.11.047-.11.107v1.321c0 .06.049.107.11.107h.752v3.429c0 1.381.704 2.083 2.088 2.083.558 0 1.032-.119 1.469-.357.036-.024.06-.06.06-.095v-1.262c0-.036-.024-.071-.048-.095a.092.092 0 0 0-.11 0 1.943 1.943 0 0 1-.922.214c-.51 0-.728-.226-.728-.726V9.202h1.724c.06 0 .109-.047.109-.107V7.762c-.024-.06-.073-.12-.134-.12zM57.174 7.655V7.44c0-.63.243-.904.79-.904.327 0 .594.06.885.154.037.012.073 0 .11-.011.024-.024.048-.06.048-.096V5.286a.115.115 0 0 0-.085-.107A4.285 4.285 0 0 0 57.612 5c-1.457 0-2.222.798-2.222 2.321v.322h-.753c-.06 0-.121.047-.121.107v1.333c0 .06.048.107.121.107h.753v5.286c0 .06.048.107.109.107h1.566c.06 0 .11-.047.11-.107V9.202h1.468l2.246 5.286c-.255.56-.51.667-.85.667-.28 0-.57-.084-.862-.238-.024-.012-.06-.012-.097-.012-.024.012-.06.035-.073.06l-.534 1.142c-.024.06 0 .12.049.143a3.33 3.33 0 0 0 1.675.417c1.165 0 1.796-.536 2.367-1.953l2.731-6.904a.114.114 0 0 0-.012-.108.111.111 0 0 0-.097-.047h-1.639c-.048 0-.097.035-.11.071l-1.674 4.69-1.797-4.69c-.012-.047-.06-.071-.11-.071h-2.682zM53.69 7.643h-1.566c-.06 0-.109.047-.109.107v6.726c0 .06.049.107.11.107h1.565c.061 0 .11-.047.11-.107V7.762c0-.06-.049-.12-.11-.12zM52.901 4.583c-.619 0-1.129.5-1.129 1.107 0 .608.51 1.108 1.13 1.108.618 0 1.128-.5 1.128-1.108 0-.607-.497-1.107-1.129-1.107z",fill:"currentColor",fillRule:"evenodd"})))};var ea=function(){return(0,Ie.tZ)("svg",{id:"3e27f204-f440-4acb-9e8a-17de2e179ae4","data-name":"Icons",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},(0,Ie.tZ)("title",null,"Icon Link"),(0,Ie.tZ)("path",{d:"M13.31,10.87a3.8,3.8,0,0,1,0,5.36L9.75,19.8a3.94,3.94,0,0,1-5.55,0h0a3.94,3.94,0,0,1,0-5.55L7,11.41",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ie.tZ)("path",{d:"M10.69,13.13a3.8,3.8,0,0,1,0-5.36L14.25,4.2a3.94,3.94,0,0,1,5.55,0h0a3.94,3.94,0,0,1,0,5.55L17,12.58",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}))},ta=function(){return(0,Ie.tZ)("svg",{id:"aca6f55b-5455-4fa2-96d5-18fbbdcb22d0","data-name":"Icons",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},(0,Ie.tZ)("title",null,"Icon Add Follow"),(0,Ie.tZ)("line",{x1:"21",y1:"18.5",x2:"14",y2:"18.5",fill:"none",stroke:"currentColor",strokeMiterlimit:"10"}),(0,Ie.tZ)("line",{x1:"17.5",y1:"22",x2:"17.5",y2:"15",fill:"none",stroke:"currentColor",strokeMiterlimit:"10"}),(0,Ie.tZ)("path",{d:"M15.52,15.29l-.69-.39a1,1,0,0,1-.32-1.63l.53-.56.13-.13A5.72,5.72,0,0,0,17,8.51,5.27,5.27,0,0,0,12,3,5.27,5.27,0,0,0,7,8.51a5.72,5.72,0,0,0,1.83,4.06l.13.13.53.56a1,1,0,0,1-.32,1.63L6,16.7a5,5,0,0,0-1.87,1.84,5.53,5.53,0,0,0-.65,2.94V22",fill:"none",stroke:"currentColor",strokeMiterlimit:"10"}))},na=function(){return(0,Ie.tZ)("svg",{id:"6c5870dd-b3c9-481d-8176-d409bd2d68e4","data-name":"Icons",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},(0,Ie.tZ)("title",null,"Close X"),(0,Ie.tZ)("path",{d:"M4.93,4.93,19.07,19.07m-14.14,0L19.07,4.93",fill:"none",stroke:"currentColor",strokeMiterlimit:"10"}))},ia=function(){return(0,Ie.tZ)("svg",{id:"edb699df-f28f-42ef-b3f4-7e31d591824f","data-name":"Icons",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},(0,Ie.tZ)("title",null,"Spotify Logo"),(0,Ie.tZ)("path",{fill:"currentColor",fillRule:"evenodd",d:"M18.51,10.85a.87.87,0,0,1-.39-.09A17,17,0,0,0,6.24,9.56a.87.87,0,0,1-.45-1.68A18.69,18.69,0,0,1,18.9,9.2a.87.87,0,0,1-.39,1.65Zm-.43,2.53a.87.87,0,0,1-1.17.37,13.71,13.71,0,0,0-10.09-1,.87.87,0,0,1-.48-1.67,15.45,15.45,0,0,1,11.37,1.14A.87.87,0,0,1,18.08,13.38Zm-1.2,3a.87.87,0,0,1-1.18.33,10.47,10.47,0,0,0-8.28-.84.87.87,0,0,1-.53-1.66,12.22,12.22,0,0,1,9.66,1A.87.87,0,0,1,16.88,16.42ZM12,2A10,10,0,1,0,22,12,10,10,0,0,0,12,2Z"}))};function ra(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=M()(e);if(t){var r=M()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return w()(this,n)}}var oa=200,aa=200,sa=(0,At.Z)("div",{target:"e8a7mi412"})("position:absolute;height:100%;width:100%;left:0;top:0;background-color:","rgb(12, 12, 12)",";opacity:0;visibility:hidden;transform:translateY(100%);transition:opacity ",oa,"ms ",aa,"ms ease-out,visibility ",oa,"ms ",aa,"ms,transform 0s ",400,"ms;",(function(e){return e.visible&&(0,Ie.iv)("transition:opacity ",oa,"ms 0s ease-out,visibility 0s 0s,transform 0s 0s;opacity:1;visibility:visible;transform:translateY(0%);","")}),";"),ca=(0,At.Z)("div",{target:"e8a7mi411"})({name:"97pf1g",styles:"height:3rem;width:3rem;color:white;right:2rem;top:2rem;position:absolute;cursor:pointer"}),la=(0,At.Z)("div",{target:"e8a7mi410"})("position:relative;height:100%;box-sizing:border-box;padding:2rem;opacity:0;transition:opacity ",aa,"ms ease-out;",(function(e){return e.visible&&(0,Ie.iv)("transition-delay:",oa,"ms;opacity:1;","")}),";",et.small,"{font-size:1.625rem;}"),da=(0,At.Z)("ul",{target:"e8a7mi49"})("transform:translateY(10px);transition:transform ",aa,"ms ease-out;margin:0 0 0 0;margin-right:4rem;padding:0;text-indent:0;list-style-type:none;",(function(e){return e.visible&&(0,Ie.iv)("transform:translateY(0px);transition-delay:",oa,"ms;","")}),";"),ua=(0,At.Z)("li",{target:"e8a7mi48"})("display:flex;margin-bottom:2rem;flex-direction:row;line-height:3rem;",et.small,"{margin-bottom:1.5rem;}",tt.small,"{margin-bottom:1rem;}"),_a=(0,At.Z)("div",{target:"e8a7mi47"})({name:"1jycck9",styles:"position:absolute;bottom:2rem;opacity:0.6"}),pa=(0,At.Z)("span",{target:"e8a7mi46"})({name:"29uyqu",styles:"padding:0 0.5em;font-weight:bold"}),ha=(0,At.Z)("a",{target:"e8a7mi45"})({name:"rriwma",styles:"cursor:pointer;&:hover{text-decoration:underline;}"}),fa=(0,At.Z)("div",{target:"e8a7mi44"})({name:"v9qo1w",styles:"overflow-x:hidden;white-space:nowrap;text-overflow:ellipsis;flex:1"}),Ea=(0,At.Z)("div",{target:"e8a7mi43"})({name:"10o29jg",styles:"position:relative;overflow-x:hidden;flex:1"}),ma=(0,At.Z)("button",{target:"e8a7mi42"})({name:"lftype",styles:"padding-right:1rem;>svg{height:3rem;width:3rem;vertical-align:top;}"}),ga={name:"akiu34",styles:"opacity:0;visibility:hidden;transform:translateY(-10px);transition-delay:0ms"},ya=(0,At.Z)("div",{target:"e8a7mi41"})("opacity:1;visibility:visible;transition:transform ",aa,"ms ease-out,opacity ",aa,"ms ease-out,visibility ",aa,"ms ease-out;transition-delay:",aa,"ms;",(function(e){return!e.show&&ga}),";"),va=(0,At.Z)("div",{target:"e8a7mi40"})("position:absolute;top:0;opacity:0;max-width:100%;visibility:hidden;transition:opacity ",aa,"ms ease-out,visibility ",oa,"ms;transition-delay:0ms;",(function(e){return e.show&&(0,Ie.iv)("opacity:1;visibility:visible;transition-delay:",aa,"ms;","")}),";"),Sa=function(e){D()(n,e);var t=ra(n);function n(){var e;d()(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),h()(I()(e),"state",{clickedCopyLink:!1}),h()(I()(e),"handleClose",(function(){e.props.onClose(),e.props.onLogInteraction({action_type:"click",action_intent:"close-context-menu"})})),h()(I()(e),"handlePlayOnSpotifyClick",(function(){e.props.onPlayOnSpotify(),e.props.onLogInteraction({action_type:"click",action_intent:"open-spotify"})})),h()(I()(e),"handleFollowSpotifyClick",(function(){e.props.onFollowOnSpotify(),e.props.onLogInteraction({action_type:"click",action_intent:"follow"})})),h()(I()(e),"handleCopyLinkClick",(function(){if(!e.state.clickedCopyLink){var t=e.props.entityUrl,n=void 0===t?document.location.href:t;e.props.onCopyLink(n),e.props.onLogInteraction({action_type:"click",action_intent:"clipboard-copy"}),e.setState({clickedCopyLink:!0}),setTimeout((function(){return e.setState({clickedCopyLink:!1})}),2e3)}})),h()(I()(e),"handlePrivacyPolicyClick",(function(){e.props.onPrivacyPolicyClick(),e.props.onLogInteraction({action_type:"click",action_intent:"privacypolicy-show"})})),h()(I()(e),"handleTermsAndConditionsClick",(function(){e.props.onTermsAndConditionsClick(),e.props.onLogInteraction({action_type:"click",action_intent:"termsandconditions-show"})})),e}return _()(n,[{key:"render",value:function(){var e=this.props.visible,t=this.state.clickedCopyLink;return pt().createElement(sa,{visible:e},pt().createElement(la,{visible:e},pt().createElement(da,{visible:e},pt().createElement(ua,null,pt().createElement(ma,{onClick:this.handlePlayOnSpotifyClick,"aria-hidden":"true"},pt().createElement(ia,null)),pt().createElement(fa,null,pt().createElement(ha,{onClick:this.handlePlayOnSpotifyClick,dir:"auto"},A.get("play_on_spotify")))),pt().createElement(ua,null,pt().createElement(ma,{onClick:this.handleFollowSpotifyClick,"aria-hidden":"true"},pt().createElement(ta,null)),pt().createElement(fa,null,pt().createElement(ha,{onClick:this.handleFollowSpotifyClick,dir:"auto"},A.get("follow_on_spotify")))),pt().createElement(ua,null,pt().createElement(ma,{onClick:this.handleCopyLinkClick,"aria-hidden":"true"},pt().createElement(ea,null)),pt().createElement(Ea,null,pt().createElement(ya,{show:!t},pt().createElement(fa,null,pt().createElement(ha,{onClick:this.handleCopyLinkClick,dir:"auto"},A.get("spe.copy_link")))),pt().createElement(va,{show:t},pt().createElement(fa,null,A.get("embed_success_share_link")))))),pt().createElement(ca,{onClick:this.handleClose},pt().createElement(na,null)),pt().createElement(_a,null,pt().createElement(ha,{onClick:this.handlePrivacyPolicyClick,dir:"auto"},A.get("spe.privacy_policy")),pt().createElement(pa,null,"·"),pt().createElement(ha,{onClick:this.handleTermsAndConditionsClick,dir:"auto"},A.get("spe.terms_and_conditions")))))}}]),n}(pt().PureComponent);const Ra=Sa;var Aa=function(e){return"episode"===e.settings.entityContext?function(e){var t;return null===(t=e.data.entity.external_urls)||void 0===t?void 0:t.spotify}(e):function(e){var t;return"episode"===e.data.entity.type?null===(t=e.data.entity.show.external_urls)||void 0===t?void 0:t.spotify:void 0}(e)},Ta={onPlayOnSpotify:function(){return ao("embed_player_p")},onFollowOnSpotify:function(){return{type:no,productName:"embed_player_p"}},onCopyLink:function(e){return{type:io,url:e}},onPrivacyPolicyClick:function(){return{type:ro}},onTermsAndConditionsClick:function(){return{type:oo}},onLogInteraction:function(e){return tn(e)}};const ba=(0,Le.$j)((function(e){return{entityUrl:Aa(e),initialized:e.machineState.initialized,backgroundColor:e.data.backgroundColor,rtl:e.settings.rtl}}),Ta)(Ra);var La=(0,n(8896).zo)((function(e){var t,n=e.volume,i=void 0===n?1:n;return t=0===i?pt().createElement("path",{d:"M0,5v6h2.804L8,14V2L2.804,5H0z M7,3.732v8.536L3.072,10H1V6h2.072L7,3.732z M15.623,5.853l-0.707-0.707l-2.147,2.147 l-2.146-2.147L9.916,5.853L12.062,8l-2.146,2.146l0.707,0.707l2.146-2.147l2.147,2.147l0.707-0.707L13.477,8L15.623,5.853z"}):i<1/3?pt().createElement("path",{d:"M10.699,5.18l-0.657,0.77C10.548,6.486,10.863,7.205,10.863,8s-0.316,1.514-0.822,2.051l0.657,0.769 c0.72-0.723,1.165-1.72,1.165-2.82S11.418,5.903,10.699,5.18z M0,5v6h2.804L8,14V2L2.804,5H0z M7,3.732v8.536L3.072,10H1V6h2.072 L7,3.732z"}):i<2/3?pt().createElement("path",{d:"M0,5v6h2.804L8,14V2L2.804,5H0z M7,3.732v8.536L3.072,10H1V6h2.072L7,3.732z M11.863,8c0,1.403-0.585,2.668-1.519,3.577 l0.653,0.764C12.145,11.248,12.863,9.71,12.863,8c0-1.709-0.718-3.248-1.866-4.341l-0.653,0.764 C11.279,5.332,11.863,6.597,11.863,8z"}):pt().createElement("path",{d:"M12.945,1.379l-0.652,0.763c1.577,1.462,2.57,3.544,2.57,5.858s-0.994,4.396-2.57,5.858l0.651,0.763 c1.79-1.645,2.919-3.998,2.919-6.621S14.735,3.024,12.945,1.379z M10.673,4.039l-0.651,0.763C10.849,5.617,11.363,6.749,11.363,8 s-0.515,2.382-1.342,3.199l0.651,0.763c1.04-1,1.691-2.404,1.691-3.961S11.713,5.039,10.673,4.039z M0,5v6h2.804L8,14V2L2.804,5H0z M7,3.732v8.536L3.072,10H1V6h2.072L7,3.732z"}),pt().createElement("svg",{viewBox:"0 0 16 16"},pt().createElement("title",null,"Volume"),t)}),{width:"100%",height:"100%"});n(5822);var Ia=function(e){if(-1===e||Number.isNaN(e))return"";var t=function(e){var t=Math.floor(e/1e3),n=Math.floor(t/60),i=Math.floor(n/60),r=60*i,o=n-r;return{hours:i,minutes:o,seconds:t-60*r-60*o}}(e),n=t.hours,i=t.minutes,r=t.seconds,o=n>0?"".concat(n,":"):"",a=n>0&&i<10?"0".concat(i):i,s=r<10?"0".concat(r):r;return"".concat(o).concat(a,":").concat(s)};var Pa=(0,At.Z)("tr",{target:"e5msmpu6"})((function(e){var t=e.isCurrentTrack,n=e.isPlayable;return h()({color:t?ft.By7:ft.ixZ,lineHeight:lt,cursor:"pointer",verticalAlign:"top",userSelect:"none",opacity:n?1:.6},":hover",{backgroundColor:n?ft.vGl:"none"})}),""),Ca=(0,At.Z)("td",{target:"e5msmpu5"})((function(e){var t=e.isCurrentTrack;return{color:ft.ixZ,padding:"".concat(ft.dly," ").concat(ft.dly," ").concat(ft.dly," ").concat(ft.o78),fontFeatureSettings:'"tnum"',width:"1%",minWidth:dt,opacity:t?1:.6}}),""),Oa=(0,At.Z)("td",{target:"e5msmpu4"})((function(e){var t=e.isCurrentTrack;return{color:t?ft.By7:ft.ixZ,textAlign:"right",padding:"".concat(ft.hM$," ").concat(ft.o78," ").concat(ft.hM$," ").concat(ft.dly),fontFeatureSettings:'"tnum"',fontWeight:t?600:"unset",opacity:t?1:.6,width:"1%"}}),""),Da=(0,At.Z)("td",{target:"e5msmpu3"})({name:"10htt6c",styles:"position:relative;padding:6px 0"}),ka=(0,At.Z)("div",{target:"e5msmpu2"})((function(){return{position:"relative",height:lt,width:"100%"}}),""),wa=(0,At.Z)("div",{target:"e5msmpu1"})((function(e){var t=e.isCurrentTrack;return{position:"absolute",top:0,height:lt,width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:t?600:"unset"}}),""),Na=(0,At.Z)("div",{target:"e5msmpu0"})((function(){return{position:"absolute",width:dt,height:dt,paddingTop:"2px",fill:ft.By7}}),""),Ma=function(e){var t=e.index,n=e.number,i=e.title,r=e.duration,o=e.onTrackClick,a=e.isCurrentTrack,s=void 0!==a&&a,c=e.isPlayable;return pt().createElement(Pa,{isCurrentTrack:s,isPlayable:c,onClick:function(){return o(t)}},pt().createElement(Ca,{isCurrentTrack:s},s?pt().createElement(Na,null,pt().createElement(La,null)):n),pt().createElement(Da,null,pt().createElement(ka,null,pt().createElement(wa,{isCurrentTrack:s},pt().createElement("span",{dir:"auto"},i)))),pt().createElement(Oa,{isCurrentTrack:s},Ia(r)))};var Ua=(0,At.Z)("div",{target:"e5s3kxo1"})("position:absolute;top:",Qe,"px;overflow-y:scroll;bottom:0px;left:0px;right:0px;"),xa=(0,At.Z)("table",{target:"e5s3kxo0"})({name:"1d6d78c",styles:"position:relative;border-collapse:collapse;width:100%"}),Fa=function(e){return e.isPlayable},Ya={onTrackClick:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tn;return{type:fn,index:e,mediaType:t}}};const Ba=(0,Le.$j)((function(e){var t;return{playback:e.playback,backgroundColor:e.data.backgroundColor,trackList:(null===(t=e.data.entity)||void 0===t?void 0:t.tracks)||[]}}),Ya)((function(e){var t=e.trackList,n=void 0===t?[]:t,i=e.playback,r=e.onTrackClick;return pt().createElement(Ua,null,pt().createElement(xa,null,pt().createElement("tbody",null,n.map((function(e,t){var n;return pt().createElement(Ma,{index:t,number:t+1,title:e.title,duration:e.duration_ms||0,onTrackClick:r,isCurrentTrack:e.uri===(null==i||null===(n=i.item)||void 0===n?void 0:n.uri)||!1,isPlayable:Fa(e),key:"".concat(t,"-").concat(e.uri)})})))))}));var Ka="MOUNTED";var Ha={name:"w1atjl",styles:"width:100%;height:100%"};const Ga=function(){return(0,Ie.tZ)(Va,{"aria-label":A.get("spe.playback-control.skip-forward-15")},(0,Ie.tZ)("svg",{width:"21",height:"18"},(0,Ie.tZ)("title",null,A.get("spe.playback-control.skip-forward-15")),(0,Ie.tZ)("g",{fill:"none",fillRule:"evenodd"},(0,Ie.tZ)("path",{d:"M7.897 3.264h6.91v2.26l4.7-2.761L14.808 0v2.26h-6.91C3.543 2.26 0 5.752 0 10.043s3.543 7.783 7.897 7.783v-1.004c-3.81 0-6.91-3.041-6.91-6.779s3.1-6.779 6.91-6.779zm2.757 6.438c-.376.29-.855.445-1.437.462v.901h2.015v6.763h1.232V8.572H11.36c-.094.462-.33.838-.706 1.13zm10.125 3.903a2.788 2.788 0 0 0-.61-.966 2.65 2.65 0 0 0-.95-.614 3.412 3.412 0 0 0-1.237-.214c-.171 0-.347.015-.527.045a2.837 2.837 0 0 0-1.013.384 1.693 1.693 0 0 0-.398.34l.59-2.833h3.94V8.572h-4.8l-.988 4.739 1.142.43a2.19 2.19 0 0 1 .764-.632c.312-.162.66-.242 1.046-.242.29 0 .558.046.801.138a1.812 1.812 0 0 1 1.06 1.031c.102.248.153.533.153.856 0 .287-.049.552-.147.796a1.902 1.902 0 0 1-.41.633 1.782 1.782 0 0 1-.635.412 2.27 2.27 0 0 1-.821.143c-.3 0-.57-.05-.809-.15-.24-.1-.449-.234-.628-.404a1.928 1.928 0 0 1-.43-.607 2.337 2.337 0 0 1-.2-.744l-1.141.287a2.92 2.92 0 0 0 .969 1.927c.278.248.607.445.988.593.381.148.798.222 1.252.222a3.56 3.56 0 0 0 1.36-.248c.402-.166.744-.39 1.026-.673.283-.282.499-.613.649-.992A3.27 3.27 0 0 0 21 14.879a3.601 3.601 0 0 0-.221-1.274z",fill:"currentColor",fillRule:"evenodd"}),(0,Ie.tZ)("path",{d:"M0 0h21v18H0z"}))))};var Va=(0,Oe.ZP)("button").withConfig({displayName:"FastForward15___StyledButton",componentId:"sc-ymqmsq-0"})(["",""],Ha);var ja={name:"w1atjl",styles:"width:100%;height:100%"};const Wa=function(){return(0,Ie.tZ)(qa,{"aria-label":A.get("spe.playback-control.skip-backward-15")},(0,Ie.tZ)("svg",{width:"23",height:"18"},(0,Ie.tZ)("title",null,A.get("spe.playback-control.skip-backward-15")),(0,Ie.tZ)("g",{fill:"none",fillRule:"evenodd"},(0,Ie.tZ)("path",{d:"M1.463 9.542c-.383.295-.871.45-1.463.468v.91h2.051v6.829h1.255V8.402H2.182a1.867 1.867 0 0 1-.719 1.14zm9.69 2.967a2.71 2.71 0 0 0-.967-.62 3.5 3.5 0 0 0-1.796-.171 2.81 2.81 0 0 0-1.033.39c-.156.095-.291.21-.405.342l.601-2.86h4.012V8.402H6.677l-1.006 4.785 1.163.435a2.296 2.296 0 0 1 1.841-.883c.297 0 .569.046.816.138.249.092.464.227.648.401.183.177.326.39.43.64.105.25.158.539.158.864 0 .29-.05.558-.15.804-.1.247-.24.46-.418.64-.18.18-.394.318-.647.415a2.333 2.333 0 0 1-.836.144c-.304 0-.579-.05-.823-.151a2.089 2.089 0 0 1-.64-.409 1.94 1.94 0 0 1-.438-.612 2.327 2.327 0 0 1-.203-.752l-1.162.29a2.93 2.93 0 0 0 .987 1.944c.283.25.619.45 1.006.6.388.15.812.225 1.274.225.514 0 .976-.084 1.385-.25.41-.167.758-.394 1.046-.679.287-.286.507-.62.66-1.002.152-.382.229-.789.229-1.22 0-.474-.074-.903-.222-1.286a2.824 2.824 0 0 0-.622-.975zm3.806-10.227H7.923V0L3.136 2.789l4.787 2.79V3.295h7.036c3.88 0 7.036 3.07 7.036 6.845 0 3.774-3.156 6.845-7.036 6.845V18C19.393 18 23 14.474 23 10.14c0-4.332-3.607-7.858-8.04-7.858z",fill:"currentColor",fillRule:"evenodd"}),(0,Ie.tZ)("path",{d:"M0 0h23v18H0z"}))))};var qa=(0,Oe.ZP)("button").withConfig({displayName:"Rewind15___StyledButton",componentId:"sc-uqv1rz-0"})(["",""],ja),za=function(e){var t=e.style;return(0,Ie.tZ)("svg",{id:"d9d36573-8003-4c15-a7dc-89c12dde53c7",style:t,"data-name":"Icons",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},(0,Ie.tZ)("title",null,"Icon More"),(0,Ie.tZ)("path",{d:"M12,11.25a.75.75,0,1,0,.75.76A.74.74,0,0,0,12,11.25Z",fill:"currentColor",stroke:"currentColor",strokeMiterlimit:"10"}),(0,Ie.tZ)("path",{d:"M5.25,11.25A.75.75,0,1,0,6,12,.74.74,0,0,0,5.25,11.25Z",fill:"currentColor",stroke:"currentColor",strokeMiterlimit:"10"}),(0,Ie.tZ)("path",{d:"M18.75,11.25a.75.75,0,1,0,.75.76A.74.74,0,0,0,18.75,11.25Z",fill:"currentColor",stroke:"currentColor",strokeMiterlimit:"10"}))},Qa=function(e){return function(e){var t=e.settings.session;return!t.accessToken||t.isAnonymous}(e)&&"episode"!==e.data.entity.type};function Za(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function $a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Za(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Za(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xa=(0,At.Z)("div",{target:"e1yr0kqn9"})({name:"1blnrmq",styles:"display:flex;flex-direction:row;align-items:baseline"}),Ja=(0,At.Z)("div",{target:"e1yr0kqn8"})({name:"d0dim7",styles:"display:flex;flex-direction:row;flex:1;align-items:baseline"}),es=(0,At.Z)("div",{target:"e1yr0kqn7"})("flex:1;margin:4px 1rem;height:24px;align-self:flex-end;",et.small,"{margin:0;position:relative;top:10px;}"),ts=(0,At.Z)("div",{target:"e1yr0kqn6"})("width:",it,"px;height:",it,"px;transition:transform ",ct,"ms;position:relative;top:",ft.dly,";",et.medium,"{",tt.small,"{width:",rt,"px;height:",rt,"px;}}"),ns=(0,At.Z)("div",{target:"e1yr0kqn5"})("position:relative;margin:0 1rem 0 2rem;font-size:13px;cursor:pointer;",xe,";"),is=(0,At.Z)("div",{target:"e1yr0kqn4"})({name:"6dhm9o",styles:"visibility:hidden"}),rs=(0,At.Z)("div",{target:"e1yr0kqn3"})({name:"1aqt5k9",styles:"position:absolute;top:0;right:0;left:0"}),os=(0,At.Z)("div",{target:"e1yr0kqn2"})(et.small,"{display:none;}opacity:",(function(e){return(e.disabled?.5:1).toString()}),";"),as=(0,At.Z)("button",{target:"e1yr0kqn1"})({name:"o7nnmj",styles:"margin-right:16px"}),ss=(0,At.Z)("div",{target:"e1yr0kqn0"})({name:"1yatvrj",styles:"position:absolute;top:-30px;left:0;transform:translate(-50%, 0%);will-change:left;border-radius:8px;box-shadow:0 4px 12px 0 rgba(0 0 0 / 20%);background-color:#242424;padding:8px 12px;font-size:11px"});const cs=function(){var e,t,n,i,r,o,a=(0,Le.v9)((function(e){var t,n=Zo(e.data.entity).metadata;return{isPlayable:e.data.entity.is_playable,isEntityPreview:Qa(e),playback:e.playback,duration:(null===(t=e.playback)||void 0===t?void 0:t.duration)||Number(null==n?void 0:n.duration)}})),s=a.isEntityPreview,c=a.isPlayable,l=a.playback,d=a.duration,u=(0,_t.useState)({isDragging:!1,fakePosition:null,showRemainingTime:!0,currentTrackURI:null}),_=X()(u,2),p=_[0],h=_[1],f=(0,_t.useState)(),E=X()(f,2),m=E[0],g=E[1],y=(0,Le.I0)(),v=function(e){y(tn(e))},S=Zt((function(){h($a($a({},p),{},{fakePosition:null}))}),1e3),R=function(){var e=F()(H().mark((function e(t){var n,i,r;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.percentage,i=t.ended,r=t.id,h($a($a({},p),{},{isDragging:!0,fakePosition:n})),i&&(y(kn(n||0)),h($a($a({},p),{},{isDragging:!1,fakePosition:n})),v({action_type:"click",action_intent:"seek-click"}),S()),i||m===r||(g(r),v({action_type:"click",action_intent:"seek-drag"}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=p.showRemainingTime,b=p.isDragging,L=p.fakePosition,I=s?3e4:d;Number.isFinite(L)?i=L*I:null!=l&&l.positionAsOfTimestamp&&(i=null==l?void 0:l.positionAsOfTimestamp),null!=l&&l.hasContext||void 0!==(null==l?void 0:l.isPaused)?T?(o=A.get("spe.episode.time_remaining",{minutes_remaining:Math.ceil((I-(i||0))/6e4).toString()}),r=Yt((i||0)-I)):(o=A.get("spe.episode.played"),r=Yt(i)):(r=Yt(I),o=A.get("spe.episode.time_remaining",{minutes_remaining:Math.ceil(I/6e4).toString()}),r=Yt(I));var P=r.replace(/\d/g,"0").replace(/^\d/,"-0");return pt().createElement(Xa,null,pt().createElement(Ja,null,pt().createElement(Ja,{dir:"ltr"},pt().createElement(os,{disabled:!(null!=l&&null!==(e=l.restrictions)&&void 0!==e&&e.canSeek),onClick:function(){var e;null!=l&&null!==(e=l.restrictions)&&void 0!==e&&e.canSeek&&(y(Cn()),v({action_type:"click",action_intent:"skip-back-15"}))},tabIndex:0},pt().createElement(Wa,null)),pt().createElement(es,null,pt().createElement(Qt,{tooltip:ss,max:I,current:i,onDragging:R,isDragging:b,enabled:c})),pt().createElement(os,{disabled:!(null!=l&&null!==(t=l.restrictions)&&void 0!==t&&t.canSeek),onClick:function(){var e;null!=l&&null!==(e=l.restrictions)&&void 0!==e&&e.canSeek&&(y(On()),v({action_type:"click",action_intent:"skip-forward-15"}))},tabIndex:0},pt().createElement(Ga,null))),pt().createElement(ns,{onClick:function(){h($a($a({},p),{},{showRemainingTime:!p.showRemainingTime})),v({action_type:"click",action_intent:"change-time-format"})},"aria-label":o,dir:"ltr"},pt().createElement(is,null,P),pt().createElement(rs,null,r))),pt().createElement(as,{onClick:function(){y({type:eo}),v({action_type:"click",action_intent:"open-context-menu"})}},pt().createElement(za,{style:{verticalAlign:"middle"}})),pt().createElement(ts,{onClick:function(){null!=l&&l.isDisabled||(y(Ln()),v({action_type:"click",action_intent:!1===(null==l?void 0:l.isPaused)?"pause":"play",action_item_id:"now-playing-bar"}))}},pt().createElement(kt,{isPaused:null===(n=null==l?void 0:l.isPaused)||void 0===n||n,isLoading:(null==l?void 0:l.isBuffering)||!1,isDisabled:(null==l?void 0:l.isDisabled)||!1})))};var ls=(0,At.Z)("div",{target:"e13ujcdb3"})("position:absolute;left:0;right:0;top:0;bottom:0;background-color:",(function(e){return e.backgroundColor}),";z-index:0;transition:transform ",ct,"ms;"),ds=(0,At.Z)(Jo,{target:"e13ujcdb2"})("position:absolute;top:",nt,"px;right:",nt,"px;width:66px;overflow:hidden;transition:opacity ",100,"ms,visibility ",ct,"ms;transition-delay:",200,"ms;",et.medium,"{",tt.small,"{top:",8,"px;right:",8,"px;}}",et.small,"{width:21px;",tt.small,"{top:",8,"px;}}"),us=(0,At.Z)("div",{target:"e13ujcdb1"})("position:relative;height:",(function(e){return e.hasTracklist?$e:Qe}),"px;background-color:black;overflow:hidden;border-radius:1.5rem;min-width:",224,"px;-webkit-mask-image:-webkit-radial-gradient(white, black);",tt.small,"{height:",Ze,"px;}"),_s=(0,At.Z)("div",{target:"e13ujcdb0"})("position:absolute;height:",it,"px;left:",32+ot.largeH,"px;right:",nt,"px;bottom:",24,"px;",tt.small,"{left:",32+ot.mediumH,"px;}",et.medium,"{left:",nt,"px;bottom:",nt,"px;",tt.small,"{left:",8,"px;right:",8,"px;bottom:",8,"px;}}",et.small,"{right:",12,"px;",tt.small,"{bottom:",4,"px;}}");const ps=(0,Le.$j)()((function(e){var t=e.trackList,n=void 0!==t&&t,i=(0,Le.v9)((function(e){return{entity:e.data.entity,backgroundColor:e.data.backgroundColor,initialized:e.machineState.initialized,showOverflowMenu:e.machineState.showOverflowMenu}})),r=i.entity,o=i.backgroundColor,a=i.initialized,s=i.showOverflowMenu,c=(0,Le.I0)(),l=(0,_t.useCallback)((function(){return"ontouchstart"in document.documentElement?"touchstart":"mouseover"}),[]),d=(0,_t.useCallback)((function(){document.removeEventListener(l(),d),c(_o()),c(tn({action_type:"interacted",action_intent:l()}))}),[c,l]);(0,_t.useEffect)((function(){return c({type:Ka}),document.addEventListener(l(),d),function(){document.removeEventListener(l(),d)}}),[c,d,l]);return pt().createElement(us,{hasTracklist:!!n,"data-testid":"initialized-".concat(a)},pt().createElement(ls,{backgroundColor:o}),pt().createElement(us,null,pt().createElement(ls,{backgroundColor:o}),pt().createElement(Xo,null),pt().createElement(_s,null,pt().createElement(cs,null)),pt().createElement(ds,{ariaLabel:A.get("play_on_spotify"),onClick:function(){c({type:ii,productName:"embed_player_p"}),c(tn({action_type:"click",action_intent:"deeplink",action_item_id:"spotify-logo"}))}})),r.tracks&&pt().createElement(Ba,null),pt().createElement(ba,{onClose:function(){c({type:Jr})},visible:s}))}));(0,Oe.vJ)(["",""],He.styles);var hs=n(2734),fs=n(5870),Es=n(5442),ms=null;var gs=function(e){return function(){if(null===ms)throw new Error("Missing `instance`. Have you called `setEventSenderInstance` yet?");return ms}().send((0,Es.l)(e))},ys="PLAYER";function vs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ss(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vs(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rs={initialized:!1,showOverflowMenu:!1,loop:ys,isFullScreenMode:!1};const As=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rs,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case lo:return Ss(Ss({},e),{},{initialized:!0});case fo:return Ss(Ss({},e),{},{loop:ys});case eo:return Ss(Ss({},e),{},{showOverflowMenu:!0});case Jr:return Ss(Ss({},e),{},{showOverflowMenu:!1});case En:return window.innerHeight>Qe?Ss(Ss({},e),{},{loop:ys}):e;case Mn:return Ss(Ss({},e),{},{isFullScreenMode:!0});case Un:return Ss(Ss({},e),{},{isFullScreenMode:!1});default:return e}};var Ts=function(e){var t=new URL(e.href).searchParams.get("t");if(t){var n=parseInt(t,10);if(n>0)return n}return null};function bs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ls(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bs(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Is=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case En:return Ls(Ls({},e),t.state);case Ka:var n=Ts(window.location);return n?Ls(Ls({},e),{},{position:1e3*n}):e;case mn:return Ls(Ls({},e),{},{isDisabled:!0,error:Ls(Ls({},t.error),{},{message:t.error.message})});case An:return Ls(Ls({},e),{},{volume:t.volume});default:return e}};function Ps(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Cs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ps(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ps(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Os=function(e){return(0,hs.UY)({data:(t=e.data,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{entity:t.entity,backgroundColor:"",followState:"use deeplink"},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case ci:return Cs(Cs({},e),{},{followState:"is following"});case li:return Cs(Cs({},e),{},{followState:"can follow"});default:return e}}),settings:function(){return e.settings},machineState:As,playback:Is});var t};var Ds,ks,ws,Ns=n(2279),Ms=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ns.vp;d()(this,e),this._emitter=t,this._emitter=t||new Ns.vp}return _()(e,[{key:"addListener",value:function(e,t,n){return this._emitter.addListener(e,t,n),this}},{key:"removeListener",value:function(e,t,n){return this._emitter.removeListener(e,t,n),this}},{key:"onAddListener",value:function(e,t){return this._emitter.onAddListener(e,t),this}},{key:"onRemoveListener",value:function(e,t){return this._emitter.onRemoveListener(e,t),this}},{key:"emit",value:function(e,t){return this._emitter.emit(e,t)}},{key:"emitSync",value:function(e,t){return this._emitter.emitSync(e,t)}}]),e}();function Us(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=M()(e);if(t){var r=M()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return w()(this,n)}}!function(e){e.UPDATE="update",e.ERROR="error",e.VOLUME="volume",e.ACTION="action",e.QUEUE_ACTION="queue_action",e.QUEUE_ACTION_COMPLETE="queue_action_complete",e.QUEUE_UPDATE="queue_update",e.CONTEXT_WRAPAROUND="context_wraparound"}(Ds||(Ds={})),function(e){e.PLAY="play",e.PAUSE="pause",e.RESUME="resume",e.SKIP_TO_NEXT="skipToNext",e.SKIP_TO_PREVIOUS="skipToPrevious"}(ks||(ks={})),function(e){e.ADD="add",e.REMOVE="remove",e.CLEAR="clear",e.INSERT="insert",e.REORDER="reorder"}(ws||(ws={}));var xs=function(e){D()(n,e);var t=Us(n);function n(){return d()(this,n),t.apply(this,arguments)}return _()(n,[{key:"emitPlaySync",value:function(e,t,n){return this.emitSync(Ds.ACTION,{action:ks.PLAY,context:e,origin:t,options:n}).defaultPrevented}},{key:"emitPauseSync",value:function(){return this.emitSync(Ds.ACTION,{action:ks.PAUSE}).defaultPrevented}},{key:"emitResumeSync",value:function(){return this.emitSync(Ds.ACTION,{action:ks.RESUME}).defaultPrevented}},{key:"emitSkipToNextSync",value:function(){return this.emitSync(Ds.ACTION,{action:ks.SKIP_TO_NEXT}).defaultPrevented}},{key:"emitSkipToPreviousSync",value:function(){return this.emitSync(Ds.ACTION,{action:ks.SKIP_TO_PREVIOUS}).defaultPrevented}},{key:"emitQueueActionSync",value:function(e){return this.emitSync(Ds.QUEUE_ACTION,{action:e}).defaultPrevented}},{key:"emitQueueActionComplete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.emit(Ds.QUEUE_ACTION_COMPLETE,{action:e,error:t})}},{key:"emitQueueUpdate",value:function(e){this.emit(Ds.QUEUE_UPDATE,e)}}]),n}(Ms);function Fs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ys(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fs(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Bs={featureIdentifier:"embed",featureVersion:"3",referrerIdentifier:"other"},Ks=function(){var e=F()(H().mark((function e(t,n,i){var r,o;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.canPlayEncryptedContent();case 2:if(e.sent||null!==(r=t.metadata)&&void 0!==r&&r.externalResolvedUrl){e.next=5;break}return e.abrupt("return",Ys(Ys({},t),{},{metadata:Ys(Ys({},t.metadata),{},{externalResolvedUrl:null===(o=t.metadata)||void 0===o?void 0:o.audioPreviewUrl,previewApplied:"yes"})}));case 5:return e.abrupt("return",Ys(Ys({},t),{},{metadata:Ys(Ys({},t.metadata),{},{useAuthEndpoint:i?"yes":""})}));case 6:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),Hs=function(){return tn({page:window.location.pathname,action_intent:"play-preview-fallback",action_type:"warn",action_item_id:""})},Gs=function(e,t){return t.mediaType!==bn?e:Ys(Ys({},e),{},{metadata:Ys(Ys({},e.metadata),{},{mediaType:"video"})})};const Vs=function(e){return function(t){var n=t.getState(),i=Zo(n.data.entity);return e.getEvents().addListener(Ds.UPDATE,(function(e){t.dispatch(function(e){return{type:En,state:e}}(e.data))})),e.getEvents().addListener(Ds.ERROR,(function(e){var n;t.dispatch((n=e.data,{type:mn,error:n}))})),function(e){"undefined"!=typeof window&&(window.addEventListener("message",(function(t){"play"===t.data&&(e.dispatch(In()),e.dispatch(tn({page:window.location.pathname,action_intent:"play",action_type:"iframe-api"}))),"toggle"===t.data&&(e.dispatch(Ln()),e.dispatch(tn({page:window.location.pathname,action_intent:"toggle",action_type:"iframe-api"}))),"loadCompleteAck"===t.data&&e.dispatch(tn({page:window.location.pathname,action_intent:"load-episode",action_type:"iframe-api"}))})),window.parent&&window.parent.postMessage("player_ready","*"))}(t),function(n){return function(){var r=F()(H().mark((function r(o){var a,s,c,l,d,u,_,p,h,f,E,m,g,y,v,S,R;return H().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=t.getState(),s=a.playback,c=a.settings,l=c.session.isAnonymous,d=n(o),r.t0=o.type,r.next=r.t0===hn?6:r.t0===pn?21:r.t0===fn?27:"RESUME"===r.t0?33:r.t0===_n?35:r.t0===gn?37:r.t0===vn?39:r.t0===yn?41:r.t0===Sn?43:r.t0===Rn?46:49;break;case 6:if(!1!==(null==s?void 0:s.isPaused)){r.next=10;break}e.pause(),r.next=20;break;case 10:if(!0!==(null==s?void 0:s.isPaused)){r.next=14;break}e.resume(),r.next=20;break;case 14:return p=Ts(window.location),r.next=17,Ks(Gs(i,o),e,!l);case 17:h=r.sent,e.play(h,Bs,{seekTo:p?1e3*p:void 0}),(null===(u=h.metadata)||void 0===u?void 0:u.externalResolvedUrl)===(null===(_=i.metadata)||void 0===_?void 0:_.audioPreviewUrl)&&t.dispatch(Hs());case 20:return r.abrupt("break",50);case 21:return r.next=23,Ks(Gs(i,o),e,!l);case 23:return m=r.sent,e.play(m,Bs),(null===(f=m.metadata)||void 0===f?void 0:f.externalResolvedUrl)===(null===(E=i.metadata)||void 0===E?void 0:E.audioPreviewUrl)&&t.dispatch(Hs()),r.abrupt("break",50);case 27:return r.next=29,Ks(Gs(i,o),e,!l);case 29:return v=r.sent,e.play(v,Bs,{skipTo:{index:o.index}}),(null===(g=v.metadata)||void 0===g?void 0:g.externalResolvedUrl)===(null===(y=i.metadata)||void 0===y?void 0:y.audioPreviewUrl)&&t.dispatch(Hs()),r.abrupt("break",50);case 33:return e.resume(),r.abrupt("break",50);case 35:return e.pause(),r.abrupt("break",50);case 37:return o.time?e.seekTo(o.time):Number.isFinite(o.percentage)&&(R=(null==s?void 0:s.duration)||Number(null===(S=i.metadata)||void 0===S?void 0:S.duration),e.seekTo(o.percentage*R)),r.abrupt("break",50);case 39:return e.seekForward(15e3),r.abrupt("break",50);case 41:return e.seekBackward(15e3),r.abrupt("break",50);case 43:return e.setVolume(0),t.dispatch(Dn(0)),r.abrupt("break",50);case 46:return e.setVolume(100),t.dispatch(Dn(100)),r.abrupt("break",50);case 49:return r.abrupt("break",50);case 50:return r.abrupt("return",d);case 51:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}}};function js(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ws(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?js(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):js(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const qs=function(e){return function(t){var n=t.getState().settings,i=n.clientId,r=n.session.isAnonymous,o=void 0!==r&&r;return e({clientId:i,isAnonymous:o}),function(e){return function(n){var i=t.getState(),r=i.data,a=i.settings,s=cr().from(r.entity.embeded_entity_uri),c=window.location.search.includes("v=1"),l={device_type:a.isMobile||a.isTablet?"mobile":"desktop",view_uri:null==s?void 0:s.toURI(),entity_type:null==s?void 0:s.type,embed_is_video:c,page_url:window.location.href,referrer:document.referrer,viewport_width:window.innerWidth,viewport_height:window.innerHeight,is_authenticated:!o};switch(n.type){case uo:gs(Ws(Ws({},l),{},{action_type:"pageview",action_intent:null,action_item_id:null}));break;case en:gs(Ws(Ws({},l),{},{action_type:n.interactionData.action_type,action_intent:n.interactionData.action_intent,action_item_id:n.interactionData.action_item_id}))}return e(n)}}}},zs=JSON.parse('{"Ls":"https://api.spotify.com","XA":"https://spclient.wg.spotify.com","xM":"https://accounts.spotify.com","l3":"https://api-partner.spotify.com"}');var Qs=zs.Ls,Zs=zs.XA,$s=zs.l3,Xs=(zs.xM,"".concat(Qs,"/v1")),Js=("".concat(Zs,"/melody/v1"),"".concat(Zs,"/radio-apollo/v3"),"".concat(Zs,"/recently-played/v3"),"".concat(Zs,"/collection-view/v1"),"".concat(Zs,"/sponsoredplaylist/v1"),"".concat(Zs,"/social-connect/v2"),"".concat(Zs,"/playlist/v2"),"".concat(Zs,"/inspiredby-mix/v2"),"".concat(Zs,"/ads"),"".concat($s,"/pathfinder/v1"),"".concat(Zs,"/autoplay-enabled"),"".concat(Zs,"/age-verification/v1"),"".concat(Zs,"/concerts"),"".concat(Zs,"/presence-view"),"".concat(Zs,"/presence2"),"".concat(Zs,"/find-friends"),"".concat(Zs,"/track-credits-view"),"".concat(Zs,"/color-lyrics/v2"),"".concat(Zs,"/metadata/4"),"".concat(Zs,"/user-profile-view/v3"),"".concat(Zs,"/consumer-wrapped/v1"),"".concat(Zs,"/consumer-only-you/v1"),"".concat(Zs,"/stories-view/v1"),"".concat(Zs,"/soundfinder/v1"));"".concat(Zs,"/"),"".concat(Zs,"/socialgraph/v2"),"".concat(Zs,"/vanilla/v1/views/hub2"),"".concat(Zs,"/ondemand-selector/v2"),"".concat(Zs,"/allboarding"),"".concat(Zs,"/enhanced-view/v0"),"".concat(Zs,"/playlist-permission/v1");function ec(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var tc={ARTIST:"artist",ALBUM:"album",PLAYLIST:"playlist",TRACK:"track",USER:"user"},nc=function(e){var t=/^spotify:(.*)$/.exec(e);if(!t)return{type:null,id:null};for(var n,i,r=t[1],o=/([^:]+):([^:]+)/g,a=[],s=[];n=o.exec(r);){var c=n[1],l=n[2];c===tc.USER&&(i=void 0,i=l.replace(/\+/g,"%20"),l=decodeURIComponent(i)),a.push(c),s.push(l)}if(0===a.length)return{type:null,id:null};var d=a.reduce((function(e,t,n){return e[a[n]]=s[n],e}),{});return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ec(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ec(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:a[a.length-1],id:s[s.length-1]},d)};n(1572),n(9876),n(3712),n(2979),n(6160),n(1849),n(5540),n(896),n(936),n(40),n(5923),n(5246),n(7635),n(8774),n(8373),n(9706),n(6964),n(4630),n(5389),n(1244),n(9981),n(3807),n(2627),n(4950),n(1964);function ic(e){if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new Uint8Array(e.length),n=0;n<e.length;n+=1)t[n]=e.charCodeAt(n);return t}n(5610),n(2228);var rc=function(){var e=F()(H().mark((function e(t){var n,i,r;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ic(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return i=e.sent,r=Array.from(new Uint8Array(i)),e.abrupt("return",r.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oc=function e(){d()(this,e)};h()(oc,"encode",ic),h()(oc,"hash",rc);var ac=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){if(e&&e(n),t)return Promise.reject(n)}};var sc=function(e,t){(function(e,t){var n=nc(t);return e.build().withMethod("PUT").withHost(Xs).withPath("/me/shows").withQueryParameters({ids:n.id}).withEndpointIdentifier("/me/shows/?ids={showId}").withoutMarket().send()})(be.getInstance(),t).then((function(){e.dispatch({type:ci})}),ac((function(){return e.dispatch({type:"FOLLOW_SHOW_FAILURE"})})))},cc=function(e,t){(function(e,t){var n=nc(t);return e.build().withMethod("DELETE").withHost(Xs).withPath("/me/shows").withQueryParameters({ids:n.id}).withEndpointIdentifier("/me/shows/?ids={showId}").withoutMarket().send()})(be.getInstance(),t).then((function(){e.dispatch({type:li})}),ac((function(){return e.dispatch({type:"REMOVE_SHOW_FAILURE"})})))};const lc=function(e){return function(t){return function(n){var i=e.getState(),r=i.data;if(n.type===ri)if("use deeplink"!==r.followState){var o=r.entity.show.uri;ho(i)?cc(e,o):sc(e,o)}return t(n)}}};var dc=function(){return"undefined"==typeof window||void 0===window.gtag||void 0===window.google_tag_manager};const uc=function(){return function(e){return function(t){if(t.type===en)!function(e,t,n){dc()||window.gtag("event",t,{event_category:e,event_label:n})}(t.interactionData.action_type,t.interactionData.action_intent,t.interactionData.item_id);return e(t)}}};function _c(){var e;if(void 0!==window.orientation)switch(window.orientation){case 0:case 180:e=window.screen.width;break;default:e=window.screen.height}else{var t=window.screen.orientation&&window.screen.orientation.type||window.screen.msOrientation||"";if(0===t.indexOf("portrait"))e=window.screen.width;else{if(0!==t.indexOf("landscape"))return!1;e=window.screen.height}}return e<=432}function pc(e,t){try{var n=document.getElementById(e);return n?JSON.parse(n.innerHTML):t}catch(i){return t}}var hc=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return n&&e.searchParams.set("t",n.toString()),t&&(e.searchParams.has("utm_source")||e.searchParams.set("utm_source",t)),e.searchParams.has("utm_medium")||e.searchParams.set("utm_medium",_c()?"mobile":"desktop"),i&&e.searchParams.set("dl_branch","1"),e};function fc(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new URL("undefined"!=typeof location&&location.href?location.href:"https://open.spotify.com"),i=null;e?(i=new URL(e.toOpenURL()),t&&n.searchParams.forEach((function(e,t){i.searchParams.set(t,e)}))):(i=n,t||(i.search="")),i.searchParams.delete("nd"),i.searchParams.delete("fallback"),i.searchParams.set("go","1");var r=pc("config",{});return null!=r&&r.correlationId&&i.searchParams.append("sp_cid",null==r?void 0:r.correlationId),i}function Ec(e,t){var n=fc(e,t);return n.searchParams.set("fallback","getapp"),n}const mc=function(e){return function(t){return function(n){var i,r,o=t(n),a=e.getState(),s=a.data.followState,c=a.playback,l=a.settings,d=l.entityContext,u=l.isMobile;if(n.type===ri&&"use deeplink"!==s)return o;var _=Math.floor((null!==(i=ei(c))&&void 0!==i?i:0)/1e3),p=cr().from(function(e){return"episode"===e.data.entity.type?e.data.entity.show.uri:void 0}(a)),f=cr().from(function(e){return e.data.entity.uri}(a)),E="productName"in n?n.productName:void 0,m={show:{deepLink:hc(fc(p,!1),E,void 0,!0).toString(),storeLink:hc(Ec(p,!1),E,void 0,!0).toString()},episode:{deepLink:hc(fc(f,!1),E,_,!0).toString(),storeLink:hc(Ec(f,!1),E,_,!0).toString()}},g="show"===d?m.show:m.episode,y=(r={},h()(r,ii,g.deepLink),h()(r,si,m.show.deepLink),h()(r,ri,m.show.deepLink),h()(r,ai,m.episode.deepLink),h()(r,oi,g.storeLink),h()(r,to,g.deepLink),h()(r,no,m.show.deepLink),r)[n.type];return y&&function(e){var t=e.url,n=e.newWindow,i=void 0===n||n;window.open(t,i?"_blank":"_top")}({url:y,newWindow:!u}),o}}};const gc=function(){return function(e){return function(t){var n,i,r=e(t);switch(t.type){case io:n=t.url,(i=document.createElement("input")).value=n,i.style.position="absolute",i.style.left="-9999px",document.body.appendChild(i),i.select(),i.setSelectionRange(0,i.value.length),document.execCommand("copy"),document.body.removeChild(i);break;case ro:window.open("https://www.spotify.com/legal/privacy-policy/","_blank");break;case oo:window.open("https://www.spotify.com/legal","_blank")}return r}}};var yc,vc,Sc,Rc,Ac=n(7033),Tc=n(5458),bc=n(6439);!function(e){e.CONTEXT_DESCRIPTION="context_description",e.FILTERING_PREDICATE="filtering.predicate",e.SORTING_CRITERIA="sorting.criteria",e.LIST_UTIL_FILTER="list_util_filter",e.LIST_UTIL_SORT="list_util_sort"}(yc||(yc={})),function(e){e.AD="ad",e.ALBUM="album",e.ARTIST="artist",e.EPISODE="episode",e.PLAYLIST="playlist",e.PLAYLISTV2="playlist-v2",e.SHOW="show",e.TRACK="track",e.UNKNOWN="unknown",e.USER="user",e.LOCAL="local"}(vc||(vc={})),function(e){e[e.NOT_ACTIVE=0]="NOT_ACTIVE",e[e.PLAYING=1]="PLAYING",e[e.PAUSED=2]="PAUSED"}(Sc||(Sc={})),function(e){e[e.REPEAT_NONE=0]="REPEAT_NONE",e[e.REPEAT_CONTEXT=1]="REPEAT_CONTEXT",e[e.REPEAT_TRACK=2]="REPEAT_TRACK"}(Rc||(Rc={}));var Lc,Ic,Pc,Cc=["not_playing_locally","not_playing_context","not_playing_track","no_prev_track","no_next_track","no_specific_track","already_paused","not_paused","context_player_disallow","mft_disallow","ad_disallow","protocol_limitations","unknown","already_playing","throttled","endless_context","autoplay"];function Oc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Dc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oc(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kc(e){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){var t=e.url,n=e.height,i=e.width;return Boolean(t)&&Boolean(n)&&Boolean(i)})).map((function(e){var t=e.url,n=e.width,i=e.height;return{url:t,height:parseInt(null!=i?i:"0",10),width:parseInt(null!=n?n:"0",10)}}))}({url:e.image_url,height:e.image_height,width:e.image_width},{url:e.image_url_small,height:e.image_height_small,width:e.image_width_small},{url:e.image_url_large,height:e.image_height_large,width:e.image_width_large},{url:e.image_url_xlarge,height:e.image_height_xlarge,width:e.image_width_xlarge})}function wc(e,t){return null===e?null:cr().isTrack(e.uri)||cr().isLocalTrack(e.uri)?function(e,t){var n,i,r,o,a,s=e.metadata;return{type:vc.TRACK,uri:e.uri,uid:null,name:null!==(n=s.title)&&void 0!==n?n:"",mediaType:e.mediaType,duration:{milliseconds:t},album:{type:vc.ALBUM,uri:null!==(i=s.album_uri)&&void 0!==i?i:"",name:null!==(r=s.album_title)&&void 0!==r?r:"",images:kc(s)},artists:[{type:vc.ARTIST,uri:null!==(o=s.artist_uri)&&void 0!==o?o:"",name:null!==(a=s.artist_name)&&void 0!==a?a:""}],isLocal:cr().isLocalTrack(e.uri),isExplicit:!1,is19PlusOnly:!1,provider:null,get images(){return this.album.images}}}(e,t):cr().isEpisode(e.uri)?function(e,t){var n,i,r,o=e.metadata;return{type:vc.EPISODE,uri:e.uri,uid:null,name:null!==(n=o.title)&&void 0!==n?n:"",mediaType:e.mediaType,duration:{milliseconds:t},show:{type:vc.SHOW,uri:null!==(i=o.album_uri)&&void 0!==i?i:"",name:null!==(r=o.album_title)&&void 0!==r?r:"",images:kc(o)},provider:null,get images(){return this.show.images}}}(e,t):cr().isAd(e.uri)?function(e,t){var n,i,r,o,a=e.metadata;return{type:vc.AD,uri:e.uri,uid:null,title:null!==(n=a.title)&&void 0!==n?n:null,advertiser:null!==(i=a.artist_name)&&void 0!==i?i:null,url:null!==(r=a.artist_uri)&&void 0!==r?r:null,id:null!==(o=a.ad_id)&&void 0!==o?o:null,mediaType:e.mediaType,duration:{milliseconds:t},images:[],isPodcastAd:!1,isSkippableAd:!1,isTestAd:!1,provider:null}}(e,t):{type:vc.UNKNOWN,uri:e.uri,uid:null,metadata:e.metadata||null,provider:null,images:null}}function Nc(e){switch(e){case bc.zq.CONTEXT:return Rc.REPEAT_CONTEXT;case bc.zq.TRACK:return Rc.REPEAT_TRACK;case bc.zq.NONE:default:return Rc.REPEAT_NONE}}function Mc(e){var t=e.playbackState;return{canPause:!!t.playing,canResume:!t.playing,canSeek:!0,canSkipPrevious:!1,canSkipNext:!1,canToggleRepeatContext:!1,canToggleRepeatTrack:!1,canToggleShuffle:!1,disallowPausingReasons:t.playing?[]:["already_paused"],disallowResumingReasons:t.playing?["already_playing"]:[],disallowSeekingReasons:[],disallowSkippingPreviousReasons:["unknown"],disallowSkippingNextReasons:["unknown"],disallowTogglingRepeatContextReasons:["unknown"],disallowTogglingRepeatTrackReasons:["unknown"],disallowTogglingShuffleReasons:["unknown"]}}function Uc(e){var t=e.hasContext||e.isPaused||e.isBuffering;return{canSeek:null!=t&&t,disallowSeekingReasons:t?[]:["not_playing_track"]}}function xc(e){if(null===e)return null;var t=e.playbackState,n=e.track,i=null==n?void 0:n.metadata,r=function(e){var t=e.track,n=null==t?void 0:t.metadata;return(null==n?void 0:n.contextURI)||(null==t?void 0:t.uri)||null}(e);return r?{timestamp:Date.now(),context:{uri:null!=r?r:"",metadata:i},index:{pageURI:null,pageIndex:null,itemIndex:null},item:n?wc(n,t.duration):null,shuffle:!1,repeat:Nc(bc.zq.NONE),speed:1,playbackQuality:{bitrateLevel:Lc.UNKNOWN},playbackId:null,positionAsOfTimestamp:t.position,duration:t.duration,restrictions:Dc(Dc({},Mc(e)),Uc({hasContext:!!n&&!!r,isPaused:!t.playing,isBuffering:!1})),hasContext:!!n&&!!r,isPaused:!t.playing,previousItems:[],nextItems:[]}:null}function Fc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Yc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fc(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.LOW=1]="LOW",e[e.NORMAL=2]="NORMAL",e[e.HIGH=3]="HIGH",e[e.VERY_HIGH=4]="VERY_HIGH",e[e.HIFI=5]="HIFI"}(Lc||(Lc={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.BEST_MATCHING=1]="BEST_MATCHING",e[e.BACKEND_ADVISED=2]="BACKEND_ADVISED",e[e.OFFLINED_FILE=3]="OFFLINED_FILE",e[e.CACHED_FILE=4]="CACHED_FILE",e[e.LOCAL_FILE=5]="LOCAL_FILE"}(Ic||(Ic={})),function(e){e[e.NONE=0]="NONE",e[e.OFF=1]="OFF",e[e.ON=2]="ON"}(Pc||(Pc={}));function Bc(e){var t,n,i=new xs,r={timestamp:0,context:{uri:""},index:{pageURI:null,pageIndex:null,itemIndex:null},item:null,shuffle:!1,repeat:Rc.REPEAT_NONE,speed:1,playbackQuality:{bitrateLevel:Lc.UNKNOWN},playbackId:null,positionAsOfTimestamp:0,duration:0,restrictions:{canPause:!1,canResume:!1,canSeek:!1,canSkipNext:!1,canSkipPrevious:!1,canToggleRepeatContext:!1,canToggleRepeatTrack:!1,canToggleShuffle:!1,disallowPausingReasons:["not_playing_track"],disallowResumingReasons:["not_playing_track"],disallowSeekingReasons:["not_playing_track"],disallowSkippingPreviousReasons:["not_playing_context"],disallowSkippingNextReasons:["not_playing_context"],disallowTogglingRepeatContextReasons:["not_playing_context"],disallowTogglingRepeatTrackReasons:["not_playing_context"],disallowTogglingShuffleReasons:["not_playing_context"]},hasContext:!1,isPaused:!1,isBuffering:!1,previousItems:[],nextItems:[]};function o(e){var t;t=e,r=Yc(Yc(Yc({},r),t),{},{context:Yc(Yc({},r.context),null==t?void 0:t.context)}),i.emit(Ds.UPDATE,r)}function a(){return s.apply(this,arguments)}function s(){return(s=F()(H().mark((function t(){return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getCurrentState();case 2:o(xc(t.sent));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function c(e){return l.apply(this,arguments)}function l(){return(l=F()(H().mark((function e(i){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=6;break}if(!t){e.next=3;break}return e.abrupt("return");case 3:t=setTimeout((function(){t=null,o({isBuffering:i})}),200),e.next=7;break;case 6:t?(clearTimeout(t),t=null,o({isBuffering:i})):n||(n=setTimeout((function(){n=null,o({isBuffering:i})}),400));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return d=F()(H().mark((function t(){var n,i,r,a;return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getCurrentState();case 2:n=t.sent,i=xc(n),r=i?Yc(Yc({},i),{},{isBuffering:!1,hasContext:!1,isPaused:!1}):{position:0,isBuffering:!1,hasContext:!1,isPaused:!1,restrictions:Mc(n)},a=Uc(r),o(Yc(Yc({},r),{},{restrictions:Yc(Yc({},r.restrictions),a)}));case 7:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}return e.on(bc.oQ.ERROR,(function(e){var t=e.data.error;t.unrecoverable?i.emit(Ds.ERROR,new zr(Ar.PLAYBACK_ERROR,[],t)):i.emit(Ds.ERROR,new qr(Ar.PLAYBACK_ERROR,[],t))})),e.on(bc.oQ.VOLUME_CHANGED,(function(e){i.emit(Ds.VOLUME,{volume:e.data.volume,isLocal:!0})})),e.on(bc.oQ.PAUSED,a),e.on(bc.oQ.PROGRESS,F()(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Date.now()-r.timestamp>=1e3&&a(),(r.isBuffering||t)&&c(!1);case 2:case"end":return e.stop()}}),e)})))),e.on(bc.oQ.TRACK_LOADED,a),e.on(bc.oQ.TRACK_ENDED,(function(){return d.apply(this,arguments)})),e.on(bc.oQ.BUFFERING_START,F()(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(!0);case 2:case"end":return e.stop()}}),e)})))),e.on(bc.oQ.BUFFERING_END,F()(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(!1);case 2:case"end":return e.stop()}}),e)})))),e.on(bc.oQ.BEFORE_TRACK_LOAD,F()(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(!0);case 2:case"end":return e.stop()}}),e)})))),e.on(bc.oQ.POSITION_CHANGED,F()(H().mark((function t(){return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getCurrentState();case 2:if(!t.sent.playbackState.playing){t.next=6;break}return t.next=6,c(!0);case 6:case"end":return t.stop()}}),t)})))),i}function Kc(e,t,n){return Math.min(Math.max(e,t),n)}var Hc=function(){var e=F()(H().mark((function e(t,n,i){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.build().withMethod("GET").withHost(Js).withPath("/unauth/episode/".concat(n,"/").concat(i)).withEndpointIdentifier("/unauth/episode/{episodeId}/{keysystem}").send();case 2:return e.abrupt("return",e.sent.body);case 3:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}();function Gc(e,t,n){return Vc.apply(this,arguments)}function Vc(){return(Vc=F()(H().mark((function e(t,n,i){var r,o,a,s,c,l,d,u,_,p,h,f;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="video"===i,a=t.uri.replace("spotify:episode:",""),e.next=4,Hc(be.getInstance(),a,n);case 4:return s=e.sent,c="NONE"!==s.passthrough,l=s.format.replace(/_(128|256)/,""),d=o?"MANIFEST_ID":l,u=c?s.passthroughUrl:s.url[0],_=c?"":s.fileId,p=null===(r=s.video)||void 0===r?void 0:r[0].manifestId,h=o?void 0:u,f=o?p:_,e.abrupt("return",{format:d,mediaType:null!=i?i:"audio",noManifest:c,resolvedURL:h,fileId:f});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Wc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jc(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qc=.0625,zc="https://spclient.wg.spotify.com",Qc={"com.apple.fps.1_0":"fairplay","com.widevine.alpha":"widevine","com.microsoft.playready":"playready"},Zc=function(e){var t,n;return null!==(t=e.pages)&&void 0!==t&&t.length&&null!==(n=e.pages[0].items)&&void 0!==n&&n.length?e.pages[0].items[0]:e},$c=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"audio";return t?"@webgate/".concat(Qc[e],"-license/v1/").concat(n,"/license"):"".concat(zc,"/").concat(Qc[e],"-license/v1/unauth/").concat(n,"/license")};function Xc(e,t){var n,i;if(!t)throw n=Boolean(null===(i=document.featurePolicy)||void 0===i?void 0:i.allowsFeature("encrypted-media"))?new Error("No valid encryption keysystem found in your browser. We either don't support your browser keysystem or the browser you're using is too old and doesn't have this feature; consider upgrading it or manually enable the DRM system."):new Error("The allow='encrypted-media' attribute on the Spotify widget is missing, the owner of the website should fix this. See https://developer.spotify.com/documentation/widgets/generate/embed"),e.emitSync(Ds.ERROR,new zr(Ar.PLAYBACK_ERROR,[],n)),n}var Jc=function(){var e=F()(H().mark((function e(t,n,i,r,o){var a,s,c,l,d,u,_,p,h;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Wc(Wc({},n.metadata),{},{contextURI:n!==t?t.uri:null}),null===(a=n.metadata)||void 0===a||!a.externalResolvedUrl){e.next=3;break}return e.abrupt("return",(0,bc.SK)({uri:n.uri,resolvedURL:null===(l=n.metadata)||void 0===l?void 0:l.externalResolvedUrl,fileId:"",metadata:c,logData:o}));case 3:if("episode"!==(null===(s=cr().from(n.uri))||void 0===s?void 0:s.type)){e.next=12;break}return Xc(i,r),d=c.mediaType,u="yes"===c.useAuthEndpoint,_=$c(r,u,d),e.next=10,Gc(n,r,d);case 10:return p=e.sent,e.abrupt("return",(0,bc.SK)(Wc({uri:n.uri,licenseEndpoint:_,metadata:c,logData:o,fileId:""},p)));case 12:throw h=new Error("No valid solution has been found to play this item (".concat(null==n?void 0:n.uri,")")),i.emitSync(Ds.ERROR,new zr(Ar.ONE_TRACK_UNPLAYABLE,[],h)),h;case 15:case"end":return e.stop()}}),e)})));return function(t,n,i,r,o){return e.apply(this,arguments)}}();var el;n(7816),n(8410);!function(e){e.CAPPING_USER_IS_CAPPED="CAPPING_USER_IS_CAPPED",e.EME_API_NOT_SUPPORTED="EME_API_NOT_SUPPORTED",e.EME_MEDIA_KEYS_NOT_SUPPORTED="EME_MEDIA_KEYS_NOT_SUPPORTED",e.EME_MEDIA_KEY_SESSION_NOT_SUPPORTED="EME_MEDIA_KEY_SESSION_NOT_SUPPORTED",e.EME_NO_SUPPORTED_KEYSYSTEM="EME_NO_SUPPORTED_KEYSYSTEM",e.EME_PLAYER_MEDIA_KEYS_SETTING_FAILED="EME_PLAYER_MEDIA_KEYS_SETTING_FAILED",e.EME_ERROR_UNKNOWN="EME_ERROR_UNKNOWN",e.EME_LICENSE_REQUEST_EMPTY_RESPONSE="EME_LICENSE_REQUEST_EMPTY_RESPONSE",e.EME_LICENSE_REQUEST_FAILED_WITH_STATUS="EME_LICENSE_REQUEST_FAILED_WITH_STATUS",e.EME_LICENSE_REQUEST_WIDEVINE_ERROR="EME_LICENSE_REQUEST_WIDEVINE_ERROR",e.EME_LICENSE_UPDATE_FAILED="EME_LICENSE_UPDATE_FAILED",e.EME_HEADER_KEY_VALUE_MISMATCH="EME_HEADER_KEY_VALUE_MISMATCH",e.EME_HEADER_MISSING_CHALLENGE="EME_HEADER_MISSING_CHALLENGE",e.EME_INIT_DATA_MALFORMED="EME_INIT_DATA_MALFORMED",e.EME_CANNOT_SET_CERTIFICATE_FOR_PLATFORM="EME_CANNOT_SET_CERTIFICATE_FOR_PLATFORM",e.EME_MEDIA_KEY_SESSION_V0_1B_ERROR="EME_MEDIA_KEY_SESSION_V0_1B_ERROR",e.EME_MEDIA_KEY_SESSION_SAFARI_ERROR="EME_MEDIA_KEY_SESSION_SAFARI_ERROR",e.EME_NO_SUPPORTED_CONFIGURATION="EME_NO_SUPPORTED_CONFIGURATION",e.EME_NOT_SUPPORTED_ERROR="EME_NOT_SUPPORTED_ERROR",e.EME_INVALID_STATE_ERROR="EME_INVALID_STATE_ERROR",e.EME_UNKNOWN_ERROR="EME_UNKNOWN_ERROR",e.DISALLOW_PROTECTED_TRACK_ERROR="DISALLOW_PROTECTED_TRACK_ERROR",e.FILE_FORMAT_NOT_SUPPORTED="FILE_FORMAT_NOT_SUPPORTED",e.FILE_MALFORMED_SEEKTABLE="FILE_MALFORMED_SEEKTABLE",e.FILE_MALFORMED_PSSH="FILE_MALFORMED_PSSH",e.FILE_NOT_RESOLVED="FILE_NOT_RESOLVED",e.FRAGMENT_ONLINE_REQUEST_FAILED_WITH_ZERO="FRAGMENT_ONLINE_REQUEST_FAILED_WITH_ZERO",e.FRAGMENT_OFFLINE_REQUEST_FAILED_WITH_ZERO="FRAGMENT_OFFLINE_REQUEST_FAILED_WITH_ZERO",e.FRAGMENT_REQUEST_FAILED_WITH_ZERO="FRAGMENT_REQUEST_FAILED_WITH_ZERO",e.FRAGMENT_REQUEST_FAILED_WITH_STATUS="FRAGMENT_REQUEST_FAILED_WITH_STATUS",e.FRAGMENT_REQUEST_EMPTY_RESPONSE="FRAGMENT_REQUEST_EMPTY_RESPONSE",e.FRAGMENT_REQUEST_UNEXPECTED_LENGTH="FRAGMENT_REQUEST_UNEXPECTED_LENGTH",e.PLAYER_ATTEMPTED_VOLUME_OUT_OF_RANGE="PLAYER_ATTEMPTED_VOLUME_OUT_OF_RANGE",e.PLAYER_BUFFER_QUOTA_EXCEEDED="PLAYER_BUFFER_QUOTA_EXCEEDED",e.PLAYER_CANNOT_FIND_PLAYABLE_URI="PLAYER_CANNOT_FIND_PLAYABLE_URI",e.PLAYER_INVALID_INTERNAL_STATE="PLAYER_INVALID_INTERNAL_STATE",e.PLAYER_MEDIA_ERROR="PLAYER_MEDIA_ERROR",e.PLAYER_PLAYBACK_ERROR="PLAYER_PLAYBACK_ERROR",e.MEDIA_ABORTED="MEDIA_ABORTED",e.MEDIA_DECODING_ERROR="MEDIA_DECODING_ERROR",e.MEDIA_NETWORK_ERROR="MEDIA_NETWORK_ERROR",e.MEDIA_NOT_SUPPORTED="MEDIA_NOT_SUPPORTED",e.LICENSE_RESOLVE_INVALID_RESPONSE="LICENSE_RESOLVE_INVALID_RESPONSE",e.LICENSE_RESOLVER_CANT_RESOLVE_URL="LICENSE_RESOLVER_CANT_RESOLVE_URL",e.LICENSE_RESOLVER_DEPRECATED_VERSION="LICENSE_RESOLVER_DEPRECATED_VERSION",e.LIST_PLAYER_NO_TRACK_PLAYER="LIST_PLAYER_NO_TRACK_PLAYER",e.LIST_PLAYER_NO_LIST="LIST_PLAYER_NO_LIST",e.LIST_PLAYER_INVALID_ARGUMENT="LIST_PLAYER_INVALID_ARGUMENT",e.LIST_PLAYER_FORBIDDEN="LIST_PLAYER_FORBIDDEN",e.STORAGE_ERROR="STORAGE_ERROR",e.STORAGE_FAILED_WITH_STATUS="STORAGE_FAILED_WITH_STATUS",e.STORAGE_RETURNED_NO_TRACKS="STORAGE_RETURNED_NO_TRACKS",e.STORAGE_TRACK_MANIFEST_FAILED="STORAGE_TRACK_MANIFEST_FAILED",e.STORAGE_TRACK_MANIFEST_EMPTY="STORAGE_TRACK_MANIFEST_EMPTY",e.STORAGE_VIDEO_MANIFEST_FAILED="STORAGE_VIDEO_MANIFEST_FAILED",e.TRACK_DATA_ALREADY_FINALIZED="TRACK_DATA_ALREADY_FINALIZED",e.TSV_SENDING_FAILED="TSV_SENDING_FAILED",e.PLAYBACK_STATS_SENDING_FAILED="PLAYBACK_STATS_SENDING_FAILED",e.PLAYBACK_START_SENDING_FAILED="PLAYBACK_START_SENDING_FAILED",e.UNKNOWN="UNKNOWN"}(el||(el={}));var tl,nl=n(6171);!function(e){e.USER_INFO_REQUEST_EMPTY_RESPONSE="USER_INFO_REQUEST_EMPTY_RESPONSE",e.USER_INFO_REQUEST_FAILED_WITH_STATUS="USER_INFO_REQUEST_FAILED_WITH_STATUS",e.HARMONY_NO_TRACKS_LOADED="HARMONY_NO_TRACKS_LOADED",e.HARMONY_OPERATION_FORBIDDEN="HARMONY_OPERATION_FORBIDDEN",e.HARMONY_LOCAL_PLAYER_DISABLED="HARMONY_LOCAL_PLAYER_DISABLED",e.HARMONY_INVALID_DESCRIPTOR_ID="HARMONY_INVALID_DESCRIPTOR_ID",e.CONNECTAPI_CLIENT_INVALID_ARGUMENTS="CONNECTAPI_CLIENT_INVALID_ARGUMENTS",e.CONNECTAPI_CLIENT_MISSING_DEVICE_ID="CONNECTAPI_CLIENT_MISSING_DEVICE_ID",e.CONNECTAPI_CLIENT_NO_CONNECTION_ID="CONNECT_API_CLIENT_NO_CONNECTION_ID",e.CONNECTAPI_CLIENT_NO_DEVICE="CONNECTAPI_CLIENT_NO_DEVICE",e.CONNECTAPI_CLIENT_NO_SESSION_ID="CONNECTAPI_CLIENT_NO_SESSION_ID",e.CONNECTAPI_CLIENT_NO_STATE="CONNECTAPI_CLIENT_NO_STATE",e.CONNECTAPI_CLIENT_INVALID_POSITION="CONNECT_API_CLIENT_INVALID_POSITION",e.CONNECTAPI_CLIENT_INVALID_VOLUME="CONNECT_API_CLIENT_INVALID_VOLUME",e.CONNECTAPI_MAX_SUBSCRIPTIONS_REACHED="CONNECTAPI_MAX_SUBSCRIPTIONS_REACHED",e.CONNECTAPI_REGISTRATION_FAILED_WITH_STATUS="CONNECTAPI_REGISTRATION_FAILED_WITH_STATUS",e.CP_NO_DEVICE_DESCRIPTOR="CP_NO_DEVICE_DESCRIPTOR",e.CP_NO_CONNECTION_ID="CP_NO_CONNECTION_ID",e.CP_REGISTRATION_FAILED_WITH_STATUS="CP_REGISTRATION_FAILED_WITH_STATUS",e.CP_REQUEST_FAILED_WITH_STATUS="CP_REQUEST_FAILED_WITH_STATUS",e.CP_NO_DEVICE_ID="CP_NO_DEVICE_ID",e.CP_NO_COMMAND_ID="CP_NO_COMMAND_ID",e.CP_NO_RESPONSE_BODY="CP_NO_RESPONSE_BODY",e.CP_NO_TRACKING_DATA="CP_NO_TRACKING_DATA",e.CP_INVALID_STATE="CP_INVALID_STATE",e.QUEUE_MANAGER_NO_STATE="QUEUE_MANAGER_NO_STATE",e.QUEUE_OPERATION_STALE_REVISION="QUEUE_OPERATION_STALE_REVISION",e.TP_NO_RESPONSE_BODY="TP_NO_RESPONSE_BODY",e.TP_REGISTRATION_FAILED_NON_PREMIUM="TP_REGISTRATION_FAILED_NON_PREMIUM",e.TP_REGISTRATION_FAILED_WITH_STATUS="TP_REGISTRATION_FAILED_WITH_STATUS",e.TP_MAX_SUBSCRIPTIONS_REACHED="TP_MAX_SUBSCRIPTIONS_REACHED",e.TP_UPDATE_REQUEST_EMPTY_RESPONSE="TP_UPDATE_REQUEST_EMPTY_RESPONSE",e.TP_PARSE_STATE_UPDATE_FAILED_WITH_STATUS="TP_PARSE_STATE_UPDATE_FAILED_WITH_STATUS",e.TP_UNKNOWN_COMMAND="TP_UNKNOWN_COMMAND",e.TP_CANNOT_CREATE_STATE_REF="TP_CANNOT_CREATE_STATE_REF",e.TP_MISSING_INITIAL_STATE="TP_MISSING_INITIAL_STATE",e.TP_INVALID_STATE_REFERENCE="TP_INVALID_STATE_REFERENCE",e.TP_CONFLICT_REQUEST_FAILED_WITH_STATUS="TP_CONFLICT_REQUEST_FAILED_WITH_STATUS"}(tl||(tl={}));n(9273);var il=n(1201);var rl,ol,al,sl;n(2410);function cl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=M()(e);if(t){var r=M()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return w()(this,n)}}!function(e){e.APPLOAD="appload",e.BACK_BUTTON="backbtn",e.CLICK_ROW="clickrow",e.CLICK_SIDE="clickside",e.END_PLAY="endplay",e.FORWARD_BUTTON="fwdbtn",e.LOGOUT="logout",e.PLAY_BUTTON="playbtn",e.POPUP="popup",e.REMOTE="remote",e.TRACK_DONE="trackdone",e.TRACK_ERROR="trackerror",e.UNKNOWN="unknown",e.URI_OPEN="uriopen",e.CAPPED="capped",e.SEEK="seek"}(rl||(rl={})),function(e){e.AUTHENTICATED="authenticated",e.AUTHENTICATION_ERROR="authentication_error",e.AUTOPLAY_FAILED="autoplay_failed",e.BEFORE_DISCONNECT="before_disconnect",e.BEFORE_VOLUME_CHANGE="before_volume_change",e.BUFFER_STALLED="stalled",e.BUFFERING_END="buffering_end",e.BUFFERING_START="buffering_start",e.CONNECTED="connected",e.CONNECTION_ERROR="connection_error",e.DEVICES_CHANGED="devices_changed",e.DEVICE_DEACTIVATED="device_deactivated",e.DEVICE_DESCRIPTOR_CHANGED="descriptor_changed",e.DISCONNECTED="disconnected",e.DURATION_CHANGED="duration_changed",e.ERROR="error",e.LAST_ACTIVE_DEVICE_INFO_CHANGED="last_active_device_info_changed",e.LOCAL_CONTEXT_ENDED="local_context_ended",e.LOCAL_PLAYER_DISABLED="local_player_disabled",e.LOCAL_PLAYER_ENABLED="local_player_enabled",e.LOCAL_PLAYER_LOGGED_OUT="local_player_logged_out",e.LOGGED_OUT="logged_out",e.MAX_LIST_ERRORS_REACHED="max_list_errors_reached",e.MAX_SUBSCRIPTIONS_REACHED="max_subscriptions_reached",e.PLAYBACK_CAPPED="playback_capped",e.PLAYER_INITIALIZATION_DONE="player_initialization_done",e.PLAYER_INITIALIZATION_FAILED="player_initialization_failed",e.PRODUCT_STATE_CHANGED="product_state_changed",e.PROGRESS="progress",e.PLAYER_QUEUE_CHANGED="player_queue_changed",e.RECONNECTED="reconnected",e.RECONNECTING="reconnecting",e.REMOTE_OBSERVER_DISABLED="remote_observer_disabled",e.REMOTE_OBSERVER_ENABLED="remote_observer_enabled",e.SERVICE_REGISTRATION_ERROR="service_registration_error",e.STATE_CHANGED="state_changed",e.STOPPED_ON_BACKGROUND="stopped_on_background",e.TRACK_ENDED="track_ended",e.UNRECOVERABLE_FAILURE="unrecoverable_failure",e.VIDEO_ELEMENT_APPENDED="video_element_appended",e.VIDEO_ELEMENT_REMOVED="video_element_removed",e.VOLUME_CHANGED="volume_changed",e.DISPLAYED_CUES_CHANGED="displayed_cues_changed",e.SUBTITLE_LANGUAGES_LOADED="subtitle_languages_loaded"}(ol||(ol={})),function(e){e.CLOUD_PLAYBACK="cloud-playback",e.CONNECT_API="connect-api",e.HARMONY="harmony",e.PLAYBACK="playback",e.TRACK_PLAYBACK="track-playback",e.TRANSPORT="transport"}(al||(al={})),function(e){e[e.OFF=0]="OFF",e[e.CONTEXT=1]="CONTEXT",e[e.TRACK=2]="TRACK"}(sl||(sl={}));Error;n(2189),n(1047),n(8217);function ll(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=M()(e);if(t){var r=M()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return w()(this,n)}}Error;n(1438),n(4170);var dl,ul,_l=n(8687);n(8592),n(4792);!function(e){e.FILE_URLS_MP3="file_urls_mp3",e.FILE_URLS_EXTERNAL="file_urls_external",e.FILE_IDS_MP3="file_ids_mp3",e.FILE_IDS_MP4="file_ids_mp4",e.FILE_IDS_MP4_DUAL="file_ids_mp4_dual",e.FILE_IDS_CBCS="file_ids_mp4_cbcs",e.FILE_IDS_MP4FLAC="file_ids_mp4flac",e.MANIFEST_IDS_VIDEO="manifest_ids_video"}(dl||(dl={})),function(e){e.UNKNOWN="unknown",e.COMPUTER="computer",e.TABLET="tablet",e.SMARTPHONE="smartphone",e.SPEAKER="speaker",e.TV="tv",e.AVR="avr",e.STB="stb",e.AUDIO_DONGLE="audio_dongle",e.GAME_CONSOLE="game_console",e.CAST_VIDEO="cast_video",e.CAST_AUDIO="cast_audio",e.AUTOMOBILE="automobile",e.SMARTWATCH="smartwatch",e.CHROMEBOOK="chromebook"}(ul||(ul={}));var pl=n(1165);function hl(){var e=new Uint8Array(16);return crypto.getRandomValues(e),pl.RN.toHex(e.join(""),40).slice(0,40)}function fl(){for(var e=new Array(27),t=e.length;t--;)e[t]=Math.floor(8*Math.random());return pl.RN.toHex(e.join(""),40)}"undefined"!=typeof crypto&&crypto.getRandomValues;_l.P.forTag("harmonyclient");var El,ml,gl,yl,vl;n(3205),n(9368);!function(e){e.KEY_SESSION_MESSAGE="message",e.KEY_SESSION_STATUSES_CHANGE="keystatuseschange",e.MEDIA_SOURCE_OPEN="sourceopen",e.MEDIA_SOURCE_CLOSE="sourceclose",e.SOURCE_BUFFER_UPDATE_END="updateend",e.MS_KEY_ADDED="mskeyadded",e.MS_KEY_ERROR="mskeyerror",e.MS_KEY_MESSAGE="mskeymessage",e.MS_NEEDKEY="msneedkey",e.WEBKIT_KEY_ADDED="webkitkeyadded",e.WEBKIT_KEY_ERROR="webkitkeyerror",e.WEBKIT_KEY_MESSAGE="webkitkeymessage",e.WEBKIT_NEEDKEY="webkitneedkey",e.V0_1B_KEY_ADDED="keyadded",e.V0_1B_KEY_ERROR="keyerror",e.V0_1B_KEY_MESSAGE="keymessage",e.V0_1B_NEEDKEY="needkey",e.MEDIA_CANPLAY="canplay",e.MEDIA_CANPLAYTHROUGH="canplaythrough",e.MEDIA_DURATIONCHANGE="durationchange",e.MEDIA_ENCRYPTED="encrypted",e.MEDIA_ENDED="ended",e.MEDIA_ERROR="error",e.MEDIA_LOADEDMETADATA="loadedmetadata",e.MEDIA_PAUSE="pause",e.MEDIA_PLAY="play",e.MEDIA_PLAYING="playing",e.MEDIA_SEEKING="seeking",e.MEDIA_TIMEUPDATE="timeupdate",e.MEDIA_WAITING="waiting",e.MEDIA_RATECHANGE="ratechange",e.INTERNAL_ENCRYPTED="__encrypted",e.INTERNAL_PLAYER_CANPLAY="__canplay",e.INTERNAL_PLAYER_CANPLAYTHROUGH="__canplaythrough",e.INTERNAL_MEDIA_REQUIRES_DURATION="__requiresduration",e.INTERNAL_PLAYER_LOADED_METADATA="__loadedmetadata",e.BUFFER_APPEND_ERROR="append_error",e.BUFFER_QUOTA_EXCEEDED="quota_exceeded",e.BUFFER_STALLED="stalled",e.BUFFER_SOURCE_OPEN="source_open",e.BUFFER_SOURCE_CLOSE="source_close",e.BUFFERING_START="buffering_start",e.BUFFERING_END="buffering_end",e.EME_LICENSE_REQUEST_ERROR="license_request_error",e.EME_LICENSE_REQUEST_CAPPED="license_request_capped",e.LIST_PLAYER_AUTOPLAY_FAILED="player_autoplay_failed",e.LIST_PLAYER_BEFORE_LIST_CHANGE="before_list_change",e.LIST_PLAYER_BEFORE_NEXT="before_next",e.LIST_PLAYER_BEFORE_PLAYER_LOAD="before_player_load",e.LIST_PLAYER_BEFORE_PREVIOUS="before_previous",e.LIST_PLAYER_BEFORE_TRACK_LOAD="before_track_load",e.LIST_PLAYER_BEFORE_VOLUME_CHANGE="before_volume_change",e.LIST_PLAYER_BUFFER_STALLED="stalled",e.LIST_PLAYER_BUFFERING_START="buffering_start",e.LIST_PLAYER_BUFFERING_END="buffering_end",e.LIST_PLAYER_CAPPED="capped",e.LIST_PLAYER_CLEARED="cleared",e.LIST_PLAYER_DURATION_CHANGED="duration_changed",e.LIST_PLAYER_ERROR="error",e.LIST_PLAYER_ERROR_SYNC="error_sync",e.LIST_PLAYER_LIST_CHANGED="list_change",e.LIST_PLAYER_LIST_ENDED="list_ended",e.LIST_PLAYER_LOAD_VIDEO="load_video",e.LIST_PLAYER_MAX_LIST_ERRORS_REACHED="max_list_errors_reached",e.LIST_PLAYER_PAUSED="paused",e.LIST_PLAYER_PLAYED_THRESHOLD_REACHED="played_threshold_reached",e.LIST_PLAYER_PLAYER_LOAD="player_load",e.LIST_PLAYER_PLAYING="playing",e.LIST_PLAYER_POSITION_CHANGED="position_changed",e.LIST_PLAYER_PROGRESS="progress",e.LIST_PLAYER_REPEAT_MODE_CHANGED="repeat_mode_changed",e.LIST_PLAYER_SHUFFLE_CHANGED="shuffle_changed",e.LIST_PLAYER_STOPPED="stopped",e.LIST_PLAYER_STOPPED_VIDEO="stopped_video",e.LIST_PLAYER_TRACKING_DATA_CREATED="tracking_data_created",e.LIST_PLAYER_TRACKING_DATA_FINALIZED="tracking_data_finalized",e.LIST_PLAYER_TRACK_ENDED="track_ended",e.LIST_PLAYER_TRACK_LOADED="track_loaded",e.LIST_PLAYER_TRACK_TIMEOUT="track_timeout",e.LIST_PLAYER_TRACK_UNPLAYABLE="track_unplayable",e.LIST_PLAYER_DATA_CREATED="tracking_data_created",e.LIST_PLAYER_DATA_FINALIZED="tracking_data_finalized",e.LIST_PLAYER_VOLUME_CHANGED="volume_changed",e.LIST_PLAYER_VIDEO_ELEMENT_APPENDED="video_element_appended",e.LIST_PLAYER_VIDEO_ELEMENT_REMOVED="video_element_removed",e.LIST_PLAYER_VIDEO_PROFILE_CHANGED="video_profile_changed",e.LIST_PLAYER_SEEK_HANDLED="list_player_seek_handled",e.LIST_PLAYER_DISPLAYED_CUES_CHANGED="displayed_cues_changed",e.LIST_PLAYER_PLAYBACK_SPEED_CHANGED="playback_speed_changed",e.LIST_PLAYER_SUBTITLE_LANGUAGES_LOADED="subtitle_languages_loaded",e.LOGGER_ERROR="error",e.PLAYER_AUTOPLAY_FAILED="player_autoplay_failed",e.PLAYER_BEFORE_LOAD="before_load",e.PLAYER_BEFORE_STOP="before_stop",e.PLAYER_BEFORE_VOLUME_CHANGE="before_volume_change",e.PLAYER_BUFFER_STALLED="stalled",e.PLAYER_BUFFERING_START="buffering_start",e.PLAYER_BUFFERING_END="buffering_end",e.PLAYER_CAN_PRELOAD="can_preload",e.PLAYER_CAPPED="capped",e.PLAYER_DURATION_CHANGED="duration_changed",e.PLAYER_ENDED="ended",e.PLAYER_ENDED_VIDEO="ended_video",e.PLAYER_ERROR="error",e.PLAYER_WARNING="warning",e.PLAYER_FIRST_BYTES="first_bytes",e.PLAYER_KEY_RECEIVED="key",e.PLAYER_LOAD="load",e.PLAYER_LOAD_VIDEO="load_video",e.PLAYER_LOADING_FAILED="loading_failed",e.PLAYER_PAUSED="paused",e.PLAYER_PLAY="play",e.PLAYER_PLAYING="playing",e.PLAYER_POSITION_CHANGED="position_changed",e.PLAYER_PRELOADING_ERROR="preloading_error",e.PLAYER_PROGRESS="progress",e.PLAYER_STALLED="stalled",e.PLAYER_STOPPED="stopped",e.PLAYER_STOPPED_VIDEO="stopped_video",e.PLAYER_PLAYED_THRESHOLD_REACHED="played_threshold_reached",e.PLAYER_TIMEOUT="timeout",e.PLAYER_PLAYBACK_START="playback_start",e.PLAYER_TRACKING_DATA_CREATED="tracking_data_created",e.PLAYER_TRACKING_DATA_FINALIZED="tracking_data_finalized",e.PLAYER_VIDEO_ELEMENT_APPENDED="video_element_appended",e.PLAYER_VIDEO_ELEMENT_REMOVED="video_element_removed",e.PLAYER_VIDEO_PROFILE_CHANGED="video_profile_changed",e.PLAYER_DISPLAYED_CUES_CHANGED="displayed_cues_changed",e.PLAYER_SEEKING="seeking",e.PLAYER_FRAGMENT_FETCHED="fragment_fetched",e.PLAYER_FRAGMENT_FETCH_ERROR="fragment_fetch_error",e.PLAYER_VIDEO_MANIFEST_RESOLVED="video_manifest_resolved",e.PLAYER_VIDEO_MANIFEST_RESOLVE_FAILED="video_manifest_resolve_failed",e.PLAYER_PLAYBACK_SPEED_CHANGED="playback_speed_changed",e.PLAYER_SUBTITLE_LANGUAGES_LOADED="subtitle_languages_loaded",e.PLAYER_MANAGER_READY="ready",e.TRACKER_PLAYBACK_START="playback_start",e.TRACKER_PLAYED_THRESHOLD_REACHED="played_threshold_reached",e.TRACKER_TRACKING_DATA_CREATED="tracking_data_created",e.TRACKER_TRACKING_DATA_FINALIZED="tracking_data_finalized",e.VIDEO_MANIFEST_RESOLVED="video_manifest_resolved",e.VIDEO_MANIFEST_RESOLVE_FAILED="video_manifest_resolve_failed",e.ABR_MANAGER_BITRATE_CHANGE="bitrate_change"}(El||(El={})),function(e){e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready",e.PLAYREADY_HARDWARE="com.microsoft.playready.hardware",e.FAIRPLAY="com.apple.fps.1_0",e.INVALID_SPOTIFY_KEY="com.spotify.invalid"}(ml||(ml={})),function(e){e.SUCCESS="RESULT_SUCCESS",e.INVALID="RESULT_INVALID",e.FORBIDDEN="RESULT_FORBIDDEN",e.OUT_OF_BOUNDS="RESULT_OUT_OF_BOUNDS",e.NO_LIST="RESULT_NO_LIST",e.NO_TRACK="RESULT_NO_TRACK",e.LIST_END="RESULT_LIST_END",e.INVALID_TRACK="RESULT_INVALID_TRACK",e.CANCELLED="CANCELLED",e.NO_TRACK_PLAYER="NO_TRACK_PLAYER"}(gl||(gl={})),function(e){e.MP3="MP3",e.MP4="MP4",e.MP4_DUAL="MP4_DUAL",e.MP4_CBCS="MP4_CBCS",e.MP4_FLAC="MP4_FLAC",e.MANIFEST_ID="MANIFEST_ID"}(yl||(yl={})),function(e){e.FRAGMENT_FETCHED="fragment_fetched",e.FRAGMENT_FETCH_ERROR="fragment_fetch_error",e.VIDEO_PROFILE_CHANGED="video_profile",e.SUBTITLE_LANGUAGES_LOADED="subtitle_languages_loaded"}(vl||(vl={}));Error;Error;Error;_l.P.forTag("eme_polyfill.v0_1b");_l.P.forTag("eme_polyfill.safari");_l.P.forTag("eme_polyfills.tester");ml.WIDEVINE,ml.PLAYREADY,ml.PLAYREADY_HARDWARE,ml.FAIRPLAY,ml.INVALID_SPOTIFY_KEY,_l.P.forTag("playback.eme_manager");Error;Error;_l.P.forTag("playback.video_content");var Sl;!function(e){e[e.MP3_256=3]="MP3_256",e[e.MP3_320=4]="MP3_320",e[e.MP3_160=5]="MP3_160",e[e.MP3_96=6]="MP3_96",e[e.MP4_128=10]="MP4_128",e[e.MP4_256=11]="MP4_256",e[e.MP4_128_DUAL=12]="MP4_128_DUAL",e[e.MP4_256_DUAL=13]="MP4_256_DUAL",e[e.MP4_128_CBCS=14]="MP4_128_CBCS",e[e.MP4_256_CBCS=15]="MP4_256_CBCS",e[e.MP4_FLAC=17]="MP4_FLAC"}(Sl||(Sl={}));Sl.MP3_256,Sl.MP3_320,Sl.MP3_160,Sl.MP3_96,Sl.MP4_128,Sl.MP4_256,Sl.MP4_128_DUAL,Sl.MP4_256_DUAL,Sl.MP4_128_CBCS,Sl.MP4_256_CBCS,Sl.MP4_FLAC;_l.P.forTag("playback.content_buffer");var Rl,Al;!function(e){e[e.AUDIO=10]="AUDIO",e[e.VIDEO=20]="VIDEO"}(Rl||(Rl={}));!function(e){e.SHOWING="showing",e.HIDDEN="hidden"}(Al||(Al={}));_l.P.forTag("playback.player"),yl.MP4,yl.MP4_DUAL,yl.MP4_CBCS,yl.MP4_FLAC,yl.MP3,yl.MANIFEST_ID;Error;_l.P.forTag("playback.logger");Error;_l.P.forTag("playback.storage_resolve");Error;_l.P.forTag("playback.tracker");Error;var Tl;!function(e){e[e.ABORTED=101]="ABORTED",e[e.NETWORK=102]="NETWORK",e[e.MEDIA_DECODING=103]="MEDIA_DECODING",e[e.SRC_NOT_SUPPORTED=104]="SRC_NOT_SUPPORTED",e[e.EME=105]="EME",e[e.GENERIC=100]="GENERIC"}(Tl||(Tl={}));el.MEDIA_ABORTED,Tl.ABORTED,el.MEDIA_DECODING_ERROR,Tl.MEDIA_DECODING,el.MEDIA_NOT_SUPPORTED,Tl.SRC_NOT_SUPPORTED,el.MEDIA_NETWORK_ERROR,Tl.NETWORK;var bl;!function(e){e.READY="playerready",e.VIDEO_CHANGE="videochange",e.PLAY="play",e.PLAYING="playing",e.PAUSE="pause",e.TIMEUPDATE="timeupdate",e.SEEKING="seeking",e.SEEKED="seeked",e.ERROR="error",e.ENDED="ended",e.RENDITION_CHANGE="renditionchange",e.REQUEST_COMPLETED="requestcompleted",e.REQUEST_FAILED="requestfailed",e.REQUEST_CANCELED="requestcanceled"}(bl||(bl={}));var Ll,Il,Pl,Cl,Ol,Dl;!function(e){e.NULL_VALUE="NULL_VALUE",e.LIST_START="LIST_START",e.LIST_END="LIST_END",e.FORBIDDEN="FORBIDDEN",e.IGNORE="IGNORE",e.PAUSE="PAUSE"}(Ll||(Ll={})),function(e){e.MP4_AUDIO="audio/mp4",e.MP4_VIDEO="video/mp4",e.MTS_VIDEO="video/mp2t",e.WEBM_AUDIO="audio/webm",e.WEBM_VIDEO="video/webm"}(Il||(Il={})),function(e){e.AAC_LC="mp4a.40.2",e.FLAC="flac",e.OPUS="opus",e.VP9="vp9",e.VP8="vp8",e.H264_31="avc1.4d401f"}(Pl||(Pl={})),function(e){e.UNKNOWN="UNKNOWN",e.DEFAULT="DEFAULT",e.LOW="LOW",e.NORMAL="NORMAL",e.HIGH="HIGH",e.VERY_HIGH="VERY_HIGH",e.HIFI="HIFI"}(Cl||(Cl={})),function(e){e.NONE="NONE",e.CONTEXT="CONTEXT",e.TRACK="TRACK"}(Ol||(Ol={})),function(e){e.EMPTY="EMPTY",e.SW_CRYPTO="SW_CRYPTO",e.SW_DECODE="SW_DECODE",e.HW_CRYPTO="HW_CRYPTO",e.HW_DECODE="HW_DECODE",e.HW_ALL="HW_ALL"}(Dl||(Dl={}));Error;_l.P.forTag("playback.init");function kl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=M()(e);if(t){var r=M()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return w()(this,n)}}var wl;Error;!function(e){e.ON="ON",e.OFF="OFF",e.NONE="NONE"}(wl||(wl={}));var Nl;_l.P.forTag("tp.stream.PlaybackStateObserver");var Ml;Nl={},h()(Nl,dl.FILE_URLS_MP3,yl.MP3),h()(Nl,dl.FILE_URLS_EXTERNAL,yl.MP3),h()(Nl,dl.FILE_IDS_MP3,yl.MP3),h()(Nl,dl.FILE_IDS_MP4,yl.MP4),h()(Nl,dl.FILE_IDS_MP4_DUAL,yl.MP4),h()(Nl,dl.FILE_IDS_CBCS,yl.MP4_CBCS),h()(Nl,dl.FILE_IDS_MP4FLAC,yl.MP4_FLAC),h()(Nl,dl.MANIFEST_IDS_VIDEO,yl.MANIFEST_ID),n(9961);!function(e){e.TRACK_DATA_FINALIZED="track_data_finalized",e.DEREGISTER="deregister",e.REGISTER="register",e.BEFORE_TRACK_LOAD="before_track_load",e.CAPPED="capped",e.ERROR="error",e.PAUSE="pause",e.RESUME="resume",e.PLAYED_THRESHOLD_REACHED="played_threshold_reached",e.POSITION_CHANGED="position_changed",e.SPEED_CHANGED="speed_changed",e.STARTED_PLAYING="started_playing",e.PROGRESS="progress",e.PING="ping",e.MODIFY_CURRENT_STATE="modify_current_state",e.STATE_CLEAR="state_clear"}(Ml||(Ml={}));_l.P.forTag("tpapiclient"),_l.P.forTag("tpapiclient.endsong"),_l.P.forTag("tpapiclient.endsongs");var Ul;n(9294),n(190);function xl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=M()(e);if(t){var r=M()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return w()(this,n)}}!function(e){e.LOCAL_PLAYER_DISABLED="local_player_disabled",e.STOPPED="stopped",e.REMOTE_ACTIVATED="remote_activated",e.UNKNOWN="unknown"}(Ul||(Ul={}));Error;_l.P.forTag("harmony.controller"),Cl.UNKNOWN,Cl.DEFAULT,Cl.LOW,Cl.NORMAL,Cl.NORMAL,Cl.HIGH,Cl.VERY_HIGH,Cl.HIFI,wl.ON,wl.OFF,wl.NONE;n(9202);Object.assign(Object.assign(Object.assign({},tl),nl.J),el);var Fl;n(2759),n(5221);function Yl(e,t){var n=t.shuffle;return(void 0!==n||!cr().isShow(e.uri))&&n}function Bl(e,t){var n=t.repeat;if(void 0===n&&cr().isShow(e.uri))return sl.OFF;switch(n){case Rc.REPEAT_NONE:return sl.OFF;case Rc.REPEAT_CONTEXT:return sl.CONTEXT;case Rc.REPEAT_TRACK:return sl.TRACK;default:return}}function Kl(e,t,n){var i,r,o,a,s,c,l;return{contextURI:e.uri,trackUID:null===(i=n.skipTo)||void 0===i?void 0:i.uid,trackURI:null===(r=n.skipTo)||void 0===r?void 0:r.uri,index:null===(o=n.skipTo)||void 0===o?void 0:o.index,pageIndex:null===(a=n.skipTo)||void 0===a?void 0:a.pageIndex,initialOffset:n.seekTo,shuffle:Yl(e,n),repeatMode:Bl(e,n),filter:null===(s=e.metadata)||void 0===s?void 0:s[yc.FILTERING_PREDICATE],sort:null===(c=e.metadata)||void 0===c?void 0:c[yc.SORTING_CRITERIA],playOrigin:(l=t,{featureIdentifier:l.featureIdentifier,featureVersion:l.featureVersion,referrerIdentifier:l.referrerIdentifier,viewURI:l.viewURI,externalReferrer:l.externalReferrer}),paused:n.paused}}var Hl=new RegExp(String.raw(Fl||(Fl=bt()(["^q[0-9]+$"]))));function Gl(e){var t,n=!!e.uid&&Hl.test(e.uid)?"queue":null;return cr().isTrack(e.uri)||cr().isLocalTrack(e.uri)?function(e,t){var n,i,r,o,a,s,c,l,d,u,_,p,h;return{type:vc.TRACK,uri:null!==(n=t.linked_from)&&void 0!==n&&n.uri?t.linked_from.uri:t.uri,uid:null!==(i=t.uid)&&void 0!==i?i:null,name:null!==(r=t.name)&&void 0!==r?r:"",mediaType:null!==(o=t.track_type)&&void 0!==o?o:"audio",duration:{milliseconds:null!==(a=t.duration_ms)&&void 0!==a?a:0},album:{type:vc.ALBUM,uri:null!==(s=null===(c=t.album)||void 0===c?void 0:c.uri)&&void 0!==s?s:"",name:null!==(l=null===(d=t.album)||void 0===d?void 0:d.name)&&void 0!==l?l:"",images:null!==(u=null===(_=t.album)||void 0===_?void 0:_.images)&&void 0!==u?u:[]},artists:null!==(p=null===(h=t.artists)||void 0===h?void 0:h.map((function(e){var t=e.uri,n=e.name;return{type:vc.ARTIST,uri:t,name:n||""}})))&&void 0!==p?p:[],isLocal:cr().isLocalTrack(t.uri),provider:e,get images(){return this.album.images}}}(n,e):cr().isEpisode(e.uri)?function(e,t){var n,i,r,o,a,s,c,l,d,u;return{type:vc.EPISODE,uri:t.uri,uid:null!==(n=t.uid)&&void 0!==n?n:null,name:null!==(i=t.name)&&void 0!==i?i:"",mediaType:null!==(r=t.track_type)&&void 0!==r?r:"audio",duration:{milliseconds:null!==(o=t.duration_ms)&&void 0!==o?o:0},show:{type:vc.SHOW,uri:null!==(a=null===(s=t.album)||void 0===s?void 0:s.uri)&&void 0!==a?a:"",name:null!==(c=null===(l=t.album)||void 0===l?void 0:l.name)&&void 0!==c?c:"",images:null!==(d=null===(u=t.album)||void 0===u?void 0:u.images)&&void 0!==d?d:[]},provider:e,get images(){return this.show.images}}}(n,e):cr().isAd(e.uri)?function(e,t){var n,i,r,o,a,s,c,l,d,u;return{type:vc.AD,uri:t.uri,uid:null!==(n=t.uid)&&void 0!==n?n:null,title:null!==(i=t.name)&&void 0!==i?i:null,advertiser:null!==(r=null===(o=t.artists)||void 0===o?void 0:o[0].name)&&void 0!==r?r:null,url:null!==(a=null===(s=t.artists)||void 0===s?void 0:s[0].uri)&&void 0!==a?a:null,id:null,mediaType:null!==(c=t.track_type)&&void 0!==c?c:"audio",duration:{milliseconds:null!==(l=t.duration_ms)&&void 0!==l?l:0},images:null!==(d=null===(u=t.album)||void 0===u?void 0:u.images)&&void 0!==d?d:[],isPodcastAd:!1,isSkippableAd:!1,isTestAd:!1,provider:e}}(n,e):{type:vc.UNKNOWN,uri:e.uri,uid:null!==(t=e.uid)&&void 0!==t?t:null,provider:n,images:null}}function Vl(e){switch(e){default:case sl.OFF:return Rc.REPEAT_NONE;case sl.CONTEXT:return Rc.REPEAT_CONTEXT;case sl.TRACK:return Rc.REPEAT_TRACK}}function jl(e){switch(e){case Cl.DEFAULT:case Cl.UNKNOWN:case void 0:return{bitrateLevel:Lc.UNKNOWN};case Cl.LOW:return{bitrateLevel:Lc.LOW};case Cl.NORMAL:return{bitrateLevel:Lc.NORMAL};case Cl.HIGH:return{bitrateLevel:Lc.HIGH};case Cl.VERY_HIGH:return{bitrateLevel:Lc.VERY_HIGH};case Cl.HIFI:return{bitrateLevel:Lc.HIFI};default:return function(e,t){throw new Error(null!=t?t:"Unexpectedly hit unreachable code! Unhandled discriminated union member: ".concat(JSON.stringify(e)))}(e)}}function Wl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return Cc.includes(e)?e:"unknown"}))}function ql(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=M()(e);if(t){var r=M()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return w()(this,n)}}var zl=function(e){D()(n,e);var t=ql(n);function n(e){var i;d()(this,n),(i=t.call(this))._harmony=e;var r=null;return i._harmony.addListener(ol.STATE_CHANGED,(function(e){var t=e.data.state;i.emit(Ds.UPDATE,function(e){var t;if(null===e)return null;var n,i,r,o,a,s,c,l,d,u,_,p,h,f,E,m,g,y,v=null!==e.context.uri,S=null!==e.track_window.current_track;return{timestamp:e.timestamp,context:{uri:null!==(t=e.context.uri)&&void 0!==t?t:"",metadata:e.context.metadata},index:{pageURI:null,pageIndex:null,itemIndex:null},item:(y=e.track_window.current_track,null===y?null:Gl(y)),shuffle:e.shuffle,repeat:Vl(e.repeat_mode),speed:e.paused?0:1,playbackQuality:jl(e.playback_quality),playbackId:null,positionAsOfTimestamp:e.position,duration:e.duration,restrictions:(n=e.restrictions,i=n.disallow_pausing_reasons,r=void 0===i?[]:i,o=n.disallow_resuming_reasons,a=void 0===o?[]:o,s=n.disallow_seeking_reasons,c=void 0===s?[]:s,l=n.disallow_skipping_prev_reasons,d=void 0===l?[]:l,u=n.disallow_skipping_next_reasons,_=void 0===u?[]:u,p=n.disallow_toggling_repeat_context_reasons,h=void 0===p?[]:p,f=n.disallow_toggling_repeat_track_reasons,E=void 0===f?[]:f,m=n.disallow_toggling_shuffle_reasons,g=void 0===m?[]:m,{canPause:0===r.length,canResume:0===a.length,canSeek:0===c.length,canSkipPrevious:0===d.length,canSkipNext:0===_.length,canToggleRepeatContext:0===h.length,canToggleRepeatTrack:0===E.length,canToggleShuffle:0===g.length,disallowPausingReasons:Wl(r),disallowResumingReasons:Wl(a),disallowSeekingReasons:Wl(c),disallowSkippingPreviousReasons:Wl(d),disallowSkippingNextReasons:Wl(_),disallowTogglingRepeatContextReasons:Wl(h),disallowTogglingRepeatTrackReasons:Wl(E),disallowTogglingShuffleReasons:Wl(g)}),hasContext:v&&S,isPaused:e.paused,isBuffering:!1,previousItems:e.track_window.previous_tracks.map(Gl),nextItems:e.track_window.next_tracks.map(Gl)}}(t))})),i._harmony.addListener(ol.VOLUME_CHANGED,(function(e){var t=e.data,n=t.volume,r=t.remote;i.emit(Ds.VOLUME,{volume:n,isLocal:!r})})),i._harmony.addListener(ol.LAST_ACTIVE_DEVICE_INFO_CHANGED,(function(e){var t=e.data.deviceInfo;if(null!==t){var n=r!==t.volume;n&&!t.local&&(r=t.volume,i.emit(Ds.VOLUME,{volume:r,isLocal:!1})),null!==r&&n&&t.local&&(r=null,i.emit(Ds.VOLUME,{volume:t.volume,isLocal:!0}))}})),i}return n}(xs);n(5699);function Ql(e,t,n,i,r,o){var a=t.find((function(e){return i(n.after||n.before,e)}));if(!a)return t;var s=[];e.forEach((function(e){var n=t.find((function(t){return i(e,t)}));n&&s.push(n)}));var c=t.filter((function(e){return!s.includes(e)})),l=s.map((function(e){return r(a)?o(e):e})),d=a?c.indexOf(a):0;return n.after?c.splice.apply(c,[d+1,0].concat(B()(l))):c.splice.apply(c,[d,0].concat(B()(l))),c}function Zl(e,t,n,i,r,o){var a=t.find((function(e){return i(n.after||n.before,e)}));if(!a)return t;var s=e.map((function(e){return o(e,r(a))})),c=t.indexOf(a);return n.after?t.splice.apply(t,[c+1,0].concat(B()(s))):t.splice.apply(t,[c,0].concat(B()(s))),t}function $l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Xl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$l(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jl=function(){function e(t,n,i){var r=this;d()(this,e),this._events=t,this._queueManager=n,this.getRepeatMode=i,h()(this,"_state",null),this._queueManager.addListener(ol.PLAYER_QUEUE_CHANGED,(function(e){r._state=e.data.internalPlayerQueue,r._events.emitQueueUpdate(r.getQueueState())}))}var t,n,i,r,o;return _()(e,[{key:"getQueueState",value:function(){var e,t,n,i;return function(e,t,n){for(var i=1===n?2:1,r=[],o=0,a=0;a<t.length;a++){var s=t[a],c=s.uri,l=s.metadata,d=(l=void 0===l?{}:l).hidden,u=l.availability_restrictions,_="spotify:delimiter"===c||"spotify:meta:delimiter"===c;if(_&&++o>=i)break;_||"true"===d||u||r.push(t[a])}var p=r.findIndex((function(e){return"queue"!==e.provider}));return{current:e,queued:r.slice(0,p),nextUp:r.slice(p)}}(null!==(e=this._state)&&void 0!==e&&e.current_track?Gl(null===(t=this._state)||void 0===t?void 0:t.current_track):null,null!==(n=null===(i=this._state)||void 0===i?void 0:i.next_items.map(Gl))&&void 0!==n?n:[],this.getRepeatMode())}},{key:"isSameItem",value:function(e,t){return e.uid&&t.uid?e.uid===t.uid:e.uri===t.uri}},{key:"isQueued",value:function(e){return"queue"===e.provider}},{key:"markAsQueued",value:function(e){return Xl(Xl({},e),{},{provider:"queue",metadata:Xl(Xl({},e.metadata),{},{is_queued:"true"})})}},{key:"createQueueItem",value:function(e,t){return{uri:e.uri,type:"track",provider:t?"queue":"context",metadata:{is_queued:t.toString()}}}},{key:"addToQueue",value:(o=F()(H().mark((function e(t){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._queueManager.addToQueue(t.map((function(e){return e.uri})));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"removeFromQueue",value:(r=F()(H().mark((function e(t){var n,i=this;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._state){e.next=2;break}return e.abrupt("return");case 2:this._queueManager.setInternalPlayerQueue({revision:this._state.revision,next_items:null===(n=this._state.next_items)||void 0===n?void 0:n.filter((function(e){return!t.some((function(t){return i.isSameItem(t,e)}))})),previous_items:this._state.previous_items});case 3:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"clearQueue",value:(i=F()(H().mark((function e(){var t=this;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._state){e.next=2;break}return e.abrupt("return");case 2:this._queueManager.setInternalPlayerQueue({revision:this._state.revision,next_items:this._state.next_items.filter((function(e){return!t.isQueued(e)})),previous_items:this._state.previous_items});case 3:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"reorderQueue",value:(n=F()(H().mark((function e(t,n){var i;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._state){e.next=2;break}return e.abrupt("return");case 2:i=B()(this._state.next_items),this._queueManager.setInternalPlayerQueue({revision:this._state.revision,next_items:Ql(t,i,n,this.isSameItem,this.isQueued,this.markAsQueued),previous_items:this._state.previous_items});case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"insertIntoQueue",value:(t=F()(H().mark((function e(t,n){var i;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._state){e.next=2;break}return e.abrupt("return");case 2:i=B()(this._state.next_items),this._queueManager.setInternalPlayerQueue({revision:this._state.revision,next_items:Zl(t,i,n,this.isSameItem,this.isQueued,this.createQueueItem),previous_items:this._state.previous_items});case 4:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"getQueue",value:function(){return this.getQueueState()}}]),e}(),ed=.0625,td=function(){function e(t,n){var i=this;d()(this,e),this._harmony=t,this._defaultFeatureVersion=n,h()(this,"_events",void 0),h()(this,"referrer",void 0),h()(this,"_state",null),h()(this,"_volume",null),h()(this,"_queue",void 0),this._events=new zl(this._harmony),this._events.addListener(Ds.UPDATE,(function(e){var t=e.data;i._state=t})),this._events.addListener(Ds.VOLUME,(function(e){var t=e.data.volume;i._volume=t})),this._queue=new Jl(this._events,this._harmony.getQueueManager(),(function(){var e,t;return null!==(e=null===(t=i._state)||void 0===t?void 0:t.repeat)&&void 0!==e?e:Rc.REPEAT_NONE})),this.referrer="other"}var t,n,i,r,o,a,s,c,l,u,p,f,E,m,g,y,v,S,R,A,T,b;return _()(e,[{key:"setDefaultFeatureVersion",value:function(e){void 0===e.featureVersion&&(e.featureVersion=this._defaultFeatureVersion)}},{key:"getCapabilities",value:function(){return{canChangeSpeed:!1,canChangeVolume:!0,canPlayMultipleContextPages:!0,maxNextTracks:2,hasDecoratedQueue:!1}}},{key:"getEvents",value:function(){return this._events}},{key:"getState",value:function(){return this._state}},{key:"getReferrer",value:function(){return this.referrer}},{key:"setReferrer",value:function(e){this.referrer=e}},{key:"play",value:(b=F()(H().mark((function e(t,n){var i,r=arguments;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.length>2&&void 0!==r[2]?r[2]:{},!this._events.emitPlaySync(t,n,i)){e.next=3;break}return e.abrupt("return");case 3:this.setDefaultFeatureVersion(n),t.pages?this._harmony.playPages(t.pages.map((function(e){var t;return{tracks:null===(t=e.items)||void 0===t?void 0:t.map((function(e){var t=e.uri,n=e.uid;return{uri:t,uid:null!=n?n:void 0}})),pageURL:e.url,nextPageURL:e.nextPageUrl,metadata:e.metadata}})),null,Kl(t,n,i)):this._harmony.playURI(t.uri,null,Kl(t,n,i));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return b.apply(this,arguments)})},{key:"pause",value:(T=F()(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._events.emitPauseSync()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._harmony.pause();case 4:case"end":return e.stop()}}),e,this)}))),function(){return T.apply(this,arguments)})},{key:"resume",value:(A=F()(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._events.emitResumeSync()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._harmony.resume();case 4:case"end":return e.stop()}}),e,this)}))),function(){return A.apply(this,arguments)})},{key:"skipToNext",value:(R=F()(H().mark((function e(t){var n;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._events.emitSkipToNextSync()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._harmony.nextTrack(null,{track:t?{type:"track",uri:t.uri,uid:null!==(n=t.uid)&&void 0!==n?n:void 0}:void 0});case 4:case"end":return e.stop()}}),e,this)}))),function(e){return R.apply(this,arguments)})},{key:"skipToPrevious",value:(S=F()(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._events.emitSkipToPreviousSync()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._harmony.smartPreviousTrack();case 4:case"end":return e.stop()}}),e,this)}))),function(){return S.apply(this,arguments)})},{key:"seekTo",value:(v=F()(H().mark((function e(t){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._harmony.seek(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"seekForward",value:(y=F()(H().mark((function e(t){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._harmony.seekForward(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"seekBackward",value:(g=F()(H().mark((function e(t){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._harmony.seekBackward(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"setShuffle",value:(m=F()(H().mark((function e(t){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._harmony.setShuffle(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"setRepeat",value:(E=F()(H().mark((function e(t){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===Rc.REPEAT_NONE?3:e.t0===Rc.REPEAT_CONTEXT?6:e.t0===Rc.REPEAT_TRACK?9:12;break;case 3:return e.next=5,this._harmony.setRepeatMode(sl.OFF);case 5:case 8:case 11:case 12:return e.abrupt("break",13);case 6:return e.next=8,this._harmony.setRepeatMode(sl.CONTEXT);case 9:return e.next=11,this._harmony.setRepeatMode(sl.TRACK);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return E.apply(this,arguments)})},{key:"setSpeed",value:(f=F()(H().mark((function e(t){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Changing playback speed not possible with Harmony.");case 1:case"end":return e.stop()}}),e)}))),function(e){return f.apply(this,arguments)})},{key:"getVolume",value:(p=F()(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._harmony.getVolume();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"setVolume",value:(u=F()(H().mark((function e(t){var n;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Kc(t,0,1),e.next=3,this._harmony.setVolume(n);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"increaseVolume",value:(l=F()(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===this._volume){e.next=3;break}return e.next=3,this.setVolume(this._volume+ed);case 3:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"decreaseVolume",value:(c=F()(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===this._volume){e.next=3;break}return e.next=3,this.setVolume(this._volume-ed);case 3:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"canPlayEncryptedContent",value:(s=F()(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._harmony.getMediaConfig();case 2:return e.t0=e.sent.keysystem,e.t1=void 0,e.abrupt("return",e.t0!==e.t1);case 5:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"updateContext",value:(a=F()(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._harmony.updateCurrentContext();case 2:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"addToQueue",value:(o=F()(H().mark((function e(t){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._events.emitQueueActionSync(ws.ADD)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this._queue.addToQueue(t);case 5:this._events.emitQueueActionComplete(ws.ADD),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),this._events.emitQueueActionComplete(ws.ADD,e.t0),e.t0;case 12:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(e){return o.apply(this,arguments)})},{key:"reorderQueue",value:(r=F()(H().mark((function e(t,n){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._events.emitQueueActionSync(ws.REORDER)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this._queue.reorderQueue(t,n);case 5:this._events.emitQueueActionComplete(ws.REORDER),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),this._events.emitQueueActionComplete(ws.REORDER,e.t0),e.t0;case 12:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(e,t){return r.apply(this,arguments)})},{key:"insertIntoQueue",value:(i=F()(H().mark((function e(t,n){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._events.emitQueueActionSync(ws.INSERT)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this._queue.insertIntoQueue(t,n);case 5:this._events.emitQueueActionComplete(ws.INSERT),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),this._events.emitQueueActionComplete(ws.INSERT,e.t0),e.t0;case 12:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(e,t){return i.apply(this,arguments)})},{key:"removeFromQueue",value:(n=F()(H().mark((function e(t){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._events.emitQueueActionSync(ws.REMOVE)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this._queue.removeFromQueue(t);case 5:this._events.emitQueueActionComplete(ws.REMOVE),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),this._events.emitQueueActionComplete(ws.REMOVE,e.t0),e.t0;case 12:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(e){return n.apply(this,arguments)})},{key:"clearQueue",value:(t=F()(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._events.emitQueueActionSync(ws.CLEAR)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this._queue.clearQueue();case 5:this._events.emitQueueActionComplete(ws.CLEAR),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),this._events.emitQueueActionComplete(ws.CLEAR,e.t0),e.t0;case 12:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(){return t.apply(this,arguments)})},{key:"getQueue",value:function(){return this._queue.getQueue()}}]),e}();function nd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function id(e,t){return(0,bc.cr)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nd(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({transport:e},t))}function rd(e,t,n){var i;return null===e?function(e,t){var n,i=Bc(e),r=null,o="other",a=null,s=null,c=0,l=function(){var t=F()(H().mark((function t(){var i;return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==n){t.next=5;break}return t.next=3,e.getMediaConfig();case 3:i=t.sent,n=i.keysystem;case 5:return t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return i.addListener(Ds.UPDATE,(function(e){var t=e.data;r=t})),i.addListener(Ds.VOLUME,(function(e){var t=e.data.volume;a=t})),"undefined"!=typeof window&&l(),{getCapabilities:function(){return{canChangeSpeed:!1,canChangeVolume:!0,canPlayMultipleContextPages:!1,maxNextTracks:0,hasDecoratedQueue:!1}},canPlayEncryptedContent:function(){return F()(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:return e.t0=e.sent,e.t1=void 0,e.abrupt("return",e.t0!==e.t1);case 5:case"end":return e.stop()}}),e)})))()},getEvents:function(){return i},getState:function(){return r},getReferrer:function(){return o},setReferrer:function(e){o=e},play:function(){var n=arguments;return F()(H().mark((function r(){var o,a,d,u,_,p,h,f,E,m,g,y,v,S,R;return H().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(u=n.length,_=new Array(u),p=0;p<u;p++)_[p]=n[p];if(h=_[0],f=_[1],E=_[2],m=void 0===E?{}:E,!i.emitPlaySync(h,f,m)){r.next=4;break}return r.abrupt("return");case 4:return r.next=6,l();case 6:return g=r.sent,y=Zc(h),r.next=10,Jc(h,y,i,g,t);case 10:return v=r.sent,S=(0,bc.Sy)({tracks:[v]}),R={index:null!==(o=null==m||null===(a=m.skipTo)||void 0===a?void 0:a.index)&&void 0!==o?o:void 0,initialPosition:null!==(d=null==m?void 0:m.seekTo)&&void 0!==d?d:c},r.next=15,e.playList(S,R);case 15:s=_;case 16:case"end":return r.stop()}}),r)})))()},pause:function(){return F()(H().mark((function t(){return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i.emitPauseSync()){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.pause();case 4:case"end":return t.stop()}}),t)})))()},resume:function(){var t=this;return F()(H().mark((function n(){return H().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getCurrentState();case 2:if(n.sent.track){n.next=9;break}if(!s){n.next=7;break}return n.next=7,t.play.apply(t,B()(s));case 7:n.next=13;break;case 9:if(!i.emitResumeSync()){n.next=11;break}return n.abrupt("return");case 11:return n.next=13,e.resume();case 13:case"end":return n.stop()}}),n)})))()},skipToNext:function(){return F()(H().mark((function t(){return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i.emitSkipToNextSync()){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.nextTrack();case 4:case"end":return t.stop()}}),t)})))()},skipToPrevious:function(){return F()(H().mark((function t(){return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i.emitSkipToPreviousSync()){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.previousTrack();case 4:case"end":return t.stop()}}),t)})))()},seekTo:function(t){return F()(H().mark((function n(){return H().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getCurrentState();case 2:if(n.sent.track){n.next=6;break}return c=t,n.abrupt("return");case 6:return n.next=8,e.seek(t);case 8:case"end":return n.stop()}}),n)})))()},seekForward:function(t){return F()(H().mark((function n(){var i,r;return H().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getCurrentState();case 2:return i=n.sent,r=i.playbackState.position,n.next=6,e.seek(r+t);case 6:case"end":return n.stop()}}),n)})))()},seekBackward:function(t){return F()(H().mark((function n(){var i,r;return H().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getCurrentState();case 2:return i=n.sent,r=i.playbackState.position,n.next=6,e.seek(r-t);case 6:case"end":return n.stop()}}),n)})))()},setShuffle:function(){return F()(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setShuffle is not supported in Overture");case 1:case"end":return e.stop()}}),e)})))()},setRepeat:function(){return F()(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setRepeat is not supported in Overture");case 1:case"end":return e.stop()}}),e)})))()},setSpeed:function(){return F()(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setSpeed is not supported in Overture");case 1:case"end":return e.stop()}}),e)})))()},getVolume:function(){return F()(H().mark((function t(){return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.getVolume());case 1:case"end":return t.stop()}}),t)})))()},setVolume:function(t){return F()(H().mark((function n(){var i;return H().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=Kc(t,0,1),n.next=3,e.setVolume(i);case 3:case"end":return n.stop()}}),n)})))()},increaseVolume:function(){var e=this;return F()(H().mark((function t(){return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===a){t.next=3;break}return t.next=3,e.setVolume(a+qc);case 3:case"end":return t.stop()}}),t)})))()},updateContext:function(){return F()(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},decreaseVolume:function(){var e=this;return F()(H().mark((function t(){return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===a){t.next=3;break}return t.next=3,e.setVolume(a-qc);case 3:case"end":return t.stop()}}),t)})))()},addToQueue:function(){return F()(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("addToQueue is not supported in Overture");case 1:case"end":return e.stop()}}),e)})))()},clearQueue:function(){return F()(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("clearQueue is not supported in Overture");case 1:case"end":return e.stop()}}),e)})))()},removeFromQueue:function(){return F()(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("removeFromQueue is not supported in Overture");case 1:case"end":return e.stop()}}),e)})))()},reorderQueue:function(){return F()(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("reorderQueue is not supported in Overture");case 1:case"end":return e.stop()}}),e)})))()},insertIntoQueue:function(){return F()(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("insertIntoQueue is not supported in Overture");case 1:case"end":return e.stop()}}),e)})))()},getQueue:function(){throw new Error("getQueue is not supported in Overture")}}}(id(t,{platform_identifier:(i="embed","Partner spotify ".concat(i)),config:{enableWithoutEME:!0,unauthenticatedLogs:!0,videoPlayerContainer:".VideoPlayer__container",audioPlayerContainer:".VideoPlayer__container"},autoActivateElement:!0}),{clientId:n,correlationId:pc("config",{}).correlationId}):new td(e,"embed-podcast_2021-10-09_1633739385133_cbf3d48")}var od=function(e){var t=e.clientId;return rd(null,ie(),t)};function ad(e){var t=e.clientId,n=e.isAnonymous,i=function(e,t){return(0,Ac.createEventSender)({transport:e,suppressPersist:!1,context:[(0,Tc.jx)(t),(0,Tc.UR)({version:"embed-podcast_2021-10-09_1633739385133_cbf3d48"}),(0,Tc.Mb)(),(0,Tc.sr)(pc("config",{}).correlationId)]})}(ie(),t);!function(e){ms=e}(i),n}var sd=("object"===("undefined"==typeof window?"undefined":c()(window))&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,hs.qC);var cd=n(4074),ld=n(647),dd=n(9433);function ud(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ud(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ud(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pd=[/open\.scdn\.co/,/xpui\.app\.spotify\.com/];function hd(e,t,n){return e.build().withHost("").withPath("/get_access_token").withQueryParameters({reason:t,productType:n}).withoutMarket().withoutAuthorization().withEndpointIdentifier("/get_access_token").send()}var fd,Ed=n(6981),md=n(7519);function gd(e){var t="".concat("https://apresolve.spotify.com/","?type=").concat(fd.DEALER,"&type=").concat(fd.WEBGATE);return F()(H().mark((function n(){var i,r,o,a,s,c,l,d;return H().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=new AbortController,r=setTimeout((function(){return i.abort()}),e),n.prev=2,n.next=5,fetch(t,{signal:i.signal});case 5:return a=n.sent,clearTimeout(r),n.next=9,a.json();case 9:o=n.sent,n.next=17;break;case 12:if(n.prev=12,n.t0=n.catch(2),!i.signal.aborted){n.next=16;break}throw new Error("x-resolve request timed out after ".concat(e," ms"));case 16:throw n.t0;case 17:if(Array.isArray(o[fd.DEALER])&&Array.isArray(o[fd.WEBGATE])&&0!==o[fd.DEALER].length&&0!==o[fd.WEBGATE].length){n.next=19;break}throw new Error("x-resolve responded with incomplete results");case 19:return s=o[fd.DEALER][0],c=o[fd.WEBGATE][0],l="wss://".concat(s.replace(/:443$/,"")),d="https://".concat(c.replace(/:443$/,"")),n.abrupt("return",{dealer:l,webgate:d,webapi:"https://api.spotify.com/"});case 24:case"end":return n.stop()}}),n,null,[[2,12]])})))}!function(e){e.DEALER="dealer",e.WEBGATE="spclient"}(fd||(fd={}));function yd(e){return F()(H().mark((function t(){var n,i,r,o;return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:if(null!==(n=t.sent)){t.next=5;break}return t.abrupt("return",["token_unavailable",0]);case 5:return i=n.accessToken,r=n.accessTokenExpirationTimestampMs,o=Math.floor(((r||0)-Date.now())/1e3),t.abrupt("return",[i,o]);case 8:case"end":return t.stop()}}),t)})))}function vd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Sd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vd(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rd={disconnectBeforeUnload:!0,reconnectionRetries:3,requestMode:"fetch"};function Ad(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Td(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ad(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ad(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bd=function(){function e(){d()(this,e),h()(this,"name","allow-offline-requests"),this.onBeforeProcessRequest=this.onBeforeProcessRequest.bind(this)}return _()(e,[{key:"onBeforeProcessRequest",value:function(e){var t,n,i=e.data;null!==(t=i.options)&&void 0!==t&&null!==(n=t.metadata)&&void 0!==n&&n.noRequestTransform||navigator.onLine||(i.options=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0===e?t:Td(Td({},e),t)}(i.options,{allowOffline:!0,authorize:!1}))}},{key:"attach",value:function(e,t){t.on(il.PluginEvent.TRANSPORT_BEFORE_PROCESS_REQUEST,this.onBeforeProcessRequest)}},{key:"detach",value:function(e,t){t.removeListener(il.PluginEvent.TRANSPORT_BEFORE_PROCESS_REQUEST,this.onBeforeProcessRequest)}}]),e}();function Ld(){return new bd}var Id=n(1516),Pd=n.n(Id),Cd=n(1796),Od=function(){function e(t){var n=this;d()(this,e),h()(this,"transport",void 0),h()(this,"enabled",void 0),h()(this,"name","content-access"),h()(this,"cat",null),h()(this,"catPromise",null),h()(this,"api",void 0),this.transport=t,this.enabled="1"===Pd().getCookie("sp_has_cart"),this.api={enable:function(){return n.enable()},isEnabled:function(){return n.isEnabled()}},this.enable=this.enable.bind(this),this._handleOnAuthenticated=this._handleOnAuthenticated.bind(this),this._ensureCat=this._ensureCat.bind(this),this._processRequest=this._processRequest.bind(this),this._getCat=this._getCat.bind(this)}return _()(e,[{key:"enable",value:function(){this.enabled||(this.enabled=!0,this._ensureCat())}},{key:"isEnabled",value:function(){return this.enabled}},{key:"_handleOnAuthenticated",value:function(){this.enabled&&this._ensureCat()}},{key:"_ensureCat",value:function(){this.cat||this._getCat()}},{key:"_processRequest",value:function(t){var n=t.data,i=n.uri;this.enabled&&((!this.cat||this.cat&&this.cat.expiresAtMs-6e4<Date.now())&&this._getCat(),this.cat&&e._include(i)&&(n.options||(n.options={}),n.options.headers||(n.options.headers={}),n.options.headers["content-access-token"]=this.cat.contentAccessToken))}},{key:"_getCat",value:function(){var e=this;!this.catPromise&&this.transport.isAuthenticated()&&(this.catPromise=be.getInstance().build().withHost("https://shelter.spotify.com").withPath("/v1/token").withoutMarket().withoutAuthorization().withEndpointIdentifier("shelter.spotify.com/v1/token").withCredentials().send().then((function(t){200===t.status&&(e.cat=t.body,e.catPromise=null)})).catch((function(){})))}},{key:"attach",value:function(e,t){t.on(il.PluginEvent.TRANSPORT_BEFORE_PROCESS_REQUEST,this._processRequest),e.on(Cd.j.AUTHENTICATED,this._handleOnAuthenticated)}},{key:"detach",value:function(e,t){t.removeListener(il.PluginEvent.TRANSPORT_BEFORE_PROCESS_REQUEST,this._processRequest),e.removeListener(Cd.j.AUTHENTICATED,this._handleOnAuthenticated)}}],[{key:"_include",value:function(e){return e.indexOf("@webgate")>-1&&!e.startsWith("@webgate/gabo")||e.indexOf("@webapi")>-1||e.startsWith("https://api.spotify.com/")||e.startsWith("https://api-partner.spotify.com/")||e.indexOf("spclient.wg.spotify.com")>-1}}]),e}();function Dd(e){return new Od(e)}e=n.hmd(e),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;(0,cd.S1)(_d(_d({dsn:e,whitelistUrls:pd,sampleRate:.1},t),{},{integrations:[new dd.x],ignoreErrors:[/\/[\dA-F]{8}-[\dA-F]{4}-[\dA-F]{4}-[\dA-F]{4}-[\dA-F]{12}\/main\.js/,/^NotFoundError: Failed to execute '(removeChild|insertBefore)' on 'Node': The node.*child.*this node.$/,/ResizeObserver loop limit exceeded/,"PresentationRequest",/DA97E0680A7030159BC0C0EE3A1D098E947A08E3/]})),(0,ld.e)((function(e){var t=pc("config",{}).correlationId;t&&e.setUser({id:t}),Object.keys(n).forEach((function(t){e.setExtra(t,n[t])})),""!==document.referrer&&e.setExtra("referrer",document.referrer),i&&e.setTag("container",i)}))}("https://80341f4271be4aec89050e48a0e4553e@o22381.ingest.sentry.io/1409086",{release:"embed-podcast_2021-10-09_1633739385133_cbf3d48"});var kd,wd=document.getElementById("preloaded-state");wd&&(kd=JSON.parse(decodeURIComponent(wd.innerHTML)),document.body.removeChild(wd));var Nd,Md,Ud,xd,Fd,Yd=kd.settings.session.isAnonymous,Bd=void 0!==Yd&&Yd,Kd=function(e,t){var n=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return e(Sd(Sd({providers:{endpoints:t,token:yd(n)}},Rd),i))}(il.createBaseTransport,function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).timeout,t=gd(void 0===e?3e3:e),n=(0,md.Q)({});return function(){var e=F()(H().mark((function e(i){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(i);case 3:case 11:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.next=11,n(i);case 12:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}(),e,t.transportOptions);return t.useDealer&&n.addPlugin(Ed.dv,{WebSocket}),n.addPlugin(Dd),n.addPlugin(Ld),n.on(il.TransportEvent.CONNECTED,(function(){n.isAuthenticated()||n.authenticate()})),n.on(il.TransportEvent.DISCONNECTED,(function(){n.connect()})),n.connect(),n}((Nd="embed_podcast",Fd=function(){try{var e=document.getElementById("config"),t=e?JSON.parse(e.innerHTML):{};return n=t,["accessToken","accessTokenExpirationTimestampMs","isAnonymous"].every((function(e){return e in n}))?t:null}catch(i){return null}var n}(),Md=F()(H().mark((function e(){var t;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Fd||(n=Fd,Date.now()>=n.accessTokenExpirationTimestampMs)){e.next=2;break}return e.abrupt("return",Fd);case 2:return e.next=4,hd(be.getInstance(),"transport",Nd);case 4:return t=e.sent,e.abrupt("return",t.body);case 6:case"end":return e.stop()}var n}),e)}))),Ud=null,xd=null,F()(H().mark((function e(){var t,n,i=arguments;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{},void 0===(n=t.preferCached)||!n||!Ud){e.next=3;break}return e.abrupt("return",Ud);case 3:if(!xd){e.next=5;break}return e.abrupt("return",xd);case 5:return xd=Md(),e.prev=6,e.next=9,xd;case 9:Ud=e.sent;case 10:return e.prev=10,xd=null,e.finish(10);case 13:return e.abrupt("return",Ud);case 14:case"end":return e.stop()}}),e,null,[[6,,10,13]])})))),{useDealer:!Bd});!function(e){ne=e}(Kd),A.setDictionary(kd.settings.strings),A.setLocale(kd.settings.locale),be.setSession(kd.settings.session);var Hd=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.enhancer;return(n=null===n?null:sd((0,hs.md)(Vs(od(e.settings)),qs(ad),lc,uc,mc,gc,fs.Z)))?(0,hs.MT)(Os(e),e,n):(0,hs.MT)(Os(e),e)}(kd),Gd=document.getElementById("root");(0,a.hydrate)(function(e){var t=e.getState().settings.rtl,n=(0,Ce.Z)(function(e){var t=e?[ut.Z]:[];return{key:"embed-podcast-".concat(e?"rtl":"ltr"),stylisPlugins:t}}(t));return(0,Ie.tZ)(Le.zt,{store:e},(0,Ie.tZ)(Pe.C,{value:n},(0,Ie.tZ)(Ie.xB,{styles:Ke}),(0,Ie.tZ)(ps,null)))}(Hd),Gd),"hot"in e&&e.hot.accept(),T()},1516:(e,t,n)=>{n(2077),n(911),n(2759),n(895),n(3938),n(5613),n(2410),n(2482),n(2081),e.exports={getCookie:function(e){return e&&this.hasCookie(e)?decodeURIComponent(document.cookie.replace(new RegExp("(?:^|.*;\\s*)".concat(decodeURIComponent(e).replace(/[-.+*]/g,"\\$&"),"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*")),"$1")):null},hasCookie:function(e){return new RegExp("(?:^|;\\s*)".concat(decodeURIComponent(e).replace(/[-.+*]/g,"\\$&"),"\\s*\\=")).test(document.cookie)},setCookie:function(e,t,n,i){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"none";document.cookie="".concat(e,"=").concat(encodeURIComponent(t)).concat(o?";expires=".concat(o):";expires=Fri, 01 Jan 2038 17:14:16 GMT").concat(n?";path=".concat(n):"").concat(i?";domain=".concat(i):"").concat(r?";secure":"",";samesite=").concat(a)},deleteCookie:function(e,t,n){document.cookie="".concat(e,"=;expires=Fri, 01 Jan 1970 17:14:16 GMT").concat(t?";path=".concat(t):"").concat(n?";domain=".concat(n):"")},getTopDomain:function(){var e=".".concat(document.domain.split(".").slice(-2).join("."));return e=".localhost"===e?"localhost":e},getExpireTime:function(e){var t=new Date,n=t.getTime();return n+=parseInt(e,10),t.setTime(n),t.toUTCString()}}}},n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.m=t,e=[],i.O=(t,n,r,o)=>{if(!n){var a=1/0;for(d=0;d<e.length;d++){for(var[n,r,o]=e[d],s=!0,c=0;c<n.length;c++)(!1&o||a>=o)&&Object.keys(i.O).every((e=>i.O[e](n[c])))?n.splice(c--,1):(s=!1,o<a&&(a=o));if(s){e.splice(d--,1);var l=r();void 0!==l&&(t=l)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,r,o]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.j=525,(()=>{var e={525:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var r,o,[a,s,c]=n,l=0;if(a.some((t=>0!==e[t]))){for(r in s)i.o(s,r)&&(i.m[r]=s[r]);if(c)var d=c(i)}for(t&&t(n);l<a.length;l++)o=a[l],i.o(e,o)&&e[o]&&e[o][0](),e[a[l]]=0;return i.O(d)},n=("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=i.O(void 0,[250],(()=>i(9723)));r=i.O(r)})();
//# sourceMappingURL=embed-podcast.4bb1925c.js.map